import{j as e}from"./spline-OfIZ-5GP.js";import{r as t}from"./react-vendor-ClpDbY_3.js";import{f as r,h as s,u as n,S as o,a,i,s as l,p as c,g as d,t as u}from"./index-FbpD5WL4.js";import{X as x}from"./x-9eSzjIWe.js";import{A as m}from"./alert-circle-BC14ilB7.js";import{L as p}from"./loader-2-CQySOwBf.js";import{c as h}from"./createLucideIcon-DkpiXdJH.js";import{T as y}from"./trash-2-CTJu5OiJ.js";const f={},g=(e,t,r,s)=>{j(r)&&f[r]||(j(r)&&(f[r]=new Date),((e,t,r,s)=>{var n,o,a,i;const l=[r,{code:t,...s||{}}];if(null==(o=null==(n=null==e?void 0:e.services)?void 0:n.logger)?void 0:o.forward)return e.services.logger.forward(l,"warn","react-i18next::",!0);j(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(null==(i=null==(a=null==e?void 0:e.services)?void 0:a.logger)?void 0:i.warn)?e.services.logger.warn(...l):null==console||console.warn})(e,t,r,s))},v=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},k=(e,t,r)=>{e.loadNamespaces(t,v(e,r))},b=(e,t,r,s)=>{if(j(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return k(e,r,s);r.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,v(e,s))},j=e=>"string"==typeof e,w=t.createContext();class C{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var N={exports:{}},_={},L=t;var S="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},W=L.useState,M=L.useEffect,T=L.useLayoutEffect,B=L.useDebugValue;function F(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!S(e,r)}catch(s){return!0}}var I="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),s=W({inst:{value:r,getSnapshot:t}}),n=s[0].inst,o=s[1];return T(function(){n.value=r,n.getSnapshot=t,F(n)&&o({inst:n})},[e,r,t]),M(function(){return F(n)&&o({inst:n}),e(function(){F(n)&&o({inst:n})})},[e]),B(r),r};_.useSyncExternalStore=void 0!==L.useSyncExternalStore?L.useSyncExternalStore:I,N.exports=_;var O=N.exports;const E={t:(e,t)=>{return j(t)?t:"object"==typeof(r=t)&&null!==r&&j(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var r},ready:!1},H=()=>()=>{},A=(e,n={})=>{var o,a,i;const{i18n:l}=n,{i18n:c,defaultNS:d}=t.useContext(w)||{},u=l||c||s();u&&!u.reportNamespaces&&(u.reportNamespaces=new C),u||g(u,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const x=t.useMemo(()=>{var e;return{...r(),...null==(e=null==u?void 0:u.options)?void 0:e.react,...n}},[u,n]),{useSuspense:m,keyPrefix:p}=x,h=d||(null==(o=null==u?void 0:u.options)?void 0:o.defaultNS),y=j(h)?[h]:h||["translation"],f=t.useMemo(()=>y,y);null==(i=null==(a=null==u?void 0:u.reportNamespaces)?void 0:a.addUsedNamespaces)||i.call(a,f);const v=t.useRef(0),N=t.useCallback(e=>{if(!u)return H;const{bindI18n:t,bindI18nStore:r}=x,s=()=>{v.current+=1,e()};return t&&u.on(t,s),r&&u.store.on(r,s),()=>{t&&t.split(" ").forEach(e=>u.off(e,s)),r&&r.split(" ").forEach(e=>u.store.off(e,s))}},[u,x]),_=t.useRef(),L=t.useCallback(()=>{if(!u)return E;const e=!(!u.isInitialized&&!u.initializedStoreOnce)&&f.every(e=>((e,t,r={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:r.lng,precheck:(t,s)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!s(t.isLanguageChangingTo,e))return!1}}):(g(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,u,x)),t=n.lng||u.language,r=v.current,s=_.current;if(s&&s.ready===e&&s.lng===t&&s.keyPrefix===p&&s.revision===r)return s;const o={t:u.getFixedT(t,"fallback"===x.nsMode?f:f[0],p),ready:e,lng:t,keyPrefix:p,revision:r};return _.current=o,o},[u,f,p,x,n.lng]),[S,W]=t.useState(0),{t:M,ready:T}=O.useSyncExternalStore(N,L,L);t.useEffect(()=>{if(u&&!T&&!m){const e=()=>W(e=>e+1);n.lng?b(u,n.lng,f,e):k(u,f,e)}},[u,n.lng,f,T,m,S]);const B=u||{},F=t.useRef(null),I=t.useRef(),A=e=>{const t=Object.getOwnPropertyDescriptors(e);t.__original&&delete t.__original;const r=Object.create(Object.getPrototypeOf(e),t);if(!Object.prototype.hasOwnProperty.call(r,"__original"))try{Object.defineProperty(r,"__original",{value:e,writable:!1,enumerable:!1,configurable:!1})}catch(s){}return r},D=t.useMemo(()=>{const e=B,t=null==e?void 0:e.language;let r=e;e&&(F.current&&F.current.__original===e?I.current!==t?(r=A(e),F.current=r,I.current=t):r=F.current:(r=A(e),F.current=r,I.current=t));const s=[M,r,T];return s.t=M,s.i18n=r,s.ready=T,s},[M,B,T,B.resolvedLanguage,B.language,B.languages]);if(u&&m&&!T)throw new Promise(e=>{const t=()=>e();n.lng?b(u,n.lng,f,t):k(u,f,t)});return D},D=h("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),R=h("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),V=h("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),$=h("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),z=h("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]),P=h("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),q=h("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),U=h("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Y=`data:image/svg+xml;base64,${btoa('<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <defs>\n      <linearGradient id="avatarGradient" x1="0%" y1="0%" x2="100%" y2="100%">\n        <stop offset="0%" stop-color="#1e1e24"/>\n        <stop offset="100%" stop-color="#0f0f13"/>\n      </linearGradient>\n      <linearGradient id="avatarShine" x1="0%" y1="0%" x2="100%" y2="100%">\n        <stop offset="0%" stop-color="#64748B" stop-opacity="0.15"/>\n        <stop offset="100%" stop-color="#64748B" stop-opacity="0"/>\n      </linearGradient>\n    </defs>\n    <circle cx="20" cy="20" r="20" fill="url(#avatarGradient)"/>\n    <circle cx="20" cy="15" r="7" fill="#64748B" fill-opacity="0.8"/>\n    <path d="M8 32c0-5.523 4.477-10 10-10h4c5.523 0 10 4.477 10 10" stroke="#64748B" stroke-width="2.5" stroke-opacity="0.8" fill="none" stroke-linecap="round"/>\n    <circle cx="20" cy="20" r="20" fill="url(#avatarShine)"/>\n  </svg>')}`;btoa('<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <rect width="40" height="40" fill="#000000"/>\n    <g>\n      \x3c!-- Leftmost bar (shortest) --\x3e\n      <rect x="7" y="19" width="3" height="6" rx="1.5" fill="#FFFFFF"/>\n      \x3c!-- Second bar (medium) --\x3e\n      <rect x="12" y="16" width="3" height="12" rx="1.5" fill="#FFFFFF"/>\n      \x3c!-- Center bar (tallest) --\x3e\n      <rect x="17" y="8" width="3" height="24" rx="1.5" fill="#FFFFFF"/>\n      \x3c!-- Fourth bar (medium) --\x3e\n      <rect x="22" y="16" width="3" height="12" rx="1.5" fill="#FFFFFF"/>\n      \x3c!-- Rightmost bar (shortest) --\x3e\n      <rect x="27" y="19" width="3" height="6" rx="1.5" fill="#FFFFFF"/>\n    </g>\n  </svg>');const X="https://hlcpoqxzqgbghsadouef.supabase.co/storage/v1/object/public/avatars/pic/elevate%20solid%20white%20logo%20ver.jpeg",Z=`${o}/functions/v1/social-links`,K=`${o}/functions/v1/youtube-stats`,G={"Content-Type":"application/json",Authorization:`Bearer ${a}`};function J({platform:t,className:r,style:s}){return"YouTube"===t?e.jsx("svg",{className:r,style:s,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}):"Instagram"===t?e.jsxs("svg",{className:r,style:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5"}),e.jsx("circle",{cx:"12",cy:"12",r:"4"}),e.jsx("circle",{cx:"17.5",cy:"6.5",r:"1",fill:"currentColor",stroke:"none"})]}):"TikTok"===t?e.jsx("svg",{className:r,style:s,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-2.88 2.5 2.89 2.89 0 01-2.89-2.89 2.89 2.89 0 012.89-2.89c.28 0 .54.04.79.1V9.01a6.33 6.33 0 00-.79-.05 6.34 6.34 0 00-6.34 6.34 6.34 6.34 0 006.34 6.34 6.34 6.34 0 006.33-6.34V8.69a8.21 8.21 0 004.79 1.52V6.76a4.85 4.85 0 01-1.02-.07z"})}):"Twitter"===t||"X"===t?e.jsx("svg",{className:r,style:s,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.766l7.73-8.835L2.25 2.25h7.11l4.261 5.638 5.623-5.638zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}):"Twitch"===t?e.jsx("svg",{className:r,style:s,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714z"})}):e.jsxs("svg",{className:r,style:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"}),e.jsx("path",{d:"M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"})]})}function Q({user:r,onClose:s,backgroundTheme:n}){const o="var(--border-subtle)",[a,i]=t.useState([]),[l,c]=t.useState(!0),d=t.useRef(null),u=a.reduce((e,t)=>e+(t.follower_count||0),0),x=a.reduce((e,t)=>e+(t.view_count||0),0),m=u>0||x>0,p=e=>e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":String(e);return t.useEffect(()=>{if(r.is_admin)return void c(!1);let e=!1;return(async()=>{try{const t=await fetch(`${Z}?userId=${r.id}`,{headers:G}),s=await t.json();if(!s.success||e)return;const n=s.links||[];i(n),c(!1);if(n.some(e=>{var t;return"youtube"===(null==(t=e.platform)?void 0:t.toLowerCase())}))try{if(await fetch(K,{method:"POST",headers:G,body:JSON.stringify({userId:r.id})}),e)return;const t=await fetch(`${Z}?userId=${r.id}`,{headers:G}),s=await t.json();!e&&s.success&&i(s.links||[])}catch{}}catch{}finally{e||c(!1)}})(),()=>{e=!0}},[r.id,r.is_admin]),e.jsx("div",{ref:d,className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)"},onClick:e=>{e.target===d.current&&s()},children:e.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl overflow-hidden",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-default)"},children:[e.jsx("button",{onClick:s,className:"absolute top-3 right-3 p-1.5 rounded-full transition-colors hover:bg-white/10 z-10",style:{color:"var(--text-primary)"},children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})}),e.jsxs("div",{className:"flex flex-col items-center pt-8 pb-5 px-6",style:{borderBottom:`1px solid ${o}`},children:[e.jsx("img",{src:r.is_admin?X:r.avatar_url||Y,alt:r.name,className:"w-20 h-20 rounded-full object-cover mb-3",style:{border:"2px solid rgba(255,255,255,0.15)"}}),e.jsx("h3",{className:"text-lg font-semibold text-center",style:{color:"var(--text-primary)"},children:r.name}),r.is_admin&&e.jsxs("div",{className:"mt-2 flex items-center gap-1.5 px-3 py-1 rounded-full",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("svg",{className:"w-3 h-3 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--text-primary)"},children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("path",{d:"m9 11 3 3L22 4"})]}),e.jsx("span",{className:"text-xs font-semibold",style:{color:"var(--text-primary)"},children:"Official Support"})]}),r.username&&e.jsxs("p",{className:"text-sm mt-0.5",style:{color:"var(--text-primary)",opacity:.7},children:["@",r.username]}),!r.is_admin&&r.user_type&&e.jsx("span",{className:"mt-2 px-3 py-0.5 rounded-full text-xs font-medium capitalize",style:{backgroundColor:"var(--bg-elevated)",color:"var(--text-primary)"},children:r.user_type})]}),!r.is_admin&&e.jsxs("div",{className:"px-5 py-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:"var(--text-primary)"},children:"Social Links"}),l?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"w-5 h-5 rounded-full border-2 animate-spin",style:{borderColor:"rgba(255,255,255,0.2)",borderTopColor:"rgba(255,255,255,0.7)"}})}):0===a.length?e.jsx("p",{className:"text-sm text-center py-3",style:{color:"var(--text-primary)"},children:"No social links added"}):e.jsx("div",{className:"space-y-1",children:a.map(t=>e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-2.5 rounded-xl transition-colors group hover:bg-white/5",onClick:e=>e.stopPropagation(),children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:"rgba(255,255,255,0.06)"},children:e.jsx(J,{platform:t.platform,className:"w-4 h-4",style:{color:"var(--text-primary)"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-sm font-medium truncate",style:{color:"var(--text-primary)"},children:t.display_name||t.platform}),t.verified&&e.jsxs("svg",{className:"w-3 h-3 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--text-primary)"},children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("path",{d:"m9 11 3 3L22 4"})]})]}),e.jsx("span",{className:"text-xs truncate block",style:{color:"var(--text-primary)"},children:t.url.replace(/^https?:\/\//i,"")})]}),e.jsxs("svg",{className:"w-3.5 h-3.5 flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--text-primary)"},children:[e.jsx("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"}),e.jsx("polyline",{points:"15 3 21 3 21 9"}),e.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]},t.id))}),!l&&m&&e.jsxs("div",{className:"mt-3 pt-3",style:{borderTop:`1px solid ${o}`},children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:"var(--text-primary)"},children:"Channel Stats"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u>0&&e.jsxs("div",{className:"flex flex-col items-center py-2.5 rounded-xl",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-subtle)"},children:[e.jsx("span",{className:"text-base font-bold",style:{color:"var(--text-primary)"},children:p(u)}),e.jsx("span",{className:"text-xs mt-0.5",style:{color:"var(--text-primary)",opacity:.6},children:"Followers"})]}),x>0&&e.jsxs("div",{className:"flex flex-col items-center py-2.5 rounded-xl",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-subtle)"},children:[e.jsx("span",{className:"text-base font-bold",style:{color:"var(--text-primary)"},children:p(x)}),e.jsx("span",{className:"text-xs mt-0.5",style:{color:"var(--text-primary)",opacity:.6},children:"Views"})]})]})]})]})]})})}function ee({className:r,style:s}){const[n,o]=t.useState(!1);return e.jsx("div",{className:`cursor-pointer flex items-center justify-center ${r}`,style:s,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 overflow-visible",children:[e.jsx("rect",{x:"4",y:"14",width:"28",height:"20",rx:"3",stroke:"currentColor",strokeWidth:"3",fill:"none",style:{transform:n?"scale(1.05)":"scale(1)",transformOrigin:"18px 24px",transition:"transform 0.3s ease"}}),e.jsx("circle",{cx:"18",cy:"24",r:"6",stroke:"currentColor",strokeWidth:"3",fill:"none",style:{transform:n?"scale(1.1)":"scale(1)",transformOrigin:"18px 24px",transition:"transform 0.3s ease 0.05s"}}),e.jsx("circle",{cx:"18",cy:"24",r:"3",fill:"currentColor",style:{opacity:n?.8:.4,transition:"opacity 0.3s ease"}}),e.jsx("circle",{cx:"16",cy:"22",r:"1",fill:"currentColor",style:{opacity:n?.6:.2,transition:"opacity 0.3s ease 0.1s"}}),e.jsx("path",{d:"M32 18L44 12V36L32 30V18Z",stroke:"currentColor",strokeWidth:"3",strokeLinejoin:"round",fill:"none",style:{transform:n?"translateX(2px) scale(1.1)":"translateX(0) scale(1)",transformOrigin:"32px 24px",transition:"transform 0.3s ease"}}),e.jsx("circle",{cx:"8",cy:"18",r:"2",fill:"#ef4444",style:{opacity:n?1:0,transform:n?"scale(1)":"scale(0)",transformOrigin:"8px 18px",transition:"all 0.3s ease"}}),e.jsx("circle",{cx:"8",cy:"18",r:"2",fill:"#ef4444",style:{opacity:n?.3:0,transform:n?"scale(2.5)":"scale(0)",transformOrigin:"8px 18px",transition:"all 0.5s ease"}})]})})}function te({className:r,style:s}){const[n,o]=t.useState(!1);return e.jsx("div",{className:`cursor-pointer flex items-center justify-center ${r}`,style:s,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 overflow-visible",children:[e.jsx("rect",{x:"6",y:"10",width:"36",height:"32",rx:"3",stroke:"currentColor",strokeWidth:"3",fill:"none",style:{transform:n?"scale(1.05)":"scale(1)",transformOrigin:"24px 26px",transition:"transform 0.3s ease"}}),e.jsx("line",{x1:"6",y1:"18",x2:"42",y2:"18",stroke:"currentColor",strokeWidth:"3",style:{opacity:n?.8:.6,transition:"opacity 0.3s ease"}}),e.jsx("line",{x1:"14",y1:"6",x2:"14",y2:"14",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",style:{transform:n?"translateY(-1px)":"translateY(0)",transition:"transform 0.3s ease"}}),e.jsx("line",{x1:"34",y1:"6",x2:"34",y2:"14",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",style:{transform:n?"translateY(-1px)":"translateY(0)",transition:"transform 0.3s ease 0.05s"}}),e.jsx("circle",{cx:"12",cy:"24",r:"1.5",fill:"currentColor",style:{opacity:n?.8:.3,transition:"opacity 0.3s ease 0.1s"}}),e.jsx("circle",{cx:"18",cy:"24",r:"1.5",fill:"currentColor",style:{opacity:n?.8:.3,transition:"opacity 0.3s ease 0.15s"}}),e.jsx("circle",{cx:"24",cy:"24",r:"1.5",fill:"currentColor",style:{opacity:n?1:.4,transition:"opacity 0.3s ease 0.2s"}}),e.jsx("circle",{cx:"30",cy:"24",r:"1.5",fill:"currentColor",style:{opacity:n?.8:.3,transition:"opacity 0.3s ease 0.25s"}}),e.jsx("circle",{cx:"36",cy:"24",r:"1.5",fill:"currentColor",style:{opacity:n?.8:.3,transition:"opacity 0.3s ease 0.3s"}}),e.jsx("circle",{cx:"12",cy:"30",r:"1.5",fill:"currentColor",style:{opacity:n?.6:.2,transition:"opacity 0.3s ease 0.35s"}}),e.jsx("circle",{cx:"18",cy:"30",r:"1.5",fill:"currentColor",style:{opacity:n?.6:.2,transition:"opacity 0.3s ease 0.4s"}}),e.jsx("circle",{cx:"24",cy:"30",r:"1.5",fill:"currentColor",style:{opacity:n?.8:.3,transition:"opacity 0.3s ease 0.45s"}}),e.jsx("circle",{cx:"30",cy:"30",r:"1.5",fill:"currentColor",style:{opacity:n?.6:.2,transition:"opacity 0.3s ease 0.5s"}}),e.jsx("circle",{cx:"36",cy:"30",r:"1.5",fill:"currentColor",style:{opacity:n?.6:.2,transition:"opacity 0.3s ease 0.55s"}}),e.jsx("circle",{cx:"12",cy:"36",r:"1.5",fill:"currentColor",style:{opacity:n?.4:.1,transition:"opacity 0.3s ease 0.6s"}}),e.jsx("circle",{cx:"18",cy:"36",r:"1.5",fill:"currentColor",style:{opacity:n?.4:.1,transition:"opacity 0.3s ease 0.65s"}}),e.jsx("circle",{cx:"24",cy:"36",r:"1.5",fill:"currentColor",style:{opacity:n?.6:.2,transition:"opacity 0.3s ease 0.7s"}}),e.jsx("circle",{cx:"30",cy:"36",r:"1.5",fill:"currentColor",style:{opacity:n?.4:.1,transition:"opacity 0.3s ease 0.75s"}}),e.jsx("circle",{cx:"36",cy:"36",r:"1.5",fill:"currentColor",style:{opacity:n?.4:.1,transition:"opacity 0.3s ease 0.8s"}}),e.jsx("rect",{x:"8",y:"20",width:"32",height:"22",fill:"rgba(255,255,255,0.05)",style:{opacity:n?1:0,transition:"opacity 0.3s ease"}})]})})}function re({className:r,style:s,isDrawerOpen:n,backgroundTheme:o}){const[a,i]=t.useState(!1);return e.jsx("div",{className:`cursor-pointer flex items-center justify-center ${r}`,style:s,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 overflow-visible",children:[e.jsx("rect",{x:"6",y:"6",width:"36",height:"36",rx:"3",stroke:"currentColor",strokeWidth:"3",fill:"none",style:{transform:a?"scale(1.02)":"scale(1)",transformOrigin:"24px 24px",transition:"transform 0.3s ease"}}),e.jsx("rect",{x:"10",y:"10",width:"28",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"3",fill:"none",style:{opacity:.6}}),e.jsx("line",{x1:"20",y1:"14",x2:"28",y2:"14",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",style:{opacity:.6}}),e.jsxs("g",{style:{transform:a||n?"translateY(12px) scale(1.05)":"translateY(0) scale(1)",transformOrigin:"24px 24px",transition:"transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:[e.jsx("rect",{x:"10",y:"20",width:"28",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"3",fill:"var(--bg-primary)"}),e.jsx("line",{x1:"20",y1:"24",x2:"28",y2:"24",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),e.jsxs("g",{style:{opacity:a||n?1:0,transition:"opacity 0.3s ease 0.15s"},children:[e.jsx("rect",{x:"12",y:"22",width:"4",height:"4",rx:"0.5",fill:"currentColor",opacity:"0.7"}),e.jsx("rect",{x:"17",y:"22",width:"4",height:"4",rx:"0.5",fill:"currentColor",opacity:"0.5"}),e.jsx("rect",{x:"22",y:"22",width:"4",height:"4",rx:"0.5",fill:"currentColor",opacity:"0.6"}),e.jsx("line",{x1:"13",y1:"23.5",x2:"15",y2:"23.5",stroke:"rgba(0,0,0,0.5)",strokeWidth:"0.5"}),e.jsx("line",{x1:"18",y1:"23.5",x2:"20",y2:"23.5",stroke:"rgba(0,0,0,0.5)",strokeWidth:"0.5"}),e.jsx("line",{x1:"23",y1:"23.5",x2:"25",y2:"23.5",stroke:"rgba(0,0,0,0.5)",strokeWidth:"0.5"})]})]}),e.jsx("rect",{x:"10",y:"30",width:"28",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"3",fill:"none",style:{opacity:.6}}),e.jsx("line",{x1:"20",y1:"34",x2:"28",y2:"34",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",style:{opacity:.6}}),e.jsx("rect",{x:"10",y:"28",width:"28",height:"4",fill:"currentColor",style:{opacity:a?.2:0,transition:"opacity 0.3s ease"}}),e.jsx("rect",{x:"20",y:"8",width:"8",height:"2",rx:"1",fill:"currentColor",style:{opacity:a?.8:.4,transition:"opacity 0.3s ease"}})]})})}function se({user:r,isTyping:s,onBack:o,showBackButton:a,onVideoCall:i,onScheduleMeeting:l,onOpenDrawer:c,isDrawerOpen:d,backgroundTheme:u="dark"}){const{profile:x}=n(),[m,p]=t.useState(!1),h=x&&"artist"!==x.user_type;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-14 lg:h-16 px-3 lg:px-4 flex items-center justify-between min-w-0",style:{borderBottom:"1px solid var(--border-subtle)",backgroundColor:"var(--bg-primary)"},children:[e.jsxs("div",{className:"flex items-center gap-2 lg:gap-3 min-w-0 flex-1",children:[a&&e.jsx("button",{onClick:o,className:"p-1.5 lg:p-2 -ml-1 lg:-ml-2 rounded-full hover:brightness-110 transition-colors lg:hidden",style:{color:"var(--text-primary)"},children:e.jsx("svg",{className:"w-4 h-4 lg:w-5 lg:h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("img",{src:r.is_admin?X:r.avatar_url||Y,alt:r.name,className:"w-8 h-8 lg:w-10 lg:h-10 rounded-full object-cover default-avatar-shake",style:{backgroundColor:"var(--bg-active)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("button",{onClick:()=>p(!0),className:"text-left hover:underline transition-all",children:e.jsx("h2",{className:"text-sm lg:text-base font-medium truncate",style:{color:"var(--text-primary)"},"data-component-name":"ChatHeader",children:r.name})}),s&&e.jsx("p",{className:"text-[10px] lg:text-xs",style:{color:"var(--text-primary)"},children:"typing..."})]})]}),h&&e.jsxs("div",{className:"flex items-center gap-1 lg:gap-2",children:[e.jsx("button",{onClick:i,className:"p-2.5 rounded-lg transition-colors","aria-label":"Video call",children:e.jsx(ee,{className:"w-5 h-5 lg:w-6 lg:h-6",style:{color:"var(--text-primary)"},backgroundTheme:u})}),e.jsx("button",{onClick:l,className:"p-2.5 rounded-lg transition-colors","aria-label":"Schedule meeting",children:e.jsx(te,{className:"w-5 h-5 lg:w-6 lg:h-6",style:{color:"var(--text-primary)"}})}),e.jsx("button",{onClick:c,className:"p-2.5 rounded-lg transition-colors","aria-label":"View details",children:e.jsx(re,{className:"w-5 h-5 lg:w-6 lg:h-6",style:{color:"var(--text-primary)"},isDrawerOpen:d,backgroundTheme:u})})]})]}),m&&e.jsx(Q,{user:r,onClose:()=>p(!1),backgroundTheme:u})]})}function ne({file:r,onRemove:s}){const[n,o]=t.useState("");return t.useEffect(()=>{const e=URL.createObjectURL(r);return o(e),()=>{URL.revokeObjectURL(e)}},[r]),e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:n,alt:"Upload preview",className:"w-20 h-20 object-cover rounded-lg",style:{border:"1px solid rgba(75, 85, 99, 0.2)"}}),e.jsx("button",{onClick:s,className:"absolute -top-2 -right-2 p-1 rounded-full transition-colors",style:{backgroundColor:"var(--bg-card)",border:"1px solid rgba(75, 85, 99, 0.2)"},children:e.jsx(x,{className:"w-3.5 h-3.5",style:{color:"var(--text-primary)"}})})]})}function oe({replyTo:t,onCancel:r}){const s=t.content.length>80?t.content.substring(0,80)+"...":t.content;return e.jsx("div",{className:"animate-fade-in",children:e.jsxs("div",{className:"flex items-start gap-3 px-3 py-2 rounded-lg border-l-2",style:{backgroundColor:"var(--bg-elevated)",borderColor:"var(--border-subtle)"},children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs font-medium",style:{color:"var(--text-primary)"},children:["Replying to ",t.senderName]}),e.jsx("p",{className:"text-xs truncate mt-0.5",style:{color:"var(--text-primary)"},children:s||"Image"})]}),e.jsx("button",{onClick:r,className:"shrink-0 p-1 rounded-full hover:brightness-110 transition-colors",style:{color:"var(--text-primary)"},children:e.jsx(x,{className:"w-4 h-4"})})]})})}const ae=10485760,ie=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];function le(){const[e,r]=t.useState("idle"),[s,n]=t.useState(0),[o,a]=t.useState(null),l=t.useRef(null),c=t.useRef(null),d=t.useRef([]),u=t.useRef(null),x=t.useRef(0),m=t.useRef(null),p=t.useRef(null),h=t.useRef(null),y=t.useCallback(()=>{c.current&&(c.current.getTracks().forEach(e=>e.stop()),c.current=null),u.current&&(clearInterval(u.current),u.current=null),m.current&&(m.current.close().catch(()=>{}),m.current=null),p.current=null,h.current=null,l.current=null,d.current=[],n(0)},[]),f=t.useCallback(async()=>{var e;if(a(null),!(null==(e=navigator.mediaDevices)?void 0:e.getUserMedia))return a("Microphone access is not supported in this browser."),void r("error");try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});c.current=e;const t=new AudioContext;m.current=t;const s=t.createAnalyser();s.fftSize=256,s.smoothingTimeConstant=.6;t.createMediaStreamSource(e).connect(s),p.current=s,h.current=new Uint8Array(s.frequencyBinCount);const o=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4",a=new MediaRecorder(e,{mimeType:o});l.current=a,d.current=[],a.ondataavailable=e=>{e.data.size>0&&d.current.push(e.data)},a.start(250),x.current=Date.now(),r("recording"),u.current=setInterval(()=>{n(Math.floor((Date.now()-x.current)/1e3))},100)}catch(t){t instanceof Error&&"NotAllowedError"===t.name?a("Microphone permission denied. Please allow mic access and try again."):a("Could not access microphone."),r("error"),y()}},[y]),g=t.useCallback(()=>p.current&&h.current?(p.current.getByteFrequencyData(h.current),h.current):null,[]);return{state:e,duration:s,error:o,startRecording:f,stopAndTranscribe:t.useCallback(()=>new Promise(e=>{const t=l.current;if(!t||"inactive"===t.state)return y(),r("idle"),void e(null);t.onstop=async()=>{u.current&&(clearInterval(u.current),u.current=null),m.current&&(m.current.close().catch(()=>{}),m.current=null),p.current=null,h.current=null,r("transcribing");try{const s=t.mimeType||"audio/webm",n=s.includes("mp4")?"mp4":"webm",o=new Blob(d.current,{type:s});if(o.size<100)return a("Recording too short â€” please hold the mic button longer."),r("error"),y(),void e(null);const l=new File([o],`recording.${n}`,{type:s}),c=new FormData;c.append("file",l);const u=await fetch(`${i}/transcribe`,{method:"POST",body:c});if(!u.ok){const e=await u.text();throw new Error(e||`Server error ${u.status}`)}const x=((await u.json()).text||"").trim();r("idle"),y(),e(x||null)}catch(s){a(function(e){return e instanceof TypeError?`Could not reach the transcription service at ${i}. Make sure the ASR service is running (cd asr-service && uvicorn app:app --port 8000).`:e instanceof Error&&e.message?e.message:"string"==typeof e?e:"Transcription failed. Unknown error."}(s)),r("error"),y(),e(null)}},t.stop(),c.current&&(c.current.getTracks().forEach(e=>e.stop()),c.current=null)}),[y]),cancelRecording:t.useCallback(()=>{const e=l.current;e&&"inactive"!==e.state&&(e.onstop=null,e.stop()),y(),r("idle")},[y]),getWaveformData:g}}const ce=28;function de({getWaveformData:r,isActive:s}){const n=t.useRef(null),o=t.useRef(null),a=t.useRef(0),i=t.useRef(Array(ce).fill(3)),l=t.useCallback(e=>{if(!s)return;const t=n.current;if(!t)return;if(e-a.current<25)return void(o.current=requestAnimationFrame(l));a.current=e;const c=t.getContext("2d");if(!c)return;const d=r(),u=t.width,x=t.height;c.clearRect(0,0,u,x);const m=Math.floor((u-54)/ce);for(let r=0;r<ce;r++){let e;if(d){e=3+25*(d[Math.floor(r/ce*(.5*d.length))]/255)}else e=3+2*Math.random();const t=i.current[r];i.current[r]=t+.35*(e-t);const s=i.current[r],n=r*(m+2),o=(x-s)/2,a=c.createLinearGradient(0,o,0,o+s);a.addColorStop(0,"rgba(248, 113, 113, 0.95)"),a.addColorStop(1,"rgba(239, 68, 68, 0.4)"),c.fillStyle=a,c.beginPath(),c.roundRect(n,o,m,s,2),c.fill()}o.current=requestAnimationFrame(l)},[s,r]);return t.useEffect(()=>{if(s)o.current=requestAnimationFrame(l);else{null!==o.current&&(cancelAnimationFrame(o.current),o.current=null);const e=n.current;if(e){const t=e.getContext("2d");null==t||t.clearRect(0,0,e.width,e.height)}i.current=Array(ce).fill(3)}return()=>{null!==o.current&&(cancelAnimationFrame(o.current),o.current=null)}},[s,l]),e.jsx("canvas",{ref:n,width:140,height:32,className:"shrink-0",style:{imageRendering:"pixelated"}})}function ue({onSendMessage:r,onTyping:s,disabled:n,replyTo:o,onCancelReply:a,otherUserName:i,conversationId:l,initialDraft:c="",onDraftChange:d,onDraftClear:u,enableSpellCheck:h=!1}){const{t:y}=A(),[f,g]=t.useState(c),[v,k]=t.useState(null),b=t.useRef(null),j=t.useRef(null),w=t.useRef(null),C=t.useRef(null),N=t.useRef(null),_=t.useRef(null);t.useEffect(()=>{g(c)},[l,c]),t.useEffect(()=>{const e=j.current;if(e){e.style.height="36px";const t=e.scrollHeight;t>36&&(e.style.height=`${Math.min(t,150)}px`)}},[f]),t.useEffect(()=>{o&&j.current&&j.current.focus()},[o]),t.useEffect(()=>{w.current&&(w.current.style.borderRadius="0"),C.current&&(C.current.style.borderRadius="0"),j.current&&(j.current.style.borderRadius="0")},[]);const L=t.useCallback(e=>{l&&d&&(_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{d(l,e)},500))},[l,d]),S=()=>{!f.trim()&&!v||n||(r(f.trim(),v||void 0,o||void 0),g(""),k(null),s(!1),N.current&&clearTimeout(N.current),l&&u&&u(l))},W=t.useCallback(e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];r&&ie.includes(r.type)?(r.size>ae||k(r),e.target.value=""):e.target.value=""},[]),M=le(),T=t.useRef(null);t.useEffect(()=>{T.current&&(T.current.style.borderRadius="0")},[]);const B=f.trim()||v,F="recording"===M.state,I="transcribing"===M.state;return e.jsxs(e.Fragment,{children:[o&&a&&e.jsx("div",{className:"px-3 lg:px-4 pt-3",children:e.jsx(oe,{replyTo:o,onCancel:a})}),v&&e.jsx("div",{className:"px-3 lg:px-4 py-2",children:e.jsxs("div",{className:"p-3 rounded-lg flex items-center gap-3",style:{backgroundColor:"rgba(26, 26, 30, 0.5)"},children:[e.jsx(ne,{file:v,onRemove:()=>k(null)}),v.size>ae&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",style:{color:"#ef4444"},children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:"File too large"})]})]})}),F&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 animate-fade-in",style:{borderTop:"1px solid var(--border-default)",backgroundColor:"var(--bg-elevated)"},children:[e.jsxs("span",{className:"relative flex h-2.5 w-2.5 shrink-0",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full opacity-75",style:{backgroundColor:"#ef4444"}}),e.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5",style:{backgroundColor:"#ef4444"}})]}),e.jsx("span",{className:"text-xs font-medium shrink-0",style:{color:"var(--text-primary)"},children:(O=M.duration,`${Math.floor(O/60)}:${(O%60).toString().padStart(2,"0")}`)}),e.jsx(de,{getWaveformData:M.getWaveformData,isActive:F}),e.jsx("button",{type:"button",onClick:()=>{M.cancelRecording()},className:"ml-auto shrink-0 p-1 transition-colors hover:brightness-125",style:{color:"var(--text-primary)",opacity:.6},"aria-label":"Cancel recording",children:e.jsx(x,{className:"w-4 h-4"})})]}),I&&e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 animate-fade-in",style:{borderTop:"1px solid var(--border-default)",backgroundColor:"var(--bg-elevated)"},children:[e.jsx(p,{className:"w-4 h-4 animate-spin",style:{color:"var(--text-primary)"}}),e.jsx("span",{className:"text-xs font-medium",style:{color:"var(--text-primary)"},children:"Transcribingâ€¦"})]}),M.error&&"error"===M.state&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 text-xs",style:{borderTop:"1px solid rgba(239,68,68,0.3)",backgroundColor:"rgba(239,68,68,0.08)",color:"#f87171"},children:[e.jsx(m,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{children:M.error})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),S()},className:"flex gap-2 items-center",style:{borderTop:"1px solid var(--border-default)",backgroundColor:"var(--bg-sidebar)",padding:"12px 16px",paddingBottom:"max(12px, calc(12px + env(safe-area-inset-bottom)))"},children:[e.jsx("input",{type:"file",ref:b,onChange:W,accept:"image/*",className:"hidden"}),e.jsx("button",{ref:w,type:"button",onClick:()=>{var e;return null==(e=b.current)?void 0:e.click()},disabled:n||F||I,className:"shrink-0 hover:bg-transparent group h-8 w-8 flex items-center justify-center transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{color:"var(--text-secondary)",borderRadius:0,border:"1px solid var(--border-default)"},children:e.jsx(V,{className:"w-4 h-4 transition-transform duration-200 group-hover:scale-125"})}),e.jsx("textarea",{ref:j,value:f,onChange:e=>{g(e.target.value),s(!0),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{s(!1)},2e3),L(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),S())},placeholder:I?"Transcribingâ€¦":i?y("messages.messageAt",{username:i}):y("messages.sendAMessage"),disabled:n||I,rows:1,maxLength:5e3,"aria-label":"Message input",spellCheck:h,autoCorrect:h?"on":"off",autoCapitalize:h?"sentences":"off",className:"flex-1 px-4 py-2 text-sm focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed resize-none overflow-y-auto",style:{minHeight:"32px",maxHeight:"120px",color:"var(--text-primary)",backgroundColor:"var(--bg-input)",border:"1px solid var(--border-default)",borderRadius:0,opacity:.7},onFocus:e=>{e.target.style.borderColor="var(--text-primary)",e.target.style.opacity="1"},onBlur:e=>{e.target.style.borderColor="var(--border-default)",e.target.style.opacity="0.7"}}),e.jsx("button",{ref:T,type:"button",onClick:async()=>{if("recording"===M.state){const e=await M.stopAndTranscribe();if(e){const t=f?f+" "+e:e;g(t),L(t),setTimeout(()=>{var e;return null==(e=j.current)?void 0:e.focus()},50)}}else"idle"!==M.state&&"error"!==M.state||await M.startRecording()},disabled:n||I,className:"shrink-0 h-8 w-8 flex items-center justify-center transition-all disabled:opacity-50 disabled:cursor-not-allowed group",style:F?{backgroundColor:"rgba(239,68,68,0.15)",color:"#f87171",borderRadius:0,border:"1px solid rgba(239,68,68,0.4)"}:{backgroundColor:"var(--bg-elevated)",color:"var(--text-primary)",borderRadius:0,border:"1px solid var(--border-default)",opacity:.6},"aria-label":F?"Stop recording":"Start voice input",children:F?e.jsx(U,{className:"w-3.5 h-3.5",fill:"currentColor"}):I?e.jsx(p,{className:"w-4 h-4 animate-spin"}):e.jsx($,{className:"w-4 h-4 transition-transform duration-200 group-hover:scale-110"})}),e.jsx("button",{ref:C,type:"submit",disabled:!B||n,className:"shrink-0 h-8 w-8 flex items-center justify-center transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:B?{backgroundColor:"var(--text-primary)",color:"var(--bg-primary)",borderRadius:0,border:"1px solid var(--border-default)"}:{backgroundColor:"var(--bg-elevated)",color:"var(--text-primary)",borderRadius:0,border:"1px solid var(--border-default)",opacity:.4},children:e.jsx(q,{className:"w-4 h-4"})})]})]});var O}function xe({isOpen:r,onClose:s,imageUrl:n}){return t.useEffect(()=>{const e=e=>{"Escape"===e.key&&s()};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[r,s]),r?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm animate-fade-in",style:{backgroundColor:"rgba(0, 0, 0, 0.9)"},onClick:s,children:[e.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[e.jsx("a",{href:n,download:!0,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full transition-colors",style:{backgroundColor:"var(--bg-card)",color:"var(--text-primary)"},onClick:e=>e.stopPropagation(),children:e.jsx(R,{className:"w-5 h-5"})}),e.jsx("button",{onClick:s,className:"p-2 rounded-full transition-colors",style:{backgroundColor:"var(--bg-card)",color:"var(--text-primary)"},children:e.jsx(x,{className:"w-5 h-5"})})]}),e.jsx("img",{src:n,alt:"Full size preview",className:"max-w-[90vw] max-h-[90vh] object-contain rounded-lg",onClick:e=>e.stopPropagation()})]}):null}function me(e){const t=new Date(e),r=new Date,s=r.getTime()-t.getTime(),n=Math.floor(s/864e5);return 0===n?"Today":1===n?"Yesterday":n<7?t.toLocaleDateString("en-US",{weekday:"long"}):t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==r.getFullYear()?"numeric":void 0})}function pe(e){const t=new Date(e),r=(new Date).getTime()-t.getTime(),s=Math.floor(r/864e5);return 0===s?t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):1===s?"Yesterday":s<7?t.toLocaleDateString("en-US",{weekday:"short"}):t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}const he=t.memo(function(){return t.useEffect(()=>{if(!document.getElementById("wave-hand-keyframes")){const e=document.createElement("style");e.id="wave-hand-keyframes",e.textContent="\n        @keyframes wave-hand {\n          0%, 100% {\n            transform: rotate(0deg);\n          }\n          10%, 30% {\n            transform: rotate(14deg);\n          }\n          20% {\n            transform: rotate(-8deg);\n          }\n          40%, 60% {\n            transform: rotate(0deg);\n          }\n          50% {\n            transform: rotate(10deg);\n          }\n          70% {\n            transform: rotate(0deg);\n          }\n          80% {\n            transform: rotate(-5deg);\n          }\n          90% {\n            transform: rotate(0deg);\n          }\n        }\n      ",document.head.appendChild(e)}},[]),e.jsx("span",{className:"inline-block",style:{display:"inline-block",transformOrigin:"70% 70%",animation:"wave-hand 1s ease-in-out infinite"},children:"ðŸ‘‹"})}),ye={light:{background:"#0F172A",backgroundSecondary:"#0F172A",textPrimary:"#FFFFFF",textSecondary:"#64748B",textMuted:"#64748B",border:"rgba(75, 85, 99, 0.2)",borderLight:"rgba(75, 85, 99, 0.1)",messageBubbleOwn:"#F8FAFC",messageBubbleOwnText:"#111111",messageBubbleOther:"#2D3748",messageBubbleOtherText:"#F8FAFC",inputBackground:"#1a1a1e",inputBorder:"rgba(75, 85, 99, 0.2)",skeletonPrimary:"rgba(30, 41, 59, 0.5)",skeletonSecondary:"rgba(30, 41, 59, 0.35)",skeletonLight:"rgba(30, 41, 59, 0.25)"},grey:{background:"#1A1A1E",backgroundSecondary:"#2A2A2E",textPrimary:"#F8FAFC",textSecondary:"#94A3B8",textMuted:"#64748B",border:"rgba(75, 85, 99, 0.2)",borderLight:"rgba(75, 85, 99, 0.1)",messageBubbleOwn:"#F8FAFC",messageBubbleOwnText:"#111111",messageBubbleOther:"#2D3748",messageBubbleOtherText:"#F8FAFC",inputBackground:"#1a1a1e",inputBorder:"rgba(75, 85, 99, 0.2)",skeletonPrimary:"rgba(75, 85, 99, 0.25)",skeletonSecondary:"rgba(75, 85, 99, 0.18)",skeletonLight:"rgba(75, 85, 99, 0.12)"},dark:{background:"#000000",backgroundSecondary:"#1a1a1e",textPrimary:"#F8FAFC",textSecondary:"#94A3B8",textMuted:"#64748B",border:"rgba(75, 85, 99, 0.2)",borderLight:"rgba(75, 85, 99, 0.1)",messageBubbleOwn:"#F8FAFC",messageBubbleOwnText:"#111111",messageBubbleOther:"#2D3748",messageBubbleOtherText:"#F8FAFC",inputBackground:"#1a1a1e",inputBorder:"rgba(75, 85, 99, 0.2)",skeletonPrimary:"rgba(26, 26, 30, 0.8)",skeletonSecondary:"rgba(26, 26, 30, 0.6)",skeletonLight:"rgba(26, 26, 30, 0.4)"},rose:{background:"#120810",backgroundSecondary:"#1C1018",textPrimary:"#F8FAFC",textSecondary:"#94A3B8",textMuted:"#64748B",border:"rgba(120, 60, 100, 0.25)",borderLight:"rgba(120, 60, 100, 0.12)",messageBubbleOwn:"#F8FAFC",messageBubbleOwnText:"#111111",messageBubbleOther:"#2E1A28",messageBubbleOtherText:"#F8FAFC",inputBackground:"#1C1018",inputBorder:"rgba(120, 60, 100, 0.25)",skeletonPrimary:"rgba(28, 16, 24, 0.8)",skeletonSecondary:"rgba(28, 16, 24, 0.6)",skeletonLight:"rgba(28, 16, 24, 0.4)"},white:{background:"#FFFFFF",backgroundSecondary:"#F1F5F9",textPrimary:"#0F172A",textSecondary:"#475569",textMuted:"#94A3B8",border:"rgba(15, 23, 42, 0.12)",borderLight:"rgba(15, 23, 42, 0.06)",messageBubbleOwn:"#0F172A",messageBubbleOwnText:"#FFFFFF",messageBubbleOther:"#E2E8F0",messageBubbleOtherText:"#0F172A",inputBackground:"#F1F5F9",inputBorder:"rgba(15, 23, 42, 0.12)",skeletonPrimary:"rgba(15, 23, 42, 0.08)",skeletonSecondary:"rgba(15, 23, 42, 0.05)",skeletonLight:"rgba(15, 23, 42, 0.03)"}};function fe(e){return ye[e]}const ge=t.memo(function({message:r,isOwn:s,onReply:n,onScrollToMessage:o,senderName:a,onImageLoad:i,onDelete:l,backgroundTheme:c="dark"}){const d=fe(c),[u,x]=t.useState(!1),[m,p]=t.useState(!1),[h,f]=t.useState(!1),[g,v]=t.useState(!1),[k,b]=t.useState(!1);t.useEffect(()=>{if("image"===r.type&&r.image_url){const e=new Image;e.onload=()=>{b(!0),null==i||i(r.id,!0)},e.onerror=()=>{v(!0),null==i||i(r.id,!0)},e.src=r.image_url}else null==i||i(r.id,!0)},[r.id,r.type,r.image_url,i]);const j=r.reply_to_id&&(r.reply_to_sender_name||r.reply_to_content);return r.deleted_at?e.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} px-2 lg:px-4 py-0.5`,children:e.jsx("div",{className:"px-3 py-2 rounded-lg italic text-sm",style:{backgroundColor:d.messageBubbleOther+"50",color:d.textMuted},children:"This message was deleted"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{id:`message-${r.id}`,className:`group flex ${s?"justify-end":"justify-start"} px-2 lg:px-4 py-0.5`,onMouseEnter:()=>x(!0),onMouseLeave:()=>{x(!1),p(!1)},children:e.jsxs("div",{className:"flex items-center gap-1.5 lg:gap-2 max-w-[85%] lg:max-w-[70%] min-w-0 "+(s?"flex-row-reverse":"flex-row"),children:[e.jsxs("div",{className:"flex flex-col gap-1 min-w-0",children:[j&&e.jsxs("button",{onClick:()=>{r.reply_to_id&&o&&o(r.reply_to_id)},className:"text-left px-2 py-1.5 rounded-lg border-l-2 transition-colors "+(s?"ml-auto":"mr-auto"),style:{backgroundColor:d.messageBubbleOther,borderColor:d.border,color:d.messageBubbleOtherText},children:[e.jsx("p",{className:"text-[10px] font-medium",style:{color:d.textSecondary},children:r.reply_to_sender_name}),e.jsx("p",{className:"text-[10px] line-clamp-1",style:{color:d.textMuted},children:r.reply_to_content||"Image"})]}),e.jsxs("div",{className:"relative rounded-2xl overflow-hidden transition-all duration-200 min-w-[2.5rem] "+("image"!==r.type||r.content?"":"p-0"),style:s?{backgroundColor:d.messageBubbleOwn,color:d.messageBubbleOwnText}:{backgroundColor:d.messageBubbleOther,color:d.messageBubbleOtherText},children:["image"===r.type&&r.image_url&&e.jsx("div",{className:"relative "+(r.content?"px-4 pt-3":"p-0"),children:g?e.jsx("div",{className:"rounded-lg flex items-center justify-center "+(r.content?"mb-2":""),style:{width:"100%",maxWidth:"280px",height:"200px",backgroundColor:d.backgroundSecondary},children:e.jsx("p",{className:"text-xs",style:{color:d.textSecondary},children:"Failed to load image"})}):e.jsxs(e.Fragment,{children:[!k&&e.jsx("div",{className:"chat-image-placeholder rounded-lg "+(r.content?"mb-2":""),style:{width:"280px",height:"200px",backgroundColor:"rgba(75, 85, 99, 0.15)"}}),e.jsx("img",{src:r.image_url,alt:"Shared image",className:`rounded-lg w-full max-w-[280px] lg:max-w-[280px] max-h-[300px] object-cover cursor-pointer hover:opacity-90 transition-opacity ${r.content?"mb-2":""} ${k?"chat-image-loaded":""}`,style:{display:k?"block":"none",border:"none",outline:"none"},onClick:()=>f(!0),onError:()=>v(!0),onLoad:()=>b(!0)})]})}),r.content&&e.jsx("div",{className:""+("image"===r.type&&r.image_url?"px-4 pb-3":"px-4 py-3"),children:e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap break-words",children:r.content.split("ðŸ‘‹").map((t,r,s)=>r<s.length-1?e.jsxs("span",{children:[t,e.jsx(he,{})]},r):e.jsx("span",{children:t},r))})})]}),e.jsx("span",{className:"text-[10px] px-1 "+(s?"text-right":"text-left"),style:{color:d.textMuted},children:(w=r.created_at,new Date(w).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}))})]}),e.jsxs("div",{className:"flex items-center gap-1 transition-opacity duration-200 "+(u?"opacity-100":"opacity-0"),children:[r.content&&e.jsx("button",{onClick:async()=>{if(r.content)try{await navigator.clipboard.writeText(r.content)}catch(e){}},className:"p-1.5 rounded-full hover:brightness-110 transition-colors",style:{color:d.textSecondary},children:e.jsx(D,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>{n&&n({id:r.id,senderName:a||"Unknown",content:r.content||("image"===r.type?"Image":"")})},className:"p-1.5 rounded-full hover:brightness-110 transition-colors",style:{color:d.textSecondary},children:e.jsx(P,{className:"w-3.5 h-3.5"})}),s&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>p(!m),className:"p-1.5 rounded-full hover:brightness-110 transition-colors",style:{color:d.textSecondary},children:e.jsx(y,{className:"w-3.5 h-3.5"})}),m&&e.jsxs("div",{className:"absolute bottom-full right-0 mb-1 rounded-lg shadow-lg py-1 min-w-[140px] z-50",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:[e.jsx("button",{onClick:()=>{(async()=>{l&&l(r.id,!1)})(),p(!1)},className:"w-full px-3 py-2 text-left text-sm hover:brightness-110 transition-colors",style:{color:"var(--text-primary)"},children:"Delete for me"}),e.jsx("button",{onClick:()=>{(async()=>{l&&l(r.id,!0)})(),p(!1)},className:"w-full px-3 py-2 text-left text-sm hover:brightness-110 transition-colors",style:{color:"#F87171"},children:"Delete for everyone"})]})]})]})]})}),"image"===r.type&&r.image_url&&e.jsx(xe,{isOpen:h,onClose:()=>f(!1),imageUrl:r.image_url})]});var w});function ve(){return e.jsx("div",{className:"flex items-center gap-1 px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-1 rounded-2xl px-4 py-3",style:{backgroundColor:"var(--bg-card)"},children:[e.jsx("span",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"var(--text-primary)",animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"var(--text-primary)",animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"var(--text-primary)",animationDelay:"300ms"}})]})})}function ke({title:t,isOpen:r,onToggle:s,children:n}){return e.jsxs("div",{style:{borderBottom:"1px solid var(--border-subtle)"},children:[e.jsxs("button",{onClick:s,className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/5 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:t}),e.jsx("svg",{className:"w-4 h-4 transition-transform duration-200 "+(r?"rotate-180":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--text-primary)",opacity:.5},children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),e.jsx("div",{className:"overflow-hidden transition-all duration-300 ease-in-out",style:{maxHeight:r?"600px":"0"},children:e.jsx("div",{className:"px-4 pb-4",children:n})})]})}function be({isOpen:r,onClose:s,user:n,messages:o=[],currentUserId:a,currentUserProfile:i,contractUrl:l}){const[c,d]=t.useState({activity:!1,search:!1,meetings:!1,people:!1,files:!1,notes:!1}),[u,x]=t.useState(""),[m,p]=t.useState([]),[h,y]=t.useState(!1),[f,g]=t.useState(""),v=t.useRef(null);t.useEffect(()=>{const e=e=>{"Escape"===e.key&&s()};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[r,s]),t.useEffect(()=>{r||(x(""),p([]),y(!1))},[r]),t.useEffect(()=>{const e=localStorage.getItem(`chat_notes_${n.id}`);e&&g(e)},[n.id]);const k=e=>{d(t=>({...t,[e]:!t[e]}))},b=()=>{const e=u.trim().toLowerCase();if(!e)return;const t=o.filter(t=>!t.deleted_at&&t.content&&t.content.toLowerCase().includes(e));p(t),y(!0)},j=t.useMemo(()=>{const e=[];for(const t of o)if(!t.deleted_at)if("image"===t.type&&t.image_url)e.push({id:t.id,type:"image",url:t.image_url,date:t.created_at});else if("text"===t.type&&t.content){const r=t.content.match(/https?:\/\/[^\s]+/g);r&&r.forEach(r=>{e.push({id:`${t.id}-${r}`,type:"link",url:r,content:r.replace(/^https?:\/\//i,""),date:t.created_at})})}return e.slice().reverse()},[o]),w=e=>{try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return""}},C=t.useMemo(()=>{const e=[];return i&&e.push({id:a||"self",name:i.name,avatar_url:i.avatar_url||null,role:i.user_type?i.user_type.charAt(0).toUpperCase()+i.user_type.slice(1):"You",isSelf:!0}),e.push({id:n.id,name:n.name,avatar_url:n.is_admin?X:n.avatar_url||null,role:n.user_type?n.user_type.charAt(0).toUpperCase()+n.user_type.slice(1):n.is_admin?"Support":"User",isSelf:!1}),e},[n,a,i]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 "+(r?"opacity-100":"opacity-0 pointer-events-none"),onClick:s}),e.jsx("div",{className:"fixed top-0 right-0 z-50 h-full w-full sm:w-[360px] transform transition-transform duration-300 ease-in-out "+(r?"translate-x-0":"translate-x-full"),style:{backgroundColor:"var(--bg-primary)"},children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",style:{borderBottom:"1px solid var(--border-subtle)"},children:[e.jsx("h2",{className:"text-base font-semibold",style:{color:"var(--text-primary)"},children:"Details"}),e.jsx("button",{onClick:s,className:"p-1.5 rounded-lg hover:bg-white/5 transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--text-primary)",opacity:.6},children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",style:{scrollbarWidth:"thin",scrollbarColor:"rgba(75, 85, 99, 0.3) transparent"},children:[e.jsxs("div",{className:"px-4 py-6 text-center",style:{borderBottom:"1px solid var(--border-subtle)"},children:[e.jsx("img",{src:n.is_admin?X:n.avatar_url||Y,alt:n.name,className:"w-20 h-20 rounded-full object-cover mx-auto mb-3",style:{backgroundColor:"var(--bg-elevated)"}}),e.jsx("h3",{className:"text-lg font-semibold mb-1",style:{color:"var(--text-primary)"},children:n.name}),n.username&&e.jsxs("p",{className:"text-sm mb-1",style:{color:"var(--text-primary)",opacity:.5},children:["@",n.username]}),n.user_type&&!n.is_admin&&e.jsx("p",{className:"text-xs mb-3 capitalize",style:{color:"var(--text-primary)",opacity:.4},children:n.user_type}),l&&e.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-medium transition-colors hover:brightness-110",style:{backgroundColor:"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:[e.jsxs("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"View Contract"]})]}),e.jsx(ke,{title:"Activity Timeline",isOpen:c.activity,onToggle:()=>k("activity"),children:e.jsxs("div",{className:"flex flex-col items-center py-6 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mb-3",style:{backgroundColor:"var(--bg-elevated)"},children:e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--text-primary)",opacity:.4},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),e.jsx("p",{className:"text-sm font-medium mb-0.5",style:{color:"var(--text-primary)"},children:"No Activity"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-primary)",opacity:.4},children:"Activity will appear here when actions are taken."})]})}),e.jsx(ke,{title:"Search Messages",isOpen:c.search,onToggle:()=>k("search"),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",style:{color:"var(--text-primary)",opacity:.4},children:[e.jsx("circle",{cx:"11",cy:"11",r:"7"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),e.jsx("input",{type:"text",value:u,onChange:e=>{x(e.target.value),e.target.value.trim()||(p([]),y(!1))},onKeyDown:e=>"Enter"===e.key&&b(),placeholder:"Search in conversation...",className:"w-full pl-9 pr-3 py-2.5 rounded-lg text-sm focus:outline-none",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-subtle)",color:"var(--text-primary)"},onFocus:e=>e.currentTarget.style.borderColor="var(--text-primary)",onBlur:e=>e.currentTarget.style.borderColor="var(--border-subtle)"})]}),e.jsx("button",{onClick:b,className:"px-3 py-2 rounded-lg text-xs font-semibold transition-all hover:brightness-110",style:{backgroundColor:"var(--text-primary)",color:"var(--bg-primary)"},children:"Search"})]}),h&&0===m.length&&e.jsxs("p",{className:"text-sm text-center py-3",style:{color:"var(--text-primary)",opacity:.45},children:['No messages found for "',u,'"']}),m.length>0&&e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",style:{scrollbarWidth:"thin"},children:m.map(t=>e.jsxs("div",{className:"p-2.5 rounded-lg",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("p",{className:"text-xs font-semibold mb-1",style:{color:"var(--text-primary)",opacity:.5},children:[t.sender_id===a?"You":n.name," Â· ",w(t.created_at)]}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:t.content})]},t.id))})]})}),e.jsx(ke,{title:"Meeting Recaps",isOpen:c.meetings,onToggle:()=>k("meetings"),children:e.jsxs("div",{className:"flex flex-col items-center py-6 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mb-3",style:{backgroundColor:"var(--bg-elevated)"},children:e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--text-primary)",opacity:.4},children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),e.jsx("p",{className:"text-sm font-medium mb-0.5",style:{color:"var(--text-primary)"},children:"No Activity"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-primary)",opacity:.4},children:"Meeting recaps will appear here once meetings are scheduled."})]})}),e.jsx(ke,{title:"People",isOpen:c.people,onToggle:()=>k("people"),children:e.jsx("div",{className:"space-y-2",children:C.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-white/5 transition-colors",children:[e.jsx("img",{src:t.avatar_url||Y,alt:t.name,className:"w-9 h-9 rounded-full object-cover",style:{backgroundColor:"var(--bg-elevated)"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:t.name}),t.role&&e.jsx("p",{className:"text-xs",style:{color:"var(--text-primary)",opacity:.45},children:t.role})]})]},t.id))})}),e.jsx(ke,{title:"Files & Links",isOpen:c.files,onToggle:()=>k("files"),children:0===j.length?e.jsxs("div",{className:"flex flex-col items-center py-6 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mb-3",style:{backgroundColor:"var(--bg-elevated)"},children:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--text-primary)",opacity:.4},children:e.jsx("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})})}),e.jsx("p",{className:"text-sm font-medium mb-0.5",style:{color:"var(--text-primary)"},children:"No Activity"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-primary)",opacity:.4},children:"Images and links shared in this conversation will appear here."})]}):e.jsx("div",{className:"space-y-2",children:j.map(t=>e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-2 rounded-lg hover:bg-white/5 transition-colors",children:["image"===t.type?e.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden flex-shrink-0",style:{backgroundColor:"var(--bg-elevated)"},children:e.jsx("img",{src:t.url,alt:"shared",className:"w-full h-full object-cover"})}):e.jsx("div",{className:"w-10 h-10 rounded-lg flex-shrink-0 flex items-center justify-center",style:{backgroundColor:"var(--bg-elevated)"},children:e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--text-primary)",opacity:.5},children:[e.jsx("path",{d:"M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"}),e.jsx("path",{d:"M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs truncate font-medium",style:{color:"var(--text-primary)"},children:t.content||t.url.replace(/^https?:\/\//i,"")}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-primary)",opacity:.4},children:w(t.date)})]}),e.jsxs("svg",{className:"w-3.5 h-3.5 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--text-primary)",opacity:.4},children:[e.jsx("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"}),e.jsx("polyline",{points:"15 3 21 3 21 9"}),e.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]},t.id))})}),e.jsxs(ke,{title:"Personal Notepad",isOpen:c.notes,onToggle:()=>k("notes"),children:[e.jsx("textarea",{value:f,onChange:e=>{return t=e.target.value,g(t),v.current&&clearTimeout(v.current),void(v.current=setTimeout(()=>{localStorage.setItem(`chat_notes_${n.id}`,t)},500));var t},placeholder:"Add private notes about this conversation...",className:"w-full h-32 p-3 rounded-lg text-sm resize-none focus:outline-none",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-subtle)",color:"var(--text-primary)"},onFocus:e=>e.currentTarget.style.borderColor="var(--text-primary)",onBlur:e=>e.currentTarget.style.borderColor="var(--border-subtle)"}),e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--text-primary)",opacity:.4},children:"Notes are saved automatically and only visible to you."})]})]})]})})]})}const je="messages_cache_";function we(e){try{const t=localStorage.getItem(je+e);if(t){const r=JSON.parse(t);if("1"!==r.version)return null;return Date.now()-r.timestamp>3e5?(localStorage.removeItem(je+e),null):r.messages||null}}catch{}return null}function Ce(e,t){try{const r={messages:t,timestamp:Date.now(),version:"1"};localStorage.setItem(je+e,JSON.stringify(r))}catch{}}const Ne="conversations_cache";function _e(e){try{const t=sessionStorage.getItem(Ne);if(t){const r=JSON.parse(t);if("1"!==r.version||r.customerId!==e)return null;return Date.now()-r.timestamp>6e5?(sessionStorage.removeItem(Ne),null):r.conversations||null}}catch{}return null}const Le="admin_conversations_cache";function Se(e){try{const t=sessionStorage.getItem(Le);if(t){const r=JSON.parse(t);if("3"!==r.version||r.adminId!==e)return null;return Date.now()-r.timestamp>6e5?(sessionStorage.removeItem(Le),null):r.conversations||null}}catch{}return null}class We extends Error{constructor(e,t,r=!0,s){super(e),this.code=t,this.recoverable=r,this.originalError=s,this.name="MessagingError"}}const Me="NETWORK_ERROR";function Te(e){const[r,s]=t.useState(null),[n,o]=t.useState(()=>({conversations:"undefined"!=typeof window&&e&&_e(e)||[],selectedConversationId:null,isSelectionLocked:!1,connectionStatus:"connecting",error:null})),[a,i]=t.useState(()=>{if("undefined"!=typeof window&&e){const t=_e(e);return!t||0===t.length}return!0}),d=n.conversations,u=t.useCallback((t,r=!1)=>{o(e=>({...e,selectedConversationId:t,isSelectionLocked:r})),r&&setTimeout(()=>{o(e=>({...e,isSelectionLocked:!1}))},1e3),e&&localStorage.setItem(`lastConversation_${e}`,t)},[e]),x=t.useCallback((t,r)=>{e&&o(s=>({...s,conversations:s.conversations.map(s=>s.id!==t?s:s.customer_id===e?{...s,unread_count_customer:r}:{...s,unread_count_admin:r})}))},[e]),m=t.useCallback(async()=>{if(!e)return o(e=>({...e,conversations:[]})),void i(!1);try{const{data:t,error:r}=await l.from("conversations").select("\n          *,\n          admin:profiles!conversations_admin_id_fkey(*)\n        ").or(`customer_id.eq.${e},admin_id.eq.${e}`).order("last_message_at",{ascending:!1});if(r)return o(e=>({...e,error:new We("Failed to load conversations",Me,!0,r)})),void i(!1);if(t){let r=t;const s=r.map(t=>t.customer_id===e?t.admin_id:t.customer_id).filter(Boolean);if(s.length>0){const{data:t,error:n}=await l.from("unified_users").select("id, first_name, last_name, username, avatar_url, display_name, is_admin, is_online, last_seen").in("id",s),{data:o}=await l.from("profiles").select("id, name, username, avatar_url, is_admin, is_online, last_seen").in("id",s),a=new Map((t||[]).map(e=>[e.id,e])),i=new Map((o||[]).map(e=>[e.id,e]));r=r.map(t=>{const r=t.customer_id===e?t.admin_id:t.customer_id,s=a.get(r||""),n=i.get(r||"");return s?{...t,admin:{id:s.id,name:s.display_name||[s.first_name,s.last_name].filter(Boolean).join(" ")||"User",username:s.username||"",avatar_url:s.avatar_url||"",is_admin:s.is_admin||!1,is_online:s.is_online||!1,last_seen:s.last_seen}}:n?{...t,admin:{id:n.id,name:n.name||"User",username:n.username||"",avatar_url:n.avatar_url||"",is_admin:n.is_admin||!1,is_online:n.is_online||!1,last_seen:n.last_seen}}:t.admin?t:{...t,admin:{id:r||"",name:"User",username:"",avatar_url:"",is_admin:!1,is_online:!1}}})}r.sort((e,t)=>e.is_pinned&&!t.is_pinned?-1:!e.is_pinned&&t.is_pinned?1:new Date(t.last_message_at).getTime()-new Date(e.last_message_at).getTime()),o(e=>({...e,conversations:r,error:null})),function(e,t){try{const r={conversations:t,timestamp:Date.now(),version:"1",customerId:e};sessionStorage.setItem(Ne,JSON.stringify(r))}catch{}}(e,r),r.forEach(e=>{var t;(null==(t=e.admin)?void 0:t.avatar_url)&&c(e.admin.avatar_url)})}}catch(t){o(e=>({...e,error:new We("Failed to load conversations",Me,!0,t)}))}i(!1)},[e]);t.useEffect(()=>{if(!e)return o(e=>({...e,conversations:[]})),void i(!1);sessionStorage.getItem("session_start")||sessionStorage.setItem("session_start",(new Date).toISOString());const t=_e(e);t&&t.length>0&&(o(e=>({...e,conversations:t})),i(!1)),m();let r=0;const s=l.channel(`customer-conversations:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"conversations",filter:`customer_id=eq.${e}`},e=>{const t=e.new;if("UPDATE"===e.eventType&&(null==t?void 0:t.id)){const e=t;return void o(t=>{const r=t.conversations.findIndex(t=>t.id===e.id);if(r>=0){const s=[...t.conversations],n=t.conversations[r].admin;return s[r]={...e,admin:n},s.sort((e,t)=>e.is_pinned&&!t.is_pinned?-1:!e.is_pinned&&t.is_pinned?1:new Date(t.last_message_at).getTime()-new Date(e.last_message_at).getTime()),{...t,conversations:s}}return t})}m()}).on("postgres_changes",{event:"*",schema:"public",table:"conversations",filter:`admin_id=eq.${e}`},()=>{m()}).subscribe(e=>{if("SUBSCRIBED"===e)o(e=>({...e,connectionStatus:"connected"})),r=0;else if(("CHANNEL_ERROR"===e||"TIMED_OUT"===e)&&(o(e=>({...e,connectionStatus:"disconnected"})),r<5)){const e=Math.min(1e3*Math.pow(2,r),3e4);r++,setTimeout(()=>{s.subscribe()},e)}});return()=>{s.unsubscribe()}},[e,m]);const p=t.useCallback(async t=>{const r=n.conversations.find(r=>r.customer_id===e&&r.admin_id===t.id||r.customer_id===t.id&&r.admin_id===e);if(r)return u(r.id,!0),s(null),{type:"existing",conversation:r};const{data:a}=await l.from("conversations").select("*, admin:profiles!conversations_admin_id_fkey(*)").or(`and(customer_id.eq.${e},admin_id.eq.${t.id}),and(customer_id.eq.${t.id},admin_id.eq.${e})`).maybeSingle();if(a){const e=a;return o(t=>({...t,conversations:[e,...t.conversations.filter(t=>t.id!==e.id)],selectedConversationId:e.id,isSelectionLocked:!0})),s(null),setTimeout(()=>o(e=>({...e,isSelectionLocked:!1})),1e3),{type:"existing",conversation:e}}return s({recipientId:t.id,recipientUser:t}),o(e=>({...e,selectedConversationId:null})),{type:"pending",recipientId:t.id}},[n.conversations,e,u]),h=t.useCallback(async(t,n,a="text",i,c)=>{var d;if(!t&&r)try{let t=null;{const s={customer_id:e,admin_id:r.recipientId,last_message:n.length>80?n.substring(0,80)+"...":n,last_message_at:(new Date).toISOString(),last_message_sender_id:e,unread_count_admin:1,unread_count_customer:0,is_ephemeral:!1,has_messages:!0,is_request:!0},{data:o,error:a}=await l.from("conversations").insert(s).select().single();if(a){if("PGRST204"!==a.code&&!(null==(d=a.message)?void 0:d.includes("is_request")))throw a;{const{is_request:e,...r}=s,{data:n,error:o}=await l.from("conversations").insert(r).select().single();if(o)throw o;t=n}}else t=o}if(!t)throw new Error("Failed to create conversation");const{data:u,error:x}=await l.from("messages").insert({conversation_id:t.id,sender_id:e,content:n,type:a,image_url:i||null,status:"sent",reply_to_id:(null==c?void 0:c.id)||null,reply_to_sender_name:(null==c?void 0:c.senderName)||"",reply_to_content:(null==c?void 0:c.content)||""}).select().single();if(x)throw x;const m={...t,admin:{id:r.recipientUser.id,name:r.recipientUser.display_name,username:r.recipientUser.username,avatar_url:r.recipientUser.avatar_url||"",is_admin:!1,is_online:!1}};return s(null),o(e=>({...e,conversations:[m,...e.conversations],selectedConversationId:t.id,isSelectionLocked:!0})),setTimeout(()=>o(e=>({...e,isSelectionLocked:!1})),1e3),{data:u,error:null,newConversationId:t.id,newConversation:m}}catch(u){return{data:null,error:u,newConversationId:null,newConversation:null}}return{data:null,error:new Error("Use useChat hook for existing conversations"),newConversationId:null,newConversation:null}},[r,e]),y=t.useCallback(()=>{s(null)},[]),f=t.useCallback(async e=>{const{error:t}=await l.from("conversations").update({is_request:!1}).eq("id",e);return t||o(t=>({...t,conversations:t.conversations.map(t=>t.id===e?{...t,is_request:!1}:t)})),{error:t}},[]),g=t.useCallback(async e=>{await l.from("messages").delete().eq("conversation_id",e);const{error:t}=await l.from("conversations").delete().eq("id",e);return t||o(t=>({...t,conversations:t.conversations.filter(t=>t.id!==e),selectedConversationId:t.selectedConversationId===e?null:t.selectedConversationId})),{error:t}},[]);return{conversations:d,loading:a,updateConversationUnreadCount:x,refetch:m,selectConversation:u,selectedConversationId:n.selectedConversationId,isSelectionLocked:n.isSelectionLocked,connectionStatus:n.connectionStatus,error:n.error,pendingConversation:r,setPendingConversation:s,startConversationWith:p,sendMessageToConversation:h,clearPendingConversation:y,acceptRequest:f,denyRequest:g}}function Be(e){const[r,s]=t.useState(null),[n,o]=t.useState(!0);return t.useEffect(()=>{(async()=>{const{data:t,error:r}=await l.from("profiles").select("*").eq("id",e).maybeSingle();!r&&t&&s(t),o(!1)})();const t=l.channel(`profile:${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${e}`},e=>{s(e.new)}).subscribe();return()=>{t.unsubscribe()}},[e]),{profile:r,loading:n}}function Fe(e){t.useEffect(()=>{const t=async t=>{await l.from("profiles").update({is_online:t,last_seen:(new Date).toISOString()}).eq("id",e)};t(!0);const r=()=>{t(!document.hidden)},s=()=>{t(!1)};return document.addEventListener("visibilitychange",r),window.addEventListener("beforeunload",s),()=>{document.removeEventListener("visibilitychange",r),window.removeEventListener("beforeunload",s),t(!1)}},[e])}async function Ie(){try{const{data:e,error:t}=await l.from("profiles").select("id, name, is_admin").eq("is_admin",!0).limit(1).maybeSingle();return t?null:e?e.id:null}catch(e){return null}}async function Oe(e){var t,r,s,n,o,a;try{const{data:i,error:c}=await l.from("profiles").select("id").eq("id",e).maybeSingle();if(c)return null;if(!i){const{data:r,error:s}=await l.from("users").select("email, first_name, last_name, full_name").eq("id",e).maybeSingle();if(s)return null;const n=(null==r?void 0:r.full_name)||((null==r?void 0:r.first_name)&&(null==r?void 0:r.last_name)?`${r.first_name} ${r.last_name}`.trim():null)||(null==(t=null==r?void 0:r.email)?void 0:t.split("@")[0])||"User",{error:o}=await l.from("profiles").insert({id:e,name:n,avatar_url:"",is_admin:!1,is_online:!1});if(o)return null}const d=await Ie();if(!d)return null;const{data:u,error:x}=await l.from("conversations").select("*").eq("customer_id",e).eq("admin_id",d).maybeSingle();if(x&&"PGRST116"!==x.code)return null;if(u){const{data:e,error:t}=await l.from("profiles").select("*").eq("id",d).single();return t?null:e?{...u,admin:e}:null}const{data:m,error:p}=await l.from("conversations").insert({customer_id:e,admin_id:d,last_message:"",unread_count_admin:0,unread_count_customer:0}).select("*").single();if(p){if("23505"===p.code||"409"===p.code||"PGRST204"===p.code||(null==(r=p.message)?void 0:r.toLowerCase().includes("duplicate"))||(null==(s=p.message)?void 0:s.toLowerCase().includes("unique"))||(null==(n=p.message)?void 0:n.toLowerCase().includes("conflict"))||(null==(o=p.message)?void 0:o.toLowerCase().includes("already exists"))){const{data:t,error:r}=await l.from("conversations").select("*").eq("customer_id",e).eq("admin_id",d).maybeSingle();if(r)return null;if(t){const{data:e,error:r}=await l.from("profiles").select("*").eq("id",d).single();if(r)return null;if(e)return{...t,admin:e}}}return null}const{data:h}=await l.from("users").select("first_name").eq("id",e).maybeSingle(),y=(null==(a=null==h?void 0:h.first_name)?void 0:a.trim())||"",f=`Hi${y?` ${y},`:""} welcome to Elevate! ðŸ‘‹\n\nIf you have any questions, feel free to ask.\n\nHave suggestions or feedback? You can submit them here. We review everything and are always working to give you the best experience on Elevate.`,{error:g}=await l.from("messages").insert({conversation_id:m.id,sender_id:d,type:"text",content:f,status:"sent"});if(g);else{const e=f.split("\n")[0];await l.from("conversations").update({last_message:e,last_message_at:(new Date).toISOString(),last_message_sender_id:d,unread_count_customer:1}).eq("id",m.id)}const{data:v,error:k}=await l.from("profiles").select("*").eq("id",d).single();return k?null:v&&m?{...m,admin:v}:null}catch(i){return null}}function Ee(e){const[r,s]=t.useState(()=>{if("undefined"!=typeof window&&e){return Se(e)||[]}return[]}),[n,o]=t.useState(()=>{if("undefined"!=typeof window&&e){const t=Se(e);return!t||0===t.length}return!0}),a=t.useRef(!1);return t.useEffect(()=>{if(!e)return s([]),void o(!1);const t=Se(e);t&&t.length>0&&(s(t),o(!1));const r=async()=>{a.current||t||o(!0);const{data:r}=await l.from("profiles").select("id").eq("is_admin",!0),n=(r||[]).map(e=>e.id);0===n.length&&n.push(e);const{data:i,error:d}=await l.from("conversations").select("*").in("admin_id",n);if(d)return s([]),o(!1),void(a.current=!0);if(!i||0===i.length)return s([]),o(!1),void(a.current=!0);const u=[...new Set(i.map(e=>e.customer_id))],x=i.map(e=>e.id),{data:m,error:p}=await l.from("profiles").select("*").in("id",u);if(p)return s([]),o(!1),void(a.current=!0);const{data:h,error:y}=await l.from("messages").select("conversation_id, created_at, sender_id").in("conversation_id",x).order("created_at",{ascending:!1}),f=new Map;if(h)for(const e of h){const t=i.find(t=>t.id===e.conversation_id);t&&e.sender_id===t.customer_id&&(f.has(e.conversation_id)||f.set(e.conversation_id,e.created_at))}const g=new Map((m||[]).map(e=>[e.id,e])),v=i.map(e=>({...e,customer:g.get(e.customer_id)||null,last_customer_message_at:f.get(e.id)||e.last_message_at})).filter(e=>null!==e.customer);v.forEach(e=>{var t;(null==(t=e.customer)?void 0:t.avatar_url)&&c(e.customer.avatar_url)}),v.sort((e,t)=>{const r=f.has(e.id),s=f.has(t.id);if(r&&!s)return-1;if(!r&&s)return 1;const n=e.last_customer_message_at?new Date(e.last_customer_message_at).getTime():e.last_message_at?new Date(e.last_message_at).getTime():0;return(t.last_customer_message_at?new Date(t.last_customer_message_at).getTime():t.last_message_at?new Date(t.last_message_at).getTime():0)-n}),s(v),function(e,t){try{const r={conversations:t,timestamp:Date.now(),version:"3",adminId:e};sessionStorage.setItem(Le,JSON.stringify(r))}catch{}}(e,v),o(!1),a.current=!0};r();const n=l.channel(`admin-conversations:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"conversations"},()=>{r()}).subscribe();return()=>{n.unsubscribe()}},[e]),{conversations:r,loading:n}}const He=t.memo(function({conversation:t,otherUser:r,currentUserId:s,currentUserProfile:n,getSenderName:o,onMarkAsRead:a,backgroundTheme:i="dark",onBack:l,showBackButton:c=!1,isPending:d=!1,pendingRecipient:u,isRequest:x=!1,onAcceptRequest:m,onDenyRequest:p,onSendPendingMessage:h,onCancelPending:y,enableSpellCheck:f=!1}){const{t:g}=A();return d&&u?e.jsxs("div",{className:"flex flex-col h-full",style:{backgroundColor:"var(--bg-primary)"},children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b",style:{borderColor:"var(--border-default)",backgroundColor:"var(--bg-sidebar)"},children:[y&&e.jsx("button",{onClick:y,className:"p-1 rounded-lg hover:bg-white/5 transition-colors lg:hidden",style:{color:"var(--text-secondary)"},children:"â†"}),e.jsx("img",{src:u.avatar_url||"/default-avatar.png",alt:u.display_name,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",style:{color:"var(--text-primary)"},children:u.display_name}),e.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:["@",u.username]})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full overflow-hidden",style:{border:"3px solid var(--border-default)"},children:e.jsx("img",{src:u.avatar_url||"/default-avatar.png",alt:u.display_name,className:"w-full h-full object-cover"})}),e.jsx("h3",{className:"text-lg font-semibold mb-1",style:{color:"var(--text-primary)"},children:u.display_name}),e.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-muted)"},children:["@",u.username]}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:g("messages.sendMessageToStart")})]})}),e.jsx("div",{style:{borderTop:"1px solid var(--border-default)",backgroundColor:"var(--bg-sidebar)",padding:"12px 16px"},children:e.jsx(ue,{onSendMessage:async e=>{h&&e.trim()&&await h(e)},onTyping:()=>{},disabled:!1,otherUserName:u.username,enableSpellCheck:f})})]}):t&&r?e.jsx(Ae,{conversation:t,otherUser:r,currentUserId:s,currentUserProfile:n,getSenderName:o,onMarkAsRead:a,backgroundTheme:i,onBack:l,showBackButton:c,isRequest:x,onAcceptRequest:m,onDenyRequest:p,enableSpellCheck:f}):null}),Ae=t.memo(function({conversation:r,otherUser:s,currentUserId:n,currentUserProfile:o,getSenderName:a,onMarkAsRead:i,backgroundTheme:c="dark",onBack:d,showBackButton:u=!1,isRequest:x=!1,onAcceptRequest:m,onDenyRequest:p,enableSpellCheck:h=!1}){const{t:y}=A(),f=fe(c),{messages:g,loading:v,otherUserTyping:k,sendMessage:b,setTyping:j,markMessagesAsSeen:w}=function({conversationId:e,currentUserId:r}){const[s,n]=t.useState(()=>"undefined"!=typeof window&&we(e)||[]),[o,a]=t.useState(()=>{if("undefined"!=typeof window){const t=we(e);return!t||0===t.length}return!0}),[i,c]=t.useState(!1),d=t.useRef(null),u=t.useCallback(async()=>{if(e)try{const{data:t,error:r}=await l.from("messages").select("*").eq("conversation_id",e).order("created_at",{ascending:!0});if(r)return void a(!1);if(t){const r=t;n(r),Ce(e,r)}}catch(t){}finally{a(!1)}else a(!1)},[e]);return t.useEffect(()=>{if(!e)return;const t=we(e);t&&t.length>0?(n(t),a(!1)):(n([]),a(!0)),u();const s=l.channel(`messages:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${e}`},t=>{const r=t.new;n(t=>{if(t.some(e=>e.id===r.id))return t;const s=[...t,r];return Ce(e,s),s})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`conversation_id=eq.${e}`},t=>{const r=t.new;n(t=>{const s=t.map(e=>e.id===r.id?r:e);return Ce(e,s),s})}).subscribe(),o=l.channel(`typing:${e}`).on("broadcast",{event:"typing"},({payload:e})=>{e.userId!==r&&c(e.isTyping)}).subscribe();return d.current=o,()=>{s.unsubscribe(),o.unsubscribe()}},[e,r,u]),{messages:s,loading:o,otherUserTyping:i,sendMessage:t.useCallback(async(t,s,n)=>{const o=s?"image":"text",{data:a,error:i}=await l.from("messages").insert({conversation_id:e,sender_id:r,type:o,content:t||"",image_url:s||"",status:"sent",reply_to_id:(null==n?void 0:n.id)||null,reply_to_sender_name:(null==n?void 0:n.senderName)||"",reply_to_content:(null==n?void 0:n.content)||""}).select().single();if(i)return{data:null,error:i};if(a){const{data:s}=await l.from("conversations").select("customer_id, admin_id, unread_count_admin, unread_count_customer, is_ephemeral").eq("id",e).single();if(s){const n=s.customer_id===r;let o=t||"Sent an image";"Sent an image"!==o&&(o=o.replace(/\n/g," ").trim(),o.startsWith("Me: ")&&(o=o.substring(4).trim()),o.length>80&&(o=o.substring(0,80)+"..."));const a={last_message:o,last_message_at:(new Date).toISOString(),last_message_sender_id:r,is_ephemeral:!1,has_messages:!0};n?(a.unread_count_customer=0,a.unread_count_admin=(s.unread_count_admin||0)+1):(a.unread_count_admin=0,a.unread_count_customer=(s.unread_count_customer||0)+1);const{error:i}=await l.from("conversations").update(a).eq("id",e)}}return{data:a,error:null}},[e,r]),setTyping:t.useCallback(e=>{var t;null==(t=d.current)||t.send({type:"broadcast",event:"typing",payload:{userId:r,isTyping:e}})},[r]),markMessagesAsSeen:t.useCallback(async()=>{const{data:t}=await l.from("conversations").select("customer_id, admin_id").eq("id",e).single();if(t){const s=t.customer_id===r;await l.from("messages").update({status:"seen"}).eq("conversation_id",e).neq("sender_id",r).neq("status","seen");const n={};s?n.unread_count_customer=0:n.unread_count_admin=0;const{error:o}=await l.from("conversations").update(n).eq("id",e)}},[e,r])}}({conversationId:r.id,currentUserId:n}),{uploadImage:C,uploading:N}=function(){const[e,r]=t.useState(!1);return{uploadImage:async e=>{var t;r(!0);try{const r=new FormData;r.append("image",e);const s=await fetch("https://api.imgbb.com/1/upload?key=012774bd056a91a1055131cf67c1a486",{method:"POST",body:r});if(s.ok){const e=await s.json();if(null==(t=e.data)?void 0:t.url)return e.data.url}const n=new FileReader;return new Promise((t,r)=>{n.onerror=()=>{r(new Error("Failed to read image"))},n.onloadend=()=>{t(n.result)},n.readAsDataURL(e)})}catch(s){const t=new FileReader;return new Promise((r,s)=>{t.onerror=()=>{s(new Error("Failed to read image"))},t.onloadend=()=>{r(t.result)},t.readAsDataURL(e)})}finally{r(!1)}},uploading:e}}(),_=t.useRef(null),L=t.useRef(null),[S,W]=t.useState(null),[M,T]=t.useState(!1),B=t.useRef(null),F=t.useRef(!1),I=t.useRef(!0),O=t.useRef(!0),[E,H]=t.useState(()=>{if("undefined"!=typeof window){const t=localStorage.getItem(`messages_cache_${r.id}`);if(t)try{const e=JSON.parse(t);if(e.messages&&e.messages.length>0)return!0}catch(e){}}return!1}),D=t.useRef({}),R=t.useMemo(()=>g.filter(e=>"image"===e.type&&e.image_url),[g]);t.useEffect(()=>{I.current=!0,O.current=!0,D.current={};const e=localStorage.getItem(`messages_cache_${r.id}`);if(e)try{const t=JSON.parse(e);if(t.messages&&t.messages.length>0)return void H(!0)}catch(t){}H(!1)},[r.id]),t.useEffect(()=>{!v&&g.length>0?H(!0):v||0!==g.length||H(!0)},[v,g.length]);const V=t.useCallback((e,t)=>{D.current[e]=t;R.every(e=>!0===D.current[e.id])&&!v&&H(!0)},[R,v]),$=t.useCallback(async(e,t)=>{if(t)try{const{error:t}=await l.from("messages").update({deleted_at:(new Date).toISOString(),deleted_by:n}).eq("id",e);if(t)return}catch(r){return}},[n]);t.useEffect(()=>{!v&&g.length>0&&_.current&&O.current&&E&&(_.current.scrollIntoView({behavior:I.current?"instant":"smooth"}),I.current&&(I.current=!1))},[v,g.length,r.id,E]),t.useEffect(()=>(F.current=!1,()=>{F.current=!1}),[r.id]),t.useEffect(()=>{g.length>0&&!F.current&&w().then(()=>{F.current=!0,i&&i(r.id)})},[r.id,g.length,w,i]),t.useEffect(()=>{if(g.length>0&&L.current){B.current&&clearTimeout(B.current);const e=L.current;return e.scrollHeight-e.scrollTop<=e.clientHeight+100&&(B.current=setTimeout(()=>{w().then(()=>{i&&i(r.id)})},2e3)),()=>{B.current&&clearTimeout(B.current)}}},[g.length,w,r.id,i]);const z=t.useCallback(e=>{W(e)},[]),P=t.useCallback(e=>{const t=document.getElementById(`message-${e}`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("bg-neutral-700/30"),setTimeout(()=>{t.classList.remove("bg-neutral-700/30")},1500))},[]);return e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 min-w-0 overflow-hidden",style:{backgroundColor:"var(--bg-primary)",height:"100%"},children:[e.jsx(se,{user:s,isTyping:k,onVideoCall:()=>{},onScheduleMeeting:()=>{},onOpenDrawer:()=>T(!0),isDrawerOpen:M,backgroundTheme:c,onBack:d,showBackButton:u}),e.jsxs("div",{className:"flex-1 min-h-0 relative",children:[!E&&e.jsx("div",{className:"absolute inset-0 z-10 flex flex-col",style:{backgroundColor:f.background,transition:"opacity 150ms ease-out",opacity:1,pointerEvents:"none"},children:e.jsx("div",{className:"flex-1 py-2 lg:py-4 flex flex-col justify-end animate-pulse",children:e.jsxs("div",{className:"space-y-0.5 lg:space-y-1 px-2 lg:px-4",children:[e.jsx("div",{className:"flex justify-start px-2 lg:px-4 py-0.5",children:e.jsx("div",{className:"flex items-center gap-1.5 lg:gap-2 max-w-[85%] lg:max-w-[70%]",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"rounded-2xl px-4 py-3",style:{backgroundColor:f.skeletonSecondary,minHeight:"2.5rem",width:"180px"}}),e.jsx("div",{className:"h-3 rounded px-1",style:{backgroundColor:f.skeletonLight,width:"40px"}})]})})}),e.jsx("div",{className:"flex justify-end px-2 lg:px-4 py-0.5",children:e.jsx("div",{className:"flex items-center gap-1.5 lg:gap-2 max-w-[85%] lg:max-w-[70%] flex-row-reverse",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"rounded-2xl px-4 py-3",style:{backgroundColor:f.skeletonPrimary,minHeight:"2.5rem",width:"140px"}}),e.jsx("div",{className:"h-3 rounded px-1 ml-auto",style:{backgroundColor:f.skeletonLight,width:"40px"}})]})})}),e.jsx("div",{className:"flex justify-start px-2 lg:px-4 py-0.5",children:e.jsx("div",{className:"flex items-center gap-1.5 lg:gap-2 max-w-[85%] lg:max-w-[70%]",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"rounded-2xl px-4 py-3",style:{backgroundColor:f.skeletonSecondary,minHeight:"3.5rem",width:"220px"}}),e.jsx("div",{className:"h-3 rounded px-1",style:{backgroundColor:f.skeletonLight,width:"40px"}})]})})})]})})}),e.jsx("div",{ref:L,className:"absolute inset-0 overflow-y-auto",style:{backgroundColor:"var(--bg-primary)",scrollbarWidth:"thin",scrollbarColor:"rgba(75, 85, 99, 0.3) transparent",overflowY:"auto",WebkitOverflowScrolling:"touch"},onScroll:()=>{if(L.current){const e=L.current,t=e.scrollHeight-e.scrollTop<=e.clientHeight+50;O.current=t,t&&g.length>0&&(B.current&&clearTimeout(B.current),w().then(()=>{i&&i(r.id)}))}},children:e.jsxs("div",{className:"py-2 lg:py-4 min-h-full flex flex-col justify-end",children:[0!==g.length||v?e.jsx("div",{className:"space-y-0.5 lg:space-y-1 px-2 lg:px-2 "+(E?"chat-content-ready":"chat-content-loading"),children:g.map((t,r)=>{const s=r>0?g[r-1]:null,o=new Date(t.created_at),i=s?new Date(s.created_at):null,l=!(i&&(d=o,u=i,d.getFullYear()===u.getFullYear()&&d.getMonth()===u.getMonth()&&d.getDate()===u.getDate()));var d,u;return e.jsxs("div",{children:[l&&e.jsx("div",{className:"flex items-center justify-center py-5",children:e.jsx("div",{className:"px-3 py-1.5 rounded-lg",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-default)"},children:e.jsx("span",{className:"text-xs font-medium",style:{color:"var(--text-primary)",opacity:.6},children:me(t.created_at)})})}),e.jsx(ge,{message:t,isOwn:t.sender_id===n,onReply:z,onScrollToMessage:P,senderName:a(t.sender_id),onImageLoad:V,onDelete:$,backgroundTheme:c})]},t.id)})}):e.jsx("div",{className:"flex-1 flex items-start justify-center pt-12 lg:pt-16",children:e.jsxs("div",{className:"text-center px-4 lg:px-6",children:[e.jsx("div",{className:"w-20 h-20 lg:w-24 lg:h-24 mx-auto mb-4 rounded-full overflow-hidden",style:{border:"3px solid var(--border-default)"},children:s.avatar_url?e.jsx("img",{src:s.avatar_url,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:"var(--bg-elevated)"},children:e.jsx("svg",{className:"w-10 h-10 lg:w-12 lg:h-12",style:{color:"var(--text-primary)",opacity:.4},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),e.jsx("h3",{className:"text-base lg:text-lg font-semibold mb-1",style:{color:"var(--text-primary)"},children:s.name}),s.username&&e.jsxs("p",{className:"text-sm mb-1",style:{color:"var(--text-muted)"},children:["@",s.username]}),s.created_at&&e.jsxs("p",{className:"text-xs mb-4",style:{color:"var(--text-muted)"},children:[y("messages.joined")," ",new Date(s.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"})]}),e.jsx("button",{onClick:()=>T(!0),className:"px-5 py-2 rounded-full text-sm font-semibold transition-all duration-200 hover:brightness-110",style:{backgroundColor:"var(--text-primary)",color:"var(--bg-primary)"},children:y("messages.viewProfile")})]})}),k&&e.jsx(ve,{}),e.jsx("div",{ref:_})]})})]}),x&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t",style:{borderColor:"rgba(75,85,99,0.2)",backgroundColor:"var(--bg-sidebar)"},children:[e.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[e.jsxs("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:[(null==s?void 0:s.name)||"Someone"," wants to message you"]}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--text-primary)"},children:"Accept to chat, or deny to delete this conversation."})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:p,className:"px-4 py-1.5 rounded-full text-sm font-medium transition-all hover:opacity-80",style:{backgroundColor:"rgba(239,68,68,0.12)",color:"#F87171",border:"1px solid rgba(239,68,68,0.25)"},children:"Deny"}),e.jsx("button",{onClick:m,className:"px-4 py-1.5 rounded-full text-sm font-semibold transition-all hover:opacity-80",style:{backgroundColor:"var(--text-primary)",color:"var(--bg-primary)"},children:"Accept"})]})]}),e.jsx(ue,{onSendMessage:async(e,t,s)=>{W(null),O.current=!0;try{let n;if(t&&(n=await C(t)||void 0,!n))throw new Error("Failed to upload image");const o=await b(e,n,s);if(null==o?void 0:o.error)throw o.error;i&&i(r.id)}catch(n){}},onTyping:j,disabled:v||x,replyTo:S,onCancelReply:()=>W(null),otherUserName:(null==s?void 0:s.username)||"",enableSpellCheck:h}),e.jsx(be,{isOpen:M,onClose:()=>T(!1),user:s,messages:g,currentUserId:n,currentUserProfile:o})]})}),De={sm:{container:"w-8 h-8"},md:{container:"w-10 h-10"},lg:{container:"w-12 h-12"}};function Re({src:r,name:s,size:n="md",isOnline:o,showOnlineIndicator:a=!1,isAdmin:i=!1}){const[l,u]=t.useState(!1),[x,m]=t.useState(!1),[p,h]=t.useState(null),y=t.useRef(null),f=i?X:r||"",g=f&&""!==f.trim();t.useEffect(()=>{if(!g)return void m(!0);const e=d(f);if(!e){c(f),u(!1),m(!1);const e=function(e,t,r){const s=new Image;return s.onload=t,s.onerror=r,s.src=e,s}(f,()=>u(!0),()=>m(!0));return y.current=e,()=>{y.current&&(y.current.onload=null,y.current.onerror=null)}}h(e),u(!0),c(f)},[f,g]);const v=p||f,k=g&&(l||p)&&!x,b=Y;return e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs("div",{className:`${De[n].container} rounded-full flex items-center justify-center overflow-hidden relative`,children:[e.jsx("img",{src:b,alt:s,className:`${De[n].container} rounded-full object-cover absolute inset-0 default-avatar-shake`,style:{opacity:k?0:1,transition:"opacity 0.2s ease-in-out"}}),g&&e.jsx("img",{src:v,alt:s,className:`${De[n].container} rounded-full object-cover absolute inset-0`,style:{opacity:k?1:0,transition:"none"},onLoad:()=>{p||u(!0)},onError:()=>m(!0),loading:"eager",decoding:"async",fetchpriority:"high"})]}),a&&e.jsx("span",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 border-2 rounded-full z-10",style:{borderColor:"#111111",backgroundColor:o?"#10b981":"#64748B"}})]})}function Ve({x:r,y:s,onClose:n,onPin:o,isPinned:a=!1}){const i=t.useRef(null);return t.useEffect(()=>{const e=e=>{i.current&&!i.current.contains(e.target)&&n()},t=e=>{"Escape"===e.key&&n()};return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[n]),t.useEffect(()=>{if(i.current){const e=i.current,t=e.getBoundingClientRect(),n=window.innerWidth,o=window.innerHeight;t.right>n&&(e.style.left=r-t.width+"px"),t.bottom>o&&(e.style.top=s-t.height+"px")}},[r,s]),e.jsx("div",{ref:i,className:"fixed rounded-lg shadow-lg py-1 min-w-[200px] z-50",style:{left:r,top:s,backgroundColor:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:e.jsxs("button",{onClick:()=>{null==o||o(),n()},className:"w-full flex items-center gap-3 px-4 py-2.5 text-left hover:brightness-110 transition-colors",style:{color:"var(--text-primary)"},children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:a?"Unpin":"Pin"})]})})}function $e({userType:t}){const r=13;return"artist"===t?e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:r,height:r,flexShrink:0,opacity:.55},color:"currentColor",children:[e.jsx("path",{d:"M12 28C12 20.268 18.268 14 26 14H22C29.732 14 36 20.268 36 28",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"}),e.jsx("rect",{x:"8",y:"26",width:"8",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"32",y:"26",width:"8",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"10",y:"28",width:"4",height:"8",rx:"1",fill:"currentColor",opacity:"0.3"}),e.jsx("rect",{x:"34",y:"28",width:"4",height:"8",rx:"1",fill:"currentColor",opacity:"0.3"})]}):"creator"===t?e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:r,height:r,flexShrink:0,opacity:.55},color:"currentColor",children:[e.jsx("rect",{x:"14",y:"6",width:"20",height:"36",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"20",y:"9",width:"8",height:"2",rx:"1",fill:"currentColor",opacity:"0.4"}),e.jsx("rect",{x:"21",y:"38",width:"6",height:"2",rx:"1",fill:"currentColor",opacity:"0.4"}),e.jsx("rect",{x:"16",y:"14",width:"10",height:"8",rx:"2",fill:"currentColor",opacity:"0.2"}),e.jsx("path",{d:"M20 16L23 18L20 20V16Z",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"26",y:"14",width:"8",height:"8",rx:"2",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.8"}),e.jsx("circle",{cx:"30",cy:"18",r:"2",stroke:"currentColor",strokeWidth:"1",fill:"none",opacity:"0.8"}),e.jsx("circle",{cx:"32.5",cy:"15.5",r:"0.8",fill:"currentColor",opacity:"0.6"})]}):"freelancer"===t?e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:r,height:r,flexShrink:0,opacity:.55},color:"currentColor",children:[e.jsx("rect",{x:"12",y:"10",width:"24",height:"10",rx:"1",fill:"none",stroke:"currentColor",strokeWidth:"2"}),e.jsx("rect",{x:"21",y:"20",width:"6",height:"24",rx:"1",fill:"none",stroke:"currentColor",strokeWidth:"2"}),e.jsx("line",{x1:"22",y1:"32",x2:"26",y2:"32",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"22",y1:"37",x2:"26",y2:"37",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}):"business"===t?e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:r,height:r,flexShrink:0,opacity:.55},color:"currentColor",children:[e.jsx("rect",{x:"6",y:"18",width:"36",height:"22",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M18 18V14C18 12.8954 18.8954 12 20 12H28C29.1046 12 30 12.8954 30 14V18",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"6",y:"18",width:"36",height:"8",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"black"}),e.jsx("rect",{x:"21",y:"24",width:"6",height:"4",rx:"1",fill:"currentColor"})]}):null}const ze=t.memo(function({user:r,conversation:s,isActive:n,onClick:o,onPin:a,unreadCount:i,currentUserId:l}){const c=void 0!==i?i:l&&s.customer_id===l?s.unread_count_customer:s.unread_count_admin,[d,u]=t.useState(null),x=s.last_message?(()=>{let e=s.last_message.replace(/\n/g," ").trim();return e.startsWith("Me: ")&&(e=e.substring(4).trim()),l&&s.last_message_sender_id===l?"Me: "+e:e})():"No messages yet";return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:o,onContextMenu:e=>{e.preventDefault(),u({x:e.clientX,y:e.clientY})},className:"w-full flex items-center gap-2 lg:gap-3 px-3 lg:px-4 py-2 lg:py-3 transition-colors text-left "+(n?"":"hover:brightness-110"),style:n?{backgroundColor:"var(--bg-elevated)"}:{backgroundColor:"transparent"},children:[e.jsx(Re,{src:r.avatar_url,name:r.name,size:"lg",isAdmin:r.is_admin}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsxs("span",{className:"flex items-center gap-1.5 min-w-0",children:[e.jsx("span",{className:"text-sm lg:text-base font-medium truncate",style:{color:"var(--text-primary)"},children:r.name}),r.user_type&&!r.is_admin&&e.jsx($e,{userType:r.user_type})]}),e.jsx("span",{className:"text-[10px] lg:text-xs flex-shrink-0 ml-2",style:{color:"var(--text-secondary)"},children:pe(s.last_message_at)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs lg:text-sm truncate pr-2",style:{color:"var(--text-secondary)"},children:x}),c>0&&e.jsx("span",{className:"flex-shrink-0 min-w-[18px] lg:min-w-[20px] h-4 lg:h-5 px-1 lg:px-1.5 flex items-center justify-center text-[10px] lg:text-xs font-medium rounded-full",style:{backgroundColor:"#ef4444",color:"#FFFFFF"},children:c>99?"99+":c})]})]})]}),d&&e.jsx(Ve,{x:d.x,y:d.y,onClose:()=>u(null),onPin:()=>{null==a||a(s.id,!s.is_pinned)},isPinned:s.is_pinned})]})});function Pe({backgroundTheme:t="dark"}){const r=fe(t);return e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 animate-pulse",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex-shrink-0",style:{backgroundColor:r.skeletonPrimary}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"h-4 rounded mb-2",style:{backgroundColor:r.skeletonPrimary,width:"60%"}}),e.jsx("div",{className:"h-3 rounded",style:{backgroundColor:r.skeletonSecondary,width:"85%"}})]}),e.jsx("div",{className:"h-3 rounded flex-shrink-0",style:{backgroundColor:r.skeletonSecondary,width:"40px"}})]})}function qe({count:t=3,backgroundTheme:r="dark"}){return e.jsx("div",{className:"space-y-1",children:Array.from({length:t}).map((t,s)=>e.jsx(Pe,{backgroundTheme:r},s))})}function Ue({backgroundTheme:t="dark"}){const r=fe(t);return e.jsxs("div",{className:"flex flex-col h-full animate-pulse",style:{backgroundColor:r.background},children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b",style:{borderColor:r.border},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex-shrink-0",style:{backgroundColor:r.skeletonPrimary}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 rounded mb-1.5",style:{backgroundColor:r.skeletonPrimary,width:"120px"}}),e.jsx("div",{className:"h-3 rounded",style:{backgroundColor:r.skeletonSecondary,width:"80px"}})]})]}),e.jsx("div",{className:"flex-1 py-2 lg:py-4 flex flex-col justify-end",children:e.jsxs("div",{className:"space-y-0.5 lg:space-y-1 px-2 lg:px-4",children:[e.jsx("div",{className:"flex justify-start px-2 lg:px-4 py-0.5",children:e.jsx("div",{className:"flex items-center gap-1.5 lg:gap-2 max-w-[85%] lg:max-w-[70%]",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"rounded-2xl px-4 py-3",style:{backgroundColor:r.skeletonSecondary,minHeight:"2.5rem",width:"180px"}}),e.jsx("div",{className:"h-3 rounded px-1",style:{backgroundColor:r.skeletonLight,width:"40px"}})]})})}),e.jsx("div",{className:"flex justify-end px-2 lg:px-4 py-0.5",children:e.jsx("div",{className:"flex items-center gap-1.5 lg:gap-2 max-w-[85%] lg:max-w-[70%] flex-row-reverse",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"rounded-2xl px-4 py-3",style:{backgroundColor:r.skeletonPrimary,minHeight:"2.5rem",width:"140px"}}),e.jsx("div",{className:"h-3 rounded px-1 ml-auto",style:{backgroundColor:r.skeletonLight,width:"40px"}})]})})}),e.jsx("div",{className:"flex justify-start px-2 lg:px-4 py-0.5",children:e.jsx("div",{className:"flex items-center gap-1.5 lg:gap-2 max-w-[85%] lg:max-w-[70%]",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"rounded-2xl px-4 py-3",style:{backgroundColor:r.skeletonSecondary,minHeight:"3.5rem",width:"220px"}}),e.jsx("div",{className:"h-3 rounded px-1",style:{backgroundColor:r.skeletonLight,width:"40px"}})]})})})]})}),e.jsx("div",{className:"p-4 border-t",style:{borderColor:r.border},children:e.jsx("div",{className:"h-12 rounded-xl",style:{backgroundColor:r.skeletonSecondary}})})]})}function Ye(e,t){let r=null;return function(...s){r&&clearTimeout(r),r=setTimeout(()=>{r=null,e(...s)},t)}}function Xe({userId:r,activeSection:s,onNavigateToMessages:n,theme:o="dark",enabled:a=!0,playSound:i=!1,showFaviconBadge:c=!1,unreadCount:d=0}){const x=u[o],[m,p]=t.useState([]),[h,y]=t.useState(new Set),f=t.useRef(new Map),g=t.useRef(new Map),v=t.useRef(new Set),k=t.useRef(a),b=t.useRef(i);t.useEffect(()=>{k.current=a},[a]),t.useEffect(()=>{b.current=i},[i]),t.useEffect(()=>{a||(p([]),y(new Set))},[a]);const j=t.useRef(null);t.useEffect(()=>{if(!c){const e=j.current||document.querySelector("link[rel~='icon']");return void(e&&(e.href="/favicon.ico"))}if(d<=0){const e=j.current||document.querySelector("link[rel~='icon']");return void(e&&(e.href="/favicon.ico"))}const e=document.createElement("canvas");e.width=32,e.height=32;const t=e.getContext("2d");if(!t)return;const r=new Image;r.src="/favicon.ico",r.onload=()=>{t.drawImage(r,0,0,32,32);t.beginPath(),t.arc(19,13,10,0,2*Math.PI),t.fillStyle="#ef4444",t.fill(),t.fillStyle="#ffffff",t.font="bold 9px sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(d>99?"99+":String(d),19,13);let s=document.querySelector("link[rel~='icon']");s||(s=document.createElement("link"),s.rel="icon",document.head.appendChild(s)),s.href=e.toDataURL("image/png"),j.current=s},r.onerror=()=>{t.beginPath(),t.arc(16,16,16,0,2*Math.PI),t.fillStyle="#ef4444",t.fill(),t.fillStyle="#ffffff",t.font="bold 11px sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(d>99?"99+":String(d),16,16);let r=document.querySelector("link[rel~='icon']");r||(r=document.createElement("link"),r.rel="icon",document.head.appendChild(r)),r.href=e.toDataURL("image/png"),j.current=r}},[c,d]);const w=t.useCallback(e=>{const t=f.current.get(e);t&&(clearTimeout(t),f.current.delete(e)),y(t=>new Set(t).add(e));const r=setTimeout(()=>{p(t=>t.filter(t=>t.id!==e)),y(t=>{const r=new Set(t);return r.delete(e),r}),g.current.delete(e)},350);g.current.set(e,r)},[]),C=t.useCallback(e=>{f.current.forEach(e=>clearTimeout(e)),f.current.clear();const t=setTimeout(()=>{w(e)},5e3);f.current.set(e,t)},[w]);if(t.useEffect(()=>{if(!r)return;const e=l.channel(`message-toast-${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},async e=>{const t=e.new;if(t.sender_id===r)return;if(v.current.has(t.id))return;if("messages"===s)return;if(!k.current)return;const{data:n}=await l.from("conversations").select("id, customer_id, admin_id, is_request, message_count").eq("id",t.conversation_id).or(`customer_id.eq.${r},admin_id.eq.${r}`).maybeSingle();if(!n)return;const o=!0===n.is_request&&n.admin_id===r;if(o){if((n.message_count??0)>1)return}if(!o&&v.current.has(t.id)&&v.current.delete(t.id),v.current.add(t.id),b.current)try{const e=new Audio("/elevate notification ping v1.wav");e.volume=.7,e.play().catch(()=>{})}catch{}let a="Someone",i=null;const{data:c}=await l.from("unified_users").select("display_name, first_name, last_name, username, avatar_url, is_admin").eq("id",t.sender_id).maybeSingle();if(c)if(c.is_admin)a=c.display_name||"Elevate",i=c.avatar_url||X;else{a=c.display_name||[c.first_name,c.last_name].filter(Boolean).join(" ")||c.username||"Someone",i=c.avatar_url||null}else{const{data:e}=await l.from("profiles").select("name, avatar_url, is_admin").eq("id",t.sender_id).maybeSingle();(null==e?void 0:e.is_admin)&&(a=e.name||"Elevate",i=e.avatar_url||X)}const d={id:t.id,conversationId:t.conversation_id,senderName:a,senderAvatar:i,content:o?`${a} wants to message you`:"image"===t.type?"ðŸ“· Photo":t.content,timestamp:Date.now()};p([d]),C(t.id)}).subscribe();return()=>{l.removeChannel(e)}},[r,s,C]),t.useEffect(()=>()=>{f.current.forEach(e=>clearTimeout(e)),g.current.forEach(e=>clearTimeout(e))},[]),0===m.length)return null;const N="dark"===o?"rgba(15, 15, 19, 0.95)":"grey"===o?"rgba(30, 30, 36, 0.95)":"rose"===o?"rgba(28, 10, 22, 0.95)":"white"===o?"rgba(255, 255, 255, 0.97)":"rgba(20, 30, 50, 0.95)",_="dark"===o?"rgba(255,255,255,0.08)":"grey"===o?"rgba(255,255,255,0.1)":"rose"===o?"rgba(180,80,140,0.25)":"white"===o?"rgba(15,23,42,0.15)":"rgba(255,255,255,0.15)",L=x.bg.active,S="dark"===o?"rgba(255,255,255,0.06)":"grey"===o||"rose"===o?"rgba(255,255,255,0.08)":"white"===o?"rgba(15,23,42,0.08)":"rgba(255,255,255,0.1)";return e.jsxs("div",{className:"fixed top-4 left-1/2 z-[9999] flex flex-col gap-2 pointer-events-none",style:{transform:"translateX(-50%)",width:"min(360px, calc(100vw - 32px))"},children:[m.map((t,r)=>e.jsx("div",{className:"pointer-events-auto",style:{animation:h.has(t.id)?"messageToastSlideUp 0.35s cubic-bezier(0.4, 0, 1, 1) forwards":"messageToastSlideDown 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards",opacity:0,animationDelay:h.has(t.id)?"0ms":60*r+"ms",animationFillMode:"forwards"},children:e.jsxs("div",{onClick:()=>{w(t.id),n()},className:"flex items-center gap-3 px-4 py-3 rounded-2xl cursor-pointer select-none",style:{backgroundColor:N,backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:`1px solid ${_}`,boxShadow:"0 8px 32px rgba(0,0,0,0.4), 0 2px 8px rgba(0,0,0,0.2)"},children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full overflow-hidden",style:{border:`1.5px solid ${_}`},children:t.senderAvatar?e.jsx("img",{src:t.senderAvatar,alt:t.senderName,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-sm font-semibold",style:{backgroundColor:L,color:x.text.secondary},children:t.senderName.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:[e.jsx("p",{className:"text-xs font-semibold truncate",style:{color:x.text.primary},children:t.senderName}),e.jsx("p",{className:"text-[10px] flex-shrink-0",style:{color:x.text.muted},children:"now"})]}),e.jsx("p",{className:"text-xs truncate",style:{color:x.text.secondary},children:t.content})]}),e.jsx("button",{onClick:e=>{e.stopPropagation(),w(t.id)},className:"flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center transition-all hover:brightness-110",style:{backgroundColor:S,color:x.text.muted},children:e.jsx("svg",{viewBox:"0 0 12 12",fill:"none",className:"w-2.5 h-2.5",children:e.jsx("path",{d:"M2 2L10 10M10 2L2 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]})},t.id)),e.jsx("style",{children:"\n        @keyframes messageToastSlideDown {\n          from {\n            opacity: 0;\n            transform: translateY(-24px) scale(0.95);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n        }\n        @keyframes messageToastSlideUp {\n          from {\n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n          to {\n            opacity: 0;\n            transform: translateY(-20px) scale(0.95);\n          }\n        }\n      "})]})}function Ze({isHovered:t,isActive:r}){const s=t||r;return e.jsx("div",{className:"relative w-7 h-7",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7 overflow-visible",children:[e.jsx("rect",{x:"12",y:"8",width:"24",height:"32",rx:"3",stroke:"currentColor",strokeWidth:"3.5",fill:"none"}),e.jsx("path",{d:"M19 8V6C19 4.89543 19.8954 4 21 4H27C28.1046 4 29 4.89543 29 6V8",stroke:"currentColor",strokeWidth:"3.5",fill:"none"}),e.jsx("line",{x1:"17",y1:"16",x2:"31",y2:"16",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",className:"opacity-50"}),e.jsx("line",{x1:"17",y1:"22",x2:"28",y2:"22",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",className:"opacity-50"}),e.jsx("path",{d:"M18 30L22 34L30 26",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"20",strokeDashoffset:s?"0":"20",className:"transition-all duration-500 ease-out"}),e.jsx("circle",{cx:"36",cy:"12",r:"2",fill:"currentColor",className:"transition-all duration-300 delay-200 "+(s?"opacity-100 scale-100":"opacity-0 scale-0")}),e.jsx("circle",{cx:"40",cy:"18",r:"1.5",fill:"currentColor",className:"transition-all duration-300 delay-300 "+(s?"opacity-70 scale-100":"opacity-0 scale-0")}),e.jsx("circle",{cx:"38",cy:"24",r:"1",fill:"currentColor",className:"transition-all duration-300 delay-400 "+(s?"opacity-50 scale-100":"opacity-0 scale-0")})]})})}function Ke({isHovered:t,isActive:r}){const s=t||r;return e.jsx("div",{className:"relative w-7 h-7",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7 overflow-visible",children:[e.jsxs("g",{className:"transition-all duration-400 ease-out origin-center",style:{transform:s?"translateX(8px) translateY(-4px) rotate(6deg)":"translate(0, 0) rotate(0deg)"},children:[e.jsx("path",{d:"M8 24L40 12L32 36L24 28L8 24Z",stroke:"currentColor",strokeWidth:"3.5",strokeLinejoin:"round",fill:"none"}),e.jsx("path",{d:"M8 24L40 12L24 28",stroke:"currentColor",strokeWidth:"3.5",strokeLinejoin:"round"}),e.jsx("path",{d:"M24 28L32 36",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"})]}),e.jsxs("g",{className:"transition-all duration-300 "+(s?"opacity-100":"opacity-0"),children:[e.jsx("path",{d:"M4 22L10 24",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",className:"opacity-70"}),e.jsx("path",{d:"M6 28L12 26",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",className:"opacity-50"}),e.jsx("path",{d:"M2 25L8 25",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",className:"opacity-30"})]}),e.jsxs("g",{className:"transition-all duration-300 delay-150 "+(s?"opacity-100":"opacity-0"),children:[e.jsx("circle",{cx:"42",cy:"10",r:"1",fill:"currentColor"}),e.jsx("path",{d:"M44 8L46 6",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("path",{d:"M44 12L46 14",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"})]})]})})}function Ge({isHovered:t,isActive:r,unreadCount:s=0}){const n=t||r;return e.jsxs("div",{className:"relative w-7 h-7",children:[e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7 overflow-visible",children:[e.jsx("path",{d:"M36 8H12C8.68629 8 6 10.6863 6 14V30C6 33.3137 8.68629 36 12 36H16L24 44L32 36H36C39.3137 36 42 33.3137 42 30V14C42 10.6863 39.3137 8 36 8Z",stroke:"currentColor",strokeWidth:"3.5",strokeLinejoin:"round",fill:"none",style:{transform:n?"scale(1.05)":"scale(1)",transformOrigin:"24px 24px",transition:"transform 0.3s ease"}}),e.jsx("circle",{cx:"16",cy:"22",r:"2.5",fill:"currentColor"}),e.jsx("circle",{cx:"24",cy:"22",r:"2.5",fill:"currentColor"}),e.jsx("circle",{cx:"32",cy:"22",r:"2.5",fill:"currentColor"})]}),s>0&&e.jsxs("div",{className:"absolute -top-1 -right-1 flex items-center justify-center",style:{zIndex:9999},children:[e.jsx("div",{className:"absolute w-4 h-4 rounded-full bg-red-500 animate-ping opacity-75"}),e.jsx("div",{className:"relative w-4 h-4 rounded-full bg-red-500 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-[9px] font-bold text-white leading-none",children:s>99?"99+":s})})]})]})}function Je({isHovered:t,isActive:r}){const s=t||r;return e.jsx("div",{className:"relative w-7 h-7",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7 overflow-visible",children:[e.jsxs("g",{className:"transition-transform duration-300",style:{transform:s?"scale(0.95)":"scale(1)"},children:[e.jsx("circle",{cx:"12",cy:"28",r:"4",stroke:"currentColor",strokeWidth:"3.5",fill:"none",className:"opacity-50"}),e.jsx("path",{d:"M6 42C6 38 8 36 12 36C16 36 18 38 18 42",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",className:"opacity-50"}),e.jsx("circle",{cx:"24",cy:"26",r:"5",stroke:"currentColor",strokeWidth:"3.5",fill:"none",className:"opacity-70"}),e.jsx("path",{d:"M16 42C16 37 19 34 24 34C29 34 32 37 32 42",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",className:"opacity-70"}),e.jsx("circle",{cx:"36",cy:"28",r:"4",stroke:"currentColor",strokeWidth:"3.5",fill:"none",className:"opacity-50"}),e.jsx("path",{d:"M30 42C30 38 32 36 36 36C40 36 42 38 42 42",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",className:"opacity-50"})]}),e.jsxs("g",{className:"transition-all duration-300 origin-center",style:{transform:s?"scale(1.10)":"scale(1)"},children:[e.jsx("circle",{cx:"32",cy:"14",r:"8",stroke:"currentColor",strokeWidth:"3.5",style:{fill:"var(--bg-primary)"}}),e.jsx("path",{d:"M38 20L44 26",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("path",{d:"M28 11C29 10 31 10 32 11",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",className:"opacity-60"})]}),e.jsx("circle",{cx:"24",cy:"26",r:"7",stroke:"currentColor",strokeWidth:"3.5",fill:"none",className:"transition-opacity duration-300 "+(s?"opacity-50":"opacity-0"),strokeDasharray:"4 2"})]})})}function Qe({isHovered:t,isActive:r}){const s=t||r;return e.jsx("div",{className:"relative w-7 h-7",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7 overflow-visible",children:[e.jsx("ellipse",{cx:"24",cy:"36",rx:"12",ry:"4",stroke:"currentColor",strokeWidth:"3.5",fill:"none"}),e.jsx("path",{d:"M12 36V32C12 30.34 17.37 29 24 29C30.63 29 36 30.34 36 32V36",stroke:"currentColor",strokeWidth:"3.5",className:"transition-transform duration-300"}),e.jsx("ellipse",{cx:"24",cy:"28",rx:"12",ry:"4",stroke:"currentColor",strokeWidth:"3.5",fill:"none",className:"transition-transform duration-300",style:{transform:s?"translateY(-4px)":"translateY(0)"}}),e.jsx("path",{d:"M12 28V24C12 22.34 17.37 21 24 21C30.63 21 36 22.34 36 24V28",stroke:"currentColor",strokeWidth:"3.5",className:"transition-transform duration-300",style:{transform:s?"translateY(-4px)":"translateY(0)"}}),e.jsx("ellipse",{cx:"24",cy:"20",rx:"12",ry:"4",stroke:"currentColor",strokeWidth:"3.5",fill:"none",className:"transition-transform duration-300",style:{transform:s?"translateY(-8px)":"translateY(0)"}}),e.jsx("circle",{cx:"38",cy:"22",r:"1.5",fill:"currentColor",className:"transition-opacity duration-300 animate-pulse "+(s?"opacity-80":"opacity-0")}),e.jsx("circle",{cx:"10",cy:"28",r:"1",fill:"currentColor",className:"transition-opacity duration-300 delay-100 animate-pulse "+(s?"opacity-60":"opacity-0")})]})})}const et=document.createElement("style");et.textContent="\n  @keyframes data-transmit {\n    0% { opacity: 0; transform: scale(0.5); }\n    20% { opacity: 1; transform: scale(1); }\n    80% { opacity: 1; transform: scale(1.2); }\n    100% { opacity: 0; transform: scale(1.5); }\n  }\n\n  .group:hover .group-hover\\:animate-data-transmit-up { animation: data-transmit 2s ease-out infinite; }\n  .group:hover .group-hover\\:animate-data-transmit-down { animation: data-transmit 2s ease-out infinite; }\n  .group:hover .group-hover\\:animate-data-transmit-left { animation: data-transmit 2s ease-out infinite; }\n  .group:hover .group-hover\\:animate-data-transmit-right { animation: data-transmit 2s ease-out infinite; }\n\n  @keyframes clapper-open-close {\n    0%, 100% { transform: rotate(0deg); }\n    15% { transform: rotate(-30deg); }\n    30% { transform: rotate(0deg); }\n    45% { transform: rotate(-30deg); }\n    60% { transform: rotate(0deg); }\n  }\n\n  .animate-clapper-open-close {\n    animation: clapper-open-close 1.2s ease-in-out infinite;\n  }\n",document.head.appendChild(et);const tt="w-7 h-7";function rt({className:t="w-7 h-7"}){return e.jsxs(e.Fragment,{children:[e.jsx("img",{src:"/elevate l0.png",alt:"Elevate",style:{maxWidth:"unset"},className:`${t} sidebar-logo-white rounded-lg default-avatar-shake`}),e.jsx("img",{src:"/bb.png",alt:"Elevate",style:{maxWidth:"unset"},className:`${t} sidebar-logo-black rounded-lg default-avatar-shake`})]})}function st({isHovered:t,isActive:r}){const s=t||r;return e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:tt,children:[e.jsx("rect",{x:"12",y:"20",width:"24",height:"26",rx:"2",stroke:"currentColor",strokeWidth:"3.5",fill:"none"}),e.jsx("path",{d:"M4 22L24 4L44 22",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M18 46V30C18 29.4477 18.4477 29 19 29H29C29.5523 29 30 29.4477 30 30V46",fill:"currentColor",style:{opacity:s?1:.3,transition:"opacity 0.3s ease"}}),e.jsx("ellipse",{cx:"24",cy:"38",rx:"7",ry:"9",fill:"currentColor",style:{opacity:s?.4:0,transition:"opacity 0.3s ease"}})]})}function nt({isHovered:t,isActive:r}){const s=t||r;return e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:tt,children:[e.jsx("circle",{cx:"24",cy:"24",r:"20",stroke:"currentColor",strokeWidth:"3.5",fill:"none"}),e.jsx("circle",{cx:"24",cy:"24",r:"16",stroke:"currentColor",strokeWidth:"1",strokeOpacity:"0.4",fill:"none"}),e.jsx("line",{x1:"24",y1:"4",x2:"24",y2:"8",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("line",{x1:"24",y1:"40",x2:"24",y2:"44",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("line",{x1:"4",y1:"24",x2:"8",y2:"24",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("line",{x1:"40",y1:"24",x2:"44",y2:"24",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("line",{x1:"38.1",y1:"9.9",x2:"36",y2:"12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"38.1",y1:"38.1",x2:"36",y2:"36",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"9.9",y1:"38.1",x2:"12",y2:"36",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"9.9",y1:"9.9",x2:"12",y2:"12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsxs("g",{style:{transform:s?"rotate(180deg)":"rotate(0deg)",transformOrigin:"24px 24px",transition:"transform 0.5s ease-in-out"},children:[e.jsx("path",{d:"M24 10L28 24H20L24 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round",fill:"currentColor"}),e.jsx("path",{d:"M24 38L28 24H20L24 38Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round",fill:"none"})]}),e.jsx("circle",{cx:"24",cy:"24",r:"2.5",fill:"currentColor"})]})}function ot({isHovered:t,isActive:r}){const s=t||r;return e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`${tt} overflow-visible`,children:[[0,1,2,3,4].map(t=>{const r=8+8*t;return e.jsx("polygon",{points:`${r},2 ${r+1.2},5 ${r+4},5.5 ${r+2},7.5 ${r+2.5},11 ${r},9 ${r-2.5},11 ${r-2},7.5 ${r-4},5.5 ${r-1.2},5`,fill:"currentColor",style:{opacity:s?1:0,transform:s?"scale(1) translateY(0)":"scale(0.5) translateY(4px)",transformOrigin:`${r}px 6px`,transition:`all 0.3s ease ${.06*t}s`}},t)}),e.jsx("circle",{cx:"12",cy:"22",r:"5",stroke:"currentColor",strokeWidth:"3.5",fill:"none",style:{opacity:.5,transform:s?"translateX(-3px)":"translateX(0)",transition:"all 0.3s ease"}}),e.jsx("path",{d:"M4 44C4 37 7 32 12 32",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",fill:"none",style:{opacity:.5,transform:s?"translateX(-3px)":"translateX(0)",transition:"all 0.3s ease"}}),e.jsx("circle",{cx:"36",cy:"22",r:"5",stroke:"currentColor",strokeWidth:"3.5",fill:"none",style:{opacity:.5,transform:s?"translateX(3px)":"translateX(0)",transition:"all 0.3s ease"}}),e.jsx("path",{d:"M44 44C44 37 41 32 36 32",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",fill:"none",style:{opacity:.5,transform:s?"translateX(3px)":"translateX(0)",transition:"all 0.3s ease"}}),e.jsx("circle",{cx:"24",cy:"20",r:"6",stroke:"currentColor",strokeWidth:"3.5",fill:"none",style:{transform:s?"scale(1.05)":"scale(1)",transformOrigin:"24px 20px",transition:"transform 0.3s ease"}}),e.jsx("path",{d:"M12 44C12 35 17 30 24 30C31 30 36 35 36 44",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",fill:"none"})]})}function at({isHovered:t,isActive:r}){const s=t||r;return e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`${tt} overflow-visible`,children:[e.jsx("path",{d:"M6 12 H20 V18 C20 20.2 18.2 22 16 22 C13.8 22 12 20.2 12 18 V12 H6 V36 H20 V30 C20 27.8 18.2 26 16 26 C13.8 26 12 27.8 12 30 V36 H6 Z",stroke:"currentColor",strokeWidth:"3",strokeLinejoin:"round",fill:"none",style:{transform:s?"translateX(2px)":"translateX(-3px)",transition:"transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)"}}),e.jsx("path",{d:"M42 12 H28 V18 C28 20.2 29.8 22 32 22 C34.2 22 36 20.2 36 18 V12 H42 V36 H28 V30 C28 27.8 29.8 26 32 26 C34.2 26 36 27.8 36 30 V36 H42 Z",stroke:"currentColor",strokeWidth:"3",strokeLinejoin:"round",fill:"none",style:{transform:s?"translateX(-2px)":"translateX(3px)",transition:"transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)"}}),e.jsx("line",{x1:"24",y1:"12",x2:"24",y2:"36",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",style:{opacity:s?.6:0,transition:"opacity 0.3s ease 0.2s"}})]})}function it({isHovered:t,isActive:r}){const s=t||r;return e.jsx("div",{className:`relative ${tt}`,children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:tt,children:[e.jsx("rect",{x:"14",y:"14",width:"20",height:"20",rx:"2",stroke:"currentColor",strokeWidth:"3.5",fill:"currentColor",fillOpacity:"0.1",style:{transform:s?"scale(1.05)":"scale(1)",transformOrigin:"24px 24px",transition:"transform 0.3s ease"}}),e.jsx("line",{x1:"19",y1:"24",x2:"29",y2:"24",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",style:{opacity:s?1:.3,transition:"opacity 0.3s ease"}}),e.jsx("line",{x1:"24",y1:"19",x2:"24",y2:"29",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",style:{opacity:s?1:.3,transition:"opacity 0.3s ease"}}),e.jsx("line",{x1:"19",y1:"14",x2:"19",y2:"7",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",style:{opacity:s?1:.4,transition:"opacity 0.3s ease"}}),e.jsx("line",{x1:"29",y1:"14",x2:"29",y2:"7",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",style:{opacity:s?1:.4,transition:"opacity 0.3s ease"}}),e.jsx("line",{x1:"19",y1:"34",x2:"19",y2:"41",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",style:{opacity:s?1:.4,transition:"opacity 0.3s ease"}}),e.jsx("line",{x1:"29",y1:"34",x2:"29",y2:"41",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",style:{opacity:s?1:.4,transition:"opacity 0.3s ease"}}),e.jsx("line",{x1:"14",y1:"19",x2:"7",y2:"19",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",style:{opacity:s?1:.4,transition:"opacity 0.3s ease"}}),e.jsx("line",{x1:"14",y1:"29",x2:"7",y2:"29",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",style:{opacity:s?1:.4,transition:"opacity 0.3s ease"}}),e.jsx("line",{x1:"34",y1:"19",x2:"41",y2:"19",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",style:{opacity:s?1:.4,transition:"opacity 0.3s ease"}}),e.jsx("line",{x1:"34",y1:"29",x2:"41",y2:"29",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",style:{opacity:s?1:.4,transition:"opacity 0.3s ease"}}),e.jsx("circle",{cx:"19",cy:"4",r:"2.5",fill:"currentColor",style:{opacity:s?1:0,transition:"opacity 0.3s ease"}}),e.jsx("circle",{cx:"29",cy:"44",r:"2.5",fill:"currentColor",style:{opacity:s?1:0,transition:"opacity 0.3s ease",transitionDelay:"0.1s"}}),e.jsx("circle",{cx:"4",cy:"19",r:"2.5",fill:"currentColor",style:{opacity:s?1:0,transition:"opacity 0.3s ease",transitionDelay:"0.2s"}}),e.jsx("circle",{cx:"44",cy:"29",r:"2.5",fill:"currentColor",style:{opacity:s?1:0,transition:"opacity 0.3s ease",transitionDelay:"0.3s"}})]})})}function lt({isHovered:t,isActive:r}){const s=t||r;return e.jsx("div",{className:`relative ${tt}`,children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:tt,children:[e.jsxs("g",{style:{transform:s?"scale(1.05)":"scale(1)",transformOrigin:"24px 24px",transition:"transform 0.3s ease"},children:[e.jsx("circle",{cx:"20",cy:"20",r:"12",stroke:"currentColor",strokeWidth:"3.5",fill:"none"}),e.jsx("line",{x1:"30",y1:"30",x2:"42",y2:"42",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("path",{d:"M14 15C16 12 19 11 22 12",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",style:{opacity:s?.7:.3,transition:"opacity 0.3s ease"}})]}),e.jsx("text",{x:"20",y:"25",textAnchor:"middle",fill:"currentColor",fontSize:"16",fontWeight:"bold",style:{opacity:s?1:0,transform:s?"scale(1.1)":"scale(0.8)",transformOrigin:"20px 25px",transition:"all 0.3s ease"},children:"$"})]})})}function ct({isHovered:t,isActive:r}){const s=t||r;return e.jsx("div",{className:`relative ${tt}`,children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:tt,children:[e.jsx("rect",{x:"8",y:"24",width:"32",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"3.5",fill:"none"}),e.jsx("line",{x1:"12",y1:"30",x2:"28",y2:"30",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",style:{opacity:s?.8:.3,transition:"opacity 0.3s ease"}}),e.jsx("line",{x1:"12",y1:"36",x2:"22",y2:"36",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",style:{opacity:s?.8:.3,transition:"opacity 0.3s ease"}}),e.jsxs("g",{style:{transform:s?"rotate(-15deg)":"rotate(0deg)",transformOrigin:"8px 24px",transition:"transform 0.3s ease"},children:[e.jsx("path",{d:"M8 24V16C8 14.8954 8.89543 14 10 14H38C38.1046 14 40 14.8954 40 16V24",stroke:"currentColor",strokeWidth:"3.5",fill:"none",strokeLinejoin:"round"}),e.jsx("line",{x1:"14",y1:"14",x2:"20",y2:"24",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("line",{x1:"22",y1:"14",x2:"28",y2:"24",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("line",{x1:"30",y1:"14",x2:"36",y2:"24",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"})]})]})})}function dt({isHovered:t,isActive:r,unreadCount:s=0}){const n=t||r;return e.jsxs("div",{className:`relative ${tt}`,children:[e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:tt,children:[e.jsx("path",{d:"M36 6H14C9.58172 6 6 9.58172 6 14V26C6 30.4183 9.58172 34 14 34H17L24 42L31 34H36C40.4183 34 44 30.4183 44 26V14C44 9.58172 40.4183 6 36 6Z",stroke:"currentColor",strokeWidth:"3",fill:"none",style:{transform:n?"scale(1.05) translate(-2px, -2px)":"scale(1)",transformOrigin:"center",transition:"transform 0.3s ease"}}),e.jsx("path",{d:"M34 16H12C8.68629 16 6 18.6863 6 22V32C6 35.3137 8.68629 38 12 38H15L21 46L27 38H34C37.3137 38 40 35.3137 40 32V22C40 18.6863 37.3137 16 34 16Z",stroke:"currentColor",strokeWidth:"3",fill:"var(--bg-primary)",style:{transform:n?"scale(1.08) translate(2px, 2px)":"scale(1)",transformOrigin:"center",transition:"transform 0.3s ease"}}),e.jsxs("g",{style:{opacity:n?1:.7,transition:"opacity 0.3s ease"},children:[e.jsx("circle",{cx:"15",cy:"28",r:"2",fill:"currentColor"}),e.jsx("circle",{cx:"23",cy:"28",r:"2",fill:"currentColor"}),e.jsx("circle",{cx:"31",cy:"28",r:"2",fill:"currentColor"})]})]}),s>0&&e.jsxs("div",{className:"absolute -top-1 -right-1 flex items-center justify-center",style:{zIndex:9999},children:[e.jsx("div",{className:"absolute w-4 h-4 rounded-full bg-red-500 animate-ping opacity-75"}),e.jsx("div",{className:"relative w-4 h-4 rounded-full bg-red-500 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-[9px] font-bold text-white leading-none",children:s>99?"99+":s})})]})]})}function ut({isHovered:t,isActive:r}){const s=t||r;return e.jsxs("div",{className:`relative ${tt} overflow-visible`,children:[e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:tt,style:{animation:s?"piggyWiggle 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97)":"none"},children:[e.jsx("ellipse",{cx:"24",cy:"26",rx:"18",ry:"14",stroke:"currentColor",strokeWidth:"3.5",fill:"none"}),e.jsx("ellipse",{cx:"40",cy:"26",rx:"5",ry:"4",stroke:"currentColor",strokeWidth:"3.5",fill:"none"}),e.jsx("circle",{cx:"39",cy:"24",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"42",cy:"24",r:"1",fill:"currentColor"}),e.jsx("path",{d:"M14 16C14 16 11 10 16 8C21 6 24 12 24 14",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round",fill:"none"}),e.jsx("path",{d:"M14 38V46",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("path",{d:"M22 38V46",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("path",{d:"M28 38V46",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("path",{d:"M36 38V46",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("rect",{x:"19",y:"12",width:"10",height:"3",rx:"1.5",fill:"currentColor"}),e.jsx("circle",{cx:"16",cy:"22",r:"2",fill:"currentColor"})]}),e.jsx("div",{className:"absolute left-1/2",style:{top:"-4px",opacity:0,animation:t?"coinDrop1 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":"none"},children:e.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",style:{filter:"drop-shadow(0 1px 2px rgba(255,255,255,0.3))"},children:[e.jsx("circle",{cx:"5",cy:"5",r:"4",stroke:"currentColor",strokeWidth:"1.2",fill:"rgba(255,255,255,0.1)"}),e.jsx("text",{x:"5",y:"7",textAnchor:"middle",fill:"currentColor",fontSize:"5",fontWeight:"bold",children:"$"})]})}),e.jsx("div",{className:"absolute left-1/2",style:{top:"-4px",opacity:0,animation:t?"coinDrop2 0.65s cubic-bezier(0.34, 1.56, 0.64, 1) 0.12s forwards":"none"},children:e.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",style:{filter:"drop-shadow(0 1px 2px rgba(255,255,255,0.3))"},children:[e.jsx("circle",{cx:"5",cy:"5",r:"4",stroke:"currentColor",strokeWidth:"1.2",fill:"rgba(255,255,255,0.1)"}),e.jsx("text",{x:"5",y:"7",textAnchor:"middle",fill:"currentColor",fontSize:"5",fontWeight:"bold",children:"$"})]})}),e.jsx("div",{className:"absolute left-1/2",style:{top:"-4px",opacity:0,animation:t?"coinDrop3 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.22s forwards":"none"},children:e.jsxs("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",style:{filter:"drop-shadow(0 1px 2px rgba(255,255,255,0.2))"},children:[e.jsx("circle",{cx:"4",cy:"4",r:"3",stroke:"currentColor",strokeWidth:"1",fill:"rgba(255,255,255,0.1)"}),e.jsx("text",{x:"4",y:"5.5",textAnchor:"middle",fill:"currentColor",fontSize:"4",fontWeight:"bold",children:"$"})]})}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2",style:{top:"12px",opacity:0,animation:t?"sparkle 0.4s ease-out 0.35s forwards":"none"},children:e.jsxs("svg",{width:"16",height:"8",viewBox:"0 0 16 8",fill:"none",children:[e.jsx("circle",{cx:"8",cy:"4",r:"1",fill:"currentColor",opacity:"0.8"}),e.jsx("circle",{cx:"4",cy:"4",r:"0.5",fill:"currentColor",opacity:"0.6"}),e.jsx("circle",{cx:"12",cy:"4",r:"0.5",fill:"currentColor",opacity:"0.6"})]})}),e.jsx("style",{children:"\n        @keyframes piggyWiggle {\n          0% { transform: rotate(0deg) scale(1); }\n          15% { transform: rotate(-4deg) scale(1.02); }\n          30% { transform: rotate(4deg) scale(1.02); }\n          45% { transform: rotate(-3deg) scale(1.01); }\n          60% { transform: rotate(3deg) scale(1.01); }\n          75% { transform: rotate(-1deg) scale(1); }\n          100% { transform: rotate(0deg) scale(1); }\n        }\n        @keyframes coinDrop1 {\n          0% { \n            opacity: 1; \n            transform: translateX(-50%) translateY(0) rotate(0deg) scale(0.5); \n          }\n          20% { \n            opacity: 1; \n            transform: translateX(-50%) translateY(-2px) rotate(45deg) scale(1); \n          }\n          70% { \n            opacity: 1; \n            transform: translateX(-45%) translateY(10px) rotate(180deg) scale(1); \n          }\n          85% { \n            opacity: 0.8; \n            transform: translateX(-45%) translateY(8px) rotate(200deg) scale(0.9); \n          }\n          100% { \n            opacity: 0; \n            transform: translateX(-45%) translateY(12px) rotate(220deg) scale(0.7); \n          }\n        }\n        @keyframes coinDrop2 {\n          0% { \n            opacity: 1; \n            transform: translateX(-50%) translateY(0) rotate(0deg) scale(0.5); \n          }\n          20% { \n            opacity: 1; \n            transform: translateX(-50%) translateY(-3px) rotate(-30deg) scale(1); \n          }\n          70% { \n            opacity: 1; \n            transform: translateX(-55%) translateY(11px) rotate(-150deg) scale(1); \n          }\n          85% { \n            opacity: 0.8; \n            transform: translateX(-55%) translateY(9px) rotate(-170deg) scale(0.9); \n          }\n          100% { \n            opacity: 0; \n            transform: translateX(-55%) translateY(13px) rotate(-190deg) scale(0.7); \n          }\n        }\n        @keyframes coinDrop3 {\n          0% { \n            opacity: 1; \n            transform: translateX(-50%) translateY(0) rotate(0deg) scale(0.4); \n          }\n          25% { \n            opacity: 1; \n            transform: translateX(-50%) translateY(-1px) rotate(60deg) scale(1); \n          }\n          75% { \n            opacity: 1; \n            transform: translateX(-50%) translateY(9px) rotate(240deg) scale(1); \n          }\n          100% { \n            opacity: 0; \n            transform: translateX(-50%) translateY(11px) rotate(300deg) scale(0.6); \n          }\n        }\n        @keyframes sparkle {\n          0% { \n            opacity: 0; \n            transform: translateX(-50%) scale(0.3); \n          }\n          50% { \n            opacity: 1; \n            transform: translateX(-50%) scale(1.2); \n          }\n          100% { \n            opacity: 0; \n            transform: translateX(-50%) scale(0.8); \n          }\n        }\n      "})]})}function xt({isHovered:t,isActive:r}){const s=t||r;return e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`${tt} overflow-visible`,children:[e.jsx("g",{style:{transform:s?"rotate(45deg)":"rotate(0deg)",transformOrigin:"24px 24px",transition:"transform 0.5s ease-in-out"},children:e.jsx("path",{d:"M21 4H27V10L30 11.5L35 6L42 13L37 18L38.5 21H44V27H38.5L37 30L42 35L35 42L30 37L27 38.5V44H21V38.5L18 37L13 42L6 35L11 30L9.5 27H4V21H9.5L11 18L6 13L13 6L18 11L21 10V4Z",stroke:"currentColor",strokeWidth:"3",strokeLinejoin:"round",fill:"none"})}),e.jsx("circle",{cx:"24",cy:"24",r:"7",stroke:"currentColor",strokeWidth:"3",fill:"none"})]})}const mt=(e,t)=>{const r=(e,r)=>t?t(e):r;return"admin"===e?[{id:"home",label:r("nav.home","Home"),Icon:st},{id:"applications",label:"Applications",Icon:Ze},{id:"messages",label:r("nav.messages","Messages"),Icon:Ge},{id:"users",label:"Users",Icon:Je},{id:"data",label:"Data",Icon:Qe},{id:"settings",label:r("nav.settings","Settings"),Icon:xt}]:"artist"===e?[{id:"home",label:r("nav.home","Home"),Icon:st},{id:"explore",label:r("nav.distribution","Distribution"),Icon:it},{id:"talent",label:r("nav.publishing","Publishing"),Icon:lt},{id:"deals",label:r("nav.sync","Sync"),Icon:ct},{id:"messages",label:r("nav.messages","Messages"),Icon:dt},{id:"earnings",label:r("nav.earnings","Earnings"),Icon:ut},{id:"settings",label:r("nav.settings","Settings"),Icon:xt}]:"business"===e?[{id:"home",label:r("nav.home","Home"),Icon:st},{id:"talent",label:r("nav.talent","Talent"),Icon:ot},{id:"deals",label:r("nav.deals","Deals"),Icon:at},{id:"messages",label:r("nav.messages","Messages"),Icon:dt},{id:"settings",label:r("nav.settings","Settings"),Icon:xt}]:[{id:"home",label:r("nav.home","Home"),Icon:st},{id:"explore",label:r("nav.explore","Explore"),Icon:nt},{id:"talent",label:r("nav.talent","Talent"),Icon:ot},{id:"deals",label:r("nav.deals","Deals"),Icon:at},{id:"messages",label:r("nav.messages","Messages"),Icon:dt},{id:"earnings",label:r("nav.earnings","Earnings"),Icon:ut},{id:"settings",label:r("nav.settings","Settings"),Icon:xt}]};function pt({activeSection:r,setActiveSection:s,userProfile:n,unreadCount:o=0,cachedProfilePic:a,isCollapsed:i,onCollapsedChange:l,permanentlyCollapsed:c,userType:d}){const[u,x]=t.useState(!1),[m,p]=t.useState(null),{t:h}=A(),y=!!c||(void 0!==i?i:u),f=e=>{c&&!e||(l?l(e):x(e))};t.useEffect(()=>{const e=()=>{window.innerWidth<1280&&f(!0)};return window.innerWidth<1280&&f(!0),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const g=null==n?void 0:n.profile_picture_url,v=a||(g&&!g.startsWith("blob:")?g:null),k=(null==n?void 0:n.first_name)&&(null==n?void 0:n.last_name)?`${n.first_name} ${n.last_name}`:"Your Name",b=(null==n?void 0:n.username)||"username";return e.jsxs("aside",{className:"hidden lg:flex flex-col h-screen fixed left-0 top-0 z-40",style:{width:y?80:240,transition:"width 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:"var(--bg-sidebar)",borderRight:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"relative",style:{height:"96px"},children:[e.jsx("div",{className:"absolute top-1/2 flex items-center justify-center",style:{left:"28px",width:"28px",transform:"translateY(-50%)",opacity:y?1:0,transition:"opacity 0.2s ease",pointerEvents:y?"auto":"none"},children:e.jsx("div",{className:"cursor-pointer hover:opacity-80 transition-opacity",onClick:e=>{e.preventDefault(),e.stopPropagation(),s("home")},children:e.jsx(rt,{className:"w-12 h-12 sidebar-logo-white"})})}),e.jsxs("div",{className:"absolute top-0 left-0 h-full flex items-center px-4",style:{opacity:y?0:1,transition:"opacity 0.2s ease",pointerEvents:y?"none":"auto"},children:[e.jsx("img",{src:"/elevate_transparent_white_.png",alt:"ELEVATE",className:"sidebar-logo-white h-32 -my-4 cursor-pointer hover:opacity-80 transition-opacity",onClick:e=>{e.preventDefault(),e.stopPropagation(),s("home")}}),e.jsx("img",{src:"/elevate_transparent_dark_.png",alt:"ELEVATE",className:"sidebar-logo-dark h-32 -my-4 cursor-pointer hover:opacity-80 transition-opacity",onClick:e=>{e.preventDefault(),e.stopPropagation(),s("home")}}),e.jsx("img",{src:"/elevate black logo .png",alt:"ELEVATE",className:"sidebar-logo-black h-32 -my-4 cursor-pointer hover:opacity-80 transition-opacity",onClick:e=>{e.preventDefault(),e.stopPropagation(),s("home")}})]})]}),e.jsx("nav",{className:"flex-1 px-3",children:mt(d,h).map(t=>{const n=m===t.id,a=r===t.id,i=t.Icon,l="messages"===t.id&&o>0&&"messages"!==r;return e.jsxs("div",{className:"cursor-pointer flex items-center gap-5 px-4 py-3 rounded-full transition-all duration-200 my-0.5 "+("admin"===d?"group":""),onMouseEnter:()=>p(t.id),onMouseLeave:()=>p(null),onClick:()=>{return e=t.id,s(e),void(c||"messages"===e&&f(!0));var e},style:{backgroundColor:n&&!y?"var(--bg-elevated)":"transparent",boxShadow:n&&!y?"0 0 0 1px var(--border-subtle)":"none"},children:[e.jsx("div",{className:"w-7 h-7 flex items-center justify-center overflow-visible flex-shrink-0",style:{color:"var(--text-primary)"},children:"messages"===t.id?e.jsx(i,{isHovered:n,isActive:a,unreadCount:l?o:0}):e.jsx(i,{isHovered:n,isActive:a})}),e.jsx("span",{className:"text-lg whitespace-nowrap overflow-hidden",style:{color:"var(--text-primary)",fontWeight:a?700:400,opacity:y?0:1,width:y?0:"auto",transition:"opacity 0.2s ease, width 0.3s ease, color 0.2s ease"},children:t.label})]},t.id)})}),"admin"!==d&&e.jsx("div",{className:"p-3 mb-4 mx-3 rounded-full cursor-pointer transition-all duration-200",onMouseEnter:e=>{y||(e.currentTarget.style.backgroundColor="var(--bg-elevated)")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},onClick:()=>{s("profile"),c||f(!1)},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:e.jsx("img",{src:v||Y,alt:"Profile",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",style:{opacity:y?0:1,width:y?0:"auto",transition:"opacity 0.2s ease, width 0.3s ease"},children:[e.jsx("div",{className:"font-semibold text-sm truncate",style:{color:"var(--text-primary)"},children:k}),e.jsxs("div",{className:"text-sm truncate",style:{color:"var(--text-primary)",opacity:.5},children:["@",b]})]})]})})]})}function ht({activeSection:r,setActiveSection:s,unreadCount:n=0,profilePicture:o,userType:a}){const[i,l]=t.useState(null),c="admin"===a?[{id:"applications"},{id:"alerts"},{id:"messages"},{id:"users"},{id:"data"}]:"business"===a?[{id:"home"},{id:"talent"},{id:"messages"},{id:"profile"}]:[{id:"home"},{id:"talent"},{id:"deals"},{id:"messages"},{id:"profile"}],d=t.useCallback(e=>{((e="light")=>{var t;if("undefined"!=typeof window&&"navigator"in window){if("vibrate"in navigator){const t="light"===e?10:"medium"===e?20:30;navigator.vibrate(t)}const r=window.webkit;(null==(t=null==r?void 0:r.messageHandlers)?void 0:t.haptic)&&r.messageHandlers.haptic.postMessage(e)}})("light"),s(e),"profile"===e&&window.scrollTo({top:0,behavior:"instant"})},[s]),u=t.useCallback(e=>{l(e)},[]),x=t.useCallback(()=>{l(null)},[]),m=(t,s)=>{const a="currentColor",i="3";switch(t){case"home":return e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7",children:[e.jsx("rect",{x:"14",y:"18",width:"20",height:"24",rx:"2",stroke:a,strokeWidth:i,fill:"none"}),e.jsx("path",{d:"M8 20L24 8L40 20",stroke:a,strokeWidth:i,strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M19 42V28C19 27.4477 19.4477 27 20 27H28C28.5523 27 29 27.4477 29 28V42",fill:a,style:{opacity:s?1:.3,transition:"opacity 0.3s ease"}}),e.jsx("ellipse",{cx:"24",cy:"38",rx:"7",ry:"9",fill:a,style:{opacity:s?.4:0,transition:"opacity 0.3s ease"}})]});case"explore":return e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7",children:[e.jsx("circle",{cx:"24",cy:"24",r:"18",stroke:a,strokeWidth:i,fill:"none"}),e.jsx("circle",{cx:"24",cy:"24",r:"14",stroke:a,strokeWidth:"1",strokeOpacity:"0.4",fill:"none"}),e.jsx("line",{x1:"24",y1:"6",x2:"24",y2:"9",stroke:a,strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("line",{x1:"24",y1:"39",x2:"24",y2:"42",stroke:a,strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("line",{x1:"6",y1:"24",x2:"9",y2:"24",stroke:a,strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("line",{x1:"39",y1:"24",x2:"42",y2:"24",stroke:a,strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("line",{x1:"37",y1:"11",x2:"35",y2:"13",stroke:a,strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"37",y1:"37",x2:"35",y2:"35",stroke:a,strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"11",y1:"37",x2:"13",y2:"35",stroke:a,strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"11",y1:"11",x2:"13",y2:"13",stroke:a,strokeWidth:"2",strokeLinecap:"round"}),e.jsxs("g",{style:{transform:s?"rotate(180deg)":"rotate(0deg)",transformOrigin:"24px 24px",transition:"transform 0.5s ease-in-out"},children:[e.jsx("path",{d:"M24 10L28 24H20L24 10Z",stroke:a,strokeWidth:"2.5",strokeLinejoin:"round",fill:s?a:"none"}),e.jsx("path",{d:"M24 38L28 24H20L24 38Z",stroke:a,strokeWidth:"2.5",strokeLinejoin:"round",fill:"none"}),e.jsx("circle",{cx:"24",cy:"24",r:"2.5",fill:a})]})]});case"talent":return e.jsx("div",{className:"relative",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7 overflow-visible",children:[[0,1,2,3,4].map(t=>{const r=8+8*t;return e.jsx("polygon",{points:`${r},2 ${r+1.2},5 ${r+4},5.5 ${r+2},7.5 ${r+2.5},11 ${r},9 ${r-2.5},11 ${r-2},7.5 ${r-4},5.5 ${r-1.2},5`,fill:"currentColor",style:{opacity:s?1:0,transform:s?"scale(1) translateY(0)":"scale(0.5) translateY(4px)",transformOrigin:`${r}px 6px`,transition:`all 0.3s ease ${.06*t}s`}},t)}),e.jsx("circle",{cx:"12",cy:"22",r:"5",stroke:"currentColor",strokeWidth:"2.5",fill:"none",style:{opacity:.5,transform:s?"translateX(-3px)":"translateX(0)",transition:"all 0.3s ease"}}),e.jsx("path",{d:"M4 44C4 37 7 32 12 32",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",fill:"none",style:{opacity:.5,transform:s?"translateX(-3px)":"translateX(0)",transition:"all 0.3s ease"}}),e.jsx("circle",{cx:"36",cy:"22",r:"5",stroke:"currentColor",strokeWidth:"2.5",fill:"none",style:{opacity:.5,transform:s?"translateX(3px)":"translateX(0)",transition:"all 0.3s ease"}}),e.jsx("path",{d:"M44 44C44 37 41 32 36 32",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",fill:"none",style:{opacity:.5,transform:s?"translateX(3px)":"translateX(0)",transition:"all 0.3s ease"}}),e.jsx("circle",{cx:"24",cy:"20",r:"6",stroke:"currentColor",strokeWidth:"2.5",fill:"none",style:{transform:s?"scale(1.05)":"scale(1)",transformOrigin:"24px 20px",transition:"transform 0.3s ease"}}),e.jsx("path",{d:"M12 44C12 35 17 30 24 30C31 30 36 35 36 44",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",fill:"none"})]})});case"deals":return e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7",children:[e.jsx("path",{d:"M6 12 H20 V18 C20 20.2 18.2 22 16 22 C13.8 22 12 20.2 12 18 V12 H6 V36 H20 V30 C20 27.8 18.2 26 16 26 C13.8 26 12 27.8 12 30 V36 H6 Z",stroke:a,strokeWidth:i,strokeLinejoin:"round",fill:"none",style:{transform:s?"translateX(2px)":"translateX(-3px)",transition:"transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)"}}),e.jsx("path",{d:"M42 12 H28 V18 C28 20.2 29.8 22 32 22 C34.2 22 36 20.2 36 18 V12 H42 V36 H28 V30 C28 27.8 29.8 26 32 26 C34.2 26 36 27.8 36 30 V36 H42 Z",stroke:a,strokeWidth:i,strokeLinejoin:"round",fill:"none",style:{transform:s?"translateX(-2px)":"translateX(3px)",transition:"transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)"}}),e.jsx("line",{x1:"24",y1:"12",x2:"24",y2:"36",stroke:a,strokeWidth:"2",strokeLinecap:"round",style:{opacity:s?.6:0,transition:"opacity 0.3s ease 0.2s"}})]});case"messages":return e.jsxs("div",{className:"relative w-7 h-7 flex items-center justify-center",children:[e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7",children:[e.jsx("path",{d:"M36 6H14C9.58172 6 6 9.58172 6 14V26C6 30.4183 9.58172 34 14 34H17L24 42L31 34H36C40.4183 34 44 30.4183 44 26V14C44 9.58172 40.4183 6 36 6Z",stroke:a,strokeWidth:i,fill:"none"}),e.jsx("path",{d:"M34 16H12C8.68629 16 6 18.6863 6 22V32C6 35.3137 8.68629 38 12 38H15L21 46L27 38H34C37.3137 38 40 35.3137 40 32V22C40 18.6863 37.3137 16 34 16Z",stroke:a,strokeWidth:i,fill:"var(--bg-sidebar)"}),e.jsxs("g",{style:{opacity:s?1:.7,transition:"opacity 0.3s ease"},children:[e.jsx("circle",{cx:"15",cy:"28",r:"2",fill:a}),e.jsx("circle",{cx:"23",cy:"28",r:"2",fill:a}),e.jsx("circle",{cx:"31",cy:"28",r:"2",fill:a})]})]}),"messages"!==r&&n>0&&e.jsxs("div",{className:"absolute -top-0.5 -right-0.5 flex items-center justify-center",children:[e.jsx("div",{className:"absolute w-3 h-3 rounded-full bg-red-500 animate-ping opacity-75"}),e.jsx("div",{className:"relative w-3 h-3 rounded-full bg-red-500 flex items-center justify-center shadow-lg"})]})]});case"profile":return e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden",style:{border:s?"2px solid var(--text-primary)":"2px solid var(--border-subtle)",transition:"border-color 0.2s ease",opacity:1},children:o?e.jsx("img",{src:o,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-4 h-4",children:[e.jsx("circle",{cx:"12",cy:"8",r:"4",fill:"currentColor"}),e.jsx("path",{d:"M4 20c0-4 4-6 8-6s8 2 8 6",fill:"currentColor"})]})})})});case"users":return e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7",children:[e.jsx("circle",{cx:"12",cy:"22",r:"5",stroke:a,strokeWidth:"2.5",fill:"none",style:{opacity:.5}}),e.jsx("path",{d:"M4 44C4 37 7 32 12 32",stroke:a,strokeWidth:"2.5",strokeLinecap:"round",fill:"none",style:{opacity:.5}}),e.jsx("circle",{cx:"36",cy:"22",r:"5",stroke:a,strokeWidth:"2.5",fill:"none",style:{opacity:.5}}),e.jsx("path",{d:"M44 44C44 37 41 32 36 32",stroke:a,strokeWidth:"2.5",strokeLinecap:"round",fill:"none",style:{opacity:.5}}),e.jsx("circle",{cx:"24",cy:"20",r:"6",stroke:a,strokeWidth:"2.5",fill:s?a:"none",style:{opacity:s?.3:1}}),e.jsx("path",{d:"M12 44C12 35 17 30 24 30C31 30 36 35 36 44",stroke:a,strokeWidth:"2.5",strokeLinecap:"round",fill:"none"})]});case"alerts":return e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7",children:[e.jsx("path",{d:"M8 24L40 12L32 36L24 28L8 24Z",stroke:a,strokeWidth:"2.5",strokeLinejoin:"round",fill:s?a:"none",style:{opacity:s?.2:1}}),e.jsx("path",{d:"M8 24L40 12L24 28",stroke:a,strokeWidth:"2.5",strokeLinejoin:"round"}),e.jsx("path",{d:"M24 28L32 36",stroke:a,strokeWidth:"2.5",strokeLinecap:"round"})]});case"settings":return e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7",children:[e.jsx("path",{d:"M24 6V10M24 38V42M42 24H38M10 24H6M37.5 10.5L34.5 13.5M13.5 34.5L10.5 37.5M37.5 37.5L34.5 34.5M13.5 13.5L10.5 10.5",stroke:a,strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("circle",{cx:"24",cy:"24",r:"8",stroke:a,strokeWidth:"2.5",fill:s?a:"none",style:{opacity:s?.2:1}})]});case"applications":return e.jsx("div",{className:"messages-icon-wrapper",children:e.jsx(Ze,{})});case"data":return e.jsx("div",{className:"messages-icon-wrapper",children:e.jsx(Qe,{})});case"admin-users":return e.jsx("div",{className:"messages-icon-wrapper",children:e.jsx(Je,{})});case"admin-alerts":return e.jsx("div",{className:"messages-icon-wrapper",children:e.jsx(Ke,{})});case"admin-messages":return e.jsx("div",{className:"messages-icon-wrapper",children:e.jsx(Ge,{})});default:return null}};return e.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-50",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)",borderTop:"1px solid var(--border-subtle)",backgroundColor:"var(--bg-sidebar)"},children:e.jsx("div",{className:"flex items-center justify-around py-2 px-2",children:c.map(t=>{const s=r===t.id||"profile"===t.id&&"settings"===r,n=i===t.id;return e.jsx("button",{onClick:()=>d(t.id),onTouchStart:()=>u(t.id),onTouchEnd:x,onTouchCancel:x,className:"flex flex-col items-center justify-center flex-1 py-1.5 transition-all duration-200 group "+(s?"":"hover:opacity-70 active:scale-[0.95]"),style:{color:"var(--text-primary)",height:"52px",transform:n?"scale(0.9)":"scale(1)",transition:"transform 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94)",WebkitTapHighlightColor:"transparent"},"aria-label":t.id,children:e.jsx("div",{className:"w-7 h-7 flex items-center justify-center",style:{transform:s?"scale(1.1)":"scale(1)",transition:"transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:m(t.id,s)})},t.id)})})})}function yt({isHovered:t=!1}){return e.jsxs("div",{className:"flex items-center justify-center pointer-events-none",children:[e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",children:[e.jsxs("g",{style:{transform:"rotate(0deg)",transformOrigin:"24px 8px",animation:t?"bellRing 0.6s ease-in-out":"none"},children:[e.jsx("path",{d:"M24 6C24 6 24 8 24 10C18 10 14 15 14 22V30L10 34H38L34 30V22C34 15 30 10 24 10C24 8 24 6 24 6Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinejoin:"round"}),e.jsx("path",{d:"M20 34C20 37 22 40 24 40C26 40 28 37 28 34",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})]}),e.jsx("circle",{cx:"24",cy:"24",r:"18",stroke:"currentColor",strokeWidth:"2",style:{opacity:0,transform:t?"scale(1.3)":"scale(1)",transformOrigin:"center",animation:t?"ripple1 0.8s ease-out":"none"}}),e.jsx("circle",{cx:"24",cy:"24",r:"18",stroke:"currentColor",strokeWidth:"2",style:{opacity:0,transform:t?"scale(1.4)":"scale(1)",transformOrigin:"center",animation:t?"ripple2 0.8s ease-out 0.15s":"none"}}),e.jsx("circle",{cx:"24",cy:"24",r:"18",stroke:"currentColor",strokeWidth:"1.5",style:{opacity:0,transform:t?"scale(1.5)":"scale(1)",transformOrigin:"center",animation:t?"ripple3 0.8s ease-out 0.3s":"none"}})]}),e.jsx("style",{children:"\n        @keyframes bellRing {\n          0% { transform: rotate(0deg); }\n          10% { transform: rotate(-15deg); }\n          30% { transform: rotate(12deg); }\n          50% { transform: rotate(-10deg); }\n          70% { transform: rotate(6deg); }\n          85% { transform: rotate(-3deg); }\n          100% { transform: rotate(0deg); }\n        }\n        \n        @keyframes ripple1 {\n          0% { \n            opacity: 0; \n            transform: scale(1); \n          }\n          20% { \n            opacity: 0.5; \n          }\n          100% { \n            opacity: 0; \n            transform: scale(1.3); \n          }\n        }\n        \n        @keyframes ripple2 {\n          0% { \n            opacity: 0; \n            transform: scale(1); \n          }\n          20% { \n            opacity: 0.4; \n          }\n          100% { \n            opacity: 0; \n            transform: scale(1.4); \n          }\n        }\n        \n        @keyframes ripple3 {\n          0% { \n            opacity: 0; \n            transform: scale(1); \n          }\n          20% { \n            opacity: 0.3; \n          }\n          100% { \n            opacity: 0; \n            transform: scale(1.5); \n          }\n        }\n      "})]})}const ft=({isHovered:t})=>e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",children:[e.jsxs("g",{className:"origin-center transition-all duration-[800ms] [transition-timing-function:cubic-bezier(0.4,0,0.2,1)] group-hover:scale-0 group-hover:opacity-0",children:[e.jsx("circle",{cx:"24",cy:"24",r:"8",stroke:"currentColor",strokeWidth:"2",fill:"currentColor",fillOpacity:"0.1"}),e.jsxs("g",{className:"origin-center transition-all duration-[800ms] [transition-timing-function:cubic-bezier(0.4,0,0.2,1)] group-hover:rotate-45",children:[e.jsx("line",{x1:"24",y1:"6",x2:"24",y2:"12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"24",y1:"36",x2:"24",y2:"42",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"6",y1:"24",x2:"12",y2:"24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"36",y1:"24",x2:"42",y2:"24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"11.3",y1:"11.3",x2:"15.5",y2:"15.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"32.5",y1:"32.5",x2:"36.7",y2:"36.7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"11.3",y1:"36.7",x2:"15.5",y2:"32.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"32.5",y1:"15.5",x2:"36.7",y2:"11.3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})]}),e.jsxs("g",{className:"origin-center translate-x-4 -translate-y-4 scale-0 opacity-0 transition-all duration-[800ms] [transition-timing-function:cubic-bezier(0.4,0,0.2,1)] group-hover:translate-x-0 group-hover:translate-y-0 group-hover:scale-100 group-hover:opacity-100",children:[e.jsx("path",{d:"M30 12 A 14 14 0 1 0 30 36 A 10 10 0 1 1 30 12Z",fill:"currentColor",fillOpacity:"0.15",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),e.jsx("path",{d:"M28 16 A 10 10 0 1 0 28 32 A 7 7 0 1 1 28 16Z",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeOpacity:"0.5"}),e.jsx("circle",{cx:"18",cy:"22",r:"2.5",fill:"currentColor",fillOpacity:"0.2"}),e.jsx("circle",{cx:"15",cy:"28",r:"2",fill:"currentColor",fillOpacity:"0.15"}),e.jsx("circle",{cx:"22",cy:"30",r:"1.5",fill:"currentColor",fillOpacity:"0.1"}),e.jsx("path",{d:"M26 20 Q 25 24 26 28",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeOpacity:"0.4"})]}),e.jsx("path",{d:"M8 14L9 11L10 14L13 15L10 16L9 19L8 16L5 15Z",fill:"currentColor",className:"scale-0 opacity-0 transition-all duration-[600ms] delay-300 [transition-timing-function:cubic-bezier(0.4,0,0.2,1)] group-hover:scale-100 group-hover:opacity-90"}),e.jsx("circle",{cx:"40",cy:"12",r:"2.5",fill:"currentColor",className:"scale-0 opacity-0 transition-all duration-[600ms] delay-[400ms] [transition-timing-function:cubic-bezier(0.4,0,0.2,1)] group-hover:scale-100 group-hover:opacity-70"}),e.jsx("circle",{cx:"42",cy:"36",r:"2",fill:"currentColor",className:"scale-0 opacity-0 transition-all duration-[600ms] delay-500ms [transition-timing-function:cubic-bezier(0.4,0,0.2,1)] group-hover:scale-100 group-hover:opacity-60"}),e.jsx("circle",{cx:"6",cy:"34",r:"1.5",fill:"currentColor",className:"scale-0 opacity-0 transition-all duration-[600ms] delay-550ms [transition-timing-function:cubic-bezier(0.4,0,0.2,1)] group-hover:scale-100 group-hover:opacity-50"})]});function gt({isHovered:t=!1}){return e.jsx("div",{className:"flex items-center justify-center overflow-visible",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 overflow-visible",children:[e.jsx("circle",{cx:"24",cy:"20",r:"14",fill:"currentColor",style:{opacity:t?.15:0,transform:t?"scale(1.3)":"scale(1)",transformOrigin:"24px 20px",filter:"blur(8px)",transition:"all 0.4s ease"}}),e.jsx("path",{d:"M24 6C17.4 6 12 11.4 12 18C12 22.4 14.4 26.2 18 28.4V34H30V28.4C33.6 26.2 36 22.4 36 18C36 11.4 30.6 6 24 6Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinejoin:"round",fill:"none",style:{filter:t?"drop-shadow(0 0 6px currentColor)":"none",opacity:t?.9:1,transition:"filter 0.3s ease, opacity 0.3s ease"}}),e.jsx("line",{x1:"18",y1:"38",x2:"30",y2:"38",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("line",{x1:"20",y1:"42",x2:"28",y2:"42",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M24 12L25.5 17H30.5L26.5 20L28 25L24 22L20 25L21.5 20L17.5 17H22.5L24 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round",fill:"none",style:{opacity:t?1:.5,transform:t?"scale(1.1)":"scale(1)",transformOrigin:"24px 18px",transition:"all 0.3s ease"}})]})})}function vt({isHovered:t=!1}){return e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",children:[e.jsx("rect",{x:"12",y:"8",width:"24",height:"32",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none",className:"opacity-50"}),e.jsxs("g",{className:"opacity-0 transition-all duration-[400ms] delay-[150ms] [transition-timing-function:cubic-bezier(0.4,0,0.2,1)] group-hover:opacity-100",children:[e.jsx("rect",{x:"14",y:"10",width:"6",height:"28",fill:"currentColor",fillOpacity:"0.4"}),e.jsx("rect",{x:"20",y:"12",width:"4",height:"24",fill:"currentColor",fillOpacity:"0.2"}),e.jsx("rect",{x:"24",y:"14",width:"2",height:"20",fill:"currentColor",fillOpacity:"0.1"})]}),e.jsxs("g",{className:"origin-left transition-all duration-[600ms] [transition-timing-function:cubic-bezier(0.4,0,0.2,1)] group-hover:[transform:rotateY(-50deg)]",style:{transformStyle:"preserve-3d"},children:[e.jsx("rect",{x:"14",y:"10",width:"20",height:"28",rx:"1",stroke:"currentColor",strokeWidth:"2",fill:"currentColor",fillOpacity:"0.08"}),e.jsx("circle",{cx:"30",cy:"26",r:"2",fill:"currentColor",className:"opacity-70"})]})]})}const kt=[{id:"personal",labelKey:"settings.personalInfo",IconComponent:function({isHovered:t=!1}){return e.jsxs("div",{className:"flex items-center justify-center pointer-events-none",children:[e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",children:[e.jsx("circle",{cx:"24",cy:"16",r:"6",stroke:"currentColor",strokeWidth:"2.5",fill:"none",style:{animation:t?"userHeadPulse 0.6s ease-in-out":"none"}}),e.jsx("path",{d:"M12 40C12 32 17 28 24 28C31 28 36 32 36 40",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",fill:"none",style:{animation:t?"userBodyPulse 0.6s ease-in-out":"none"}}),e.jsx("line",{x1:"8",y1:"8",x2:"40",y2:"8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",style:{opacity:0,animation:t?"scanDown 0.8s ease-out":"none"}}),e.jsx("line",{x1:"8",y1:"8",x2:"40",y2:"8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",style:{opacity:0,animation:t?"scanDown 0.8s ease-out 0.15s":"none"}}),e.jsx("circle",{cx:"24",cy:"24",r:"20",stroke:"currentColor",strokeWidth:"1.5",fill:"none",style:{opacity:0,animation:t?"userGlow 0.6s ease-in-out":"none"}}),e.jsx("circle",{cx:"18",cy:"16",r:"2",fill:"currentColor",style:{opacity:0,animation:t?"pointPulse 0.6s ease-in-out 0.2s":"none"}}),e.jsx("circle",{cx:"30",cy:"16",r:"2",fill:"currentColor",style:{opacity:0,animation:t?"pointPulse 0.6s ease-in-out 0.3s":"none"}})]}),e.jsx("style",{children:"\n        @keyframes userHeadPulse {\n          0% { \n            transform: scale(1); \n            opacity: 1;\n          }\n          50% { \n            transform: scale(1.15); \n            opacity: 1;\n          }\n          100% { \n            transform: scale(1); \n            opacity: 1;\n          }\n        }\n        \n        @keyframes userBodyPulse {\n          0% { \n            transform: scale(1); \n            opacity: 1;\n          }\n          50% { \n            transform: scale(1.08); \n            opacity: 1;\n          }\n          100% { \n            transform: scale(1); \n            opacity: 1;\n          }\n        }\n        \n        @keyframes scanDown {\n          0% { \n            opacity: 0; \n            transform: translateY(0); \n          }\n          20% { \n            opacity: 0.8; \n          }\n          80% {\n            opacity: 0.6;\n          }\n          100% { \n            opacity: 0; \n            transform: translateY(32px); \n          }\n        }\n        \n        @keyframes userGlow {\n          0% { \n            opacity: 0; \n            transform: scale(0.8); \n          }\n          50% { \n            opacity: 0.6; \n            transform: scale(1.05); \n          }\n          100% { \n            opacity: 0; \n            transform: scale(1.1); \n          }\n        }\n        \n        @keyframes pointPulse {\n          0% { \n            opacity: 0; \n            transform: scale(0); \n          }\n          30% { \n            opacity: 0.9; \n            transform: scale(1.5); \n          }\n          60% {\n            opacity: 0.6;\n            transform: scale(1.2);\n          }\n          100% { \n            opacity: 0; \n            transform: scale(0.8); \n          }\n        }\n      "})]})}},{id:"accounts",labelKey:"settings.connectedAccounts",IconComponent:function({isHovered:t=!1}){return e.jsx("div",{className:"flex items-center justify-center pointer-events-none",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",children:[e.jsx("path",{d:"M10 10H20V16C20 16 18 16 18 18C18 20 20 20 20 20V24H10V10Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinejoin:"round",style:{transform:t?"translate(-4px, -4px)":"translate(0, 0)",transition:"transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)"}}),e.jsx("path",{d:"M24 10H38V24H34C34 24 34 22 32 22C30 22 30 24 30 24H24V20C24 20 26 20 26 18C26 16 24 16 24 16V10Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinejoin:"round",style:{transform:t?"translate(4px, -4px)":"translate(0, 0)",transition:"transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.05s"}}),e.jsx("path",{d:"M10 28H20V34C20 34 18 34 18 36C18 38 20 38 20 38V42H10V28Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinejoin:"round",style:{transform:t?"translate(-4px, 4px)":"translate(0, 0)",transition:"transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s"}}),e.jsx("path",{d:"M24 28H30C30 28 30 26 32 26C34 26 34 28 34 28H38V42H24V38C24 38 26 38 26 36C26 34 24 34 24 34V28Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinejoin:"round",style:{transform:t?"translate(4px, 4px)":"translate(0, 0)",transition:"transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.15s"}})]})})}},{id:"accountType",labelKey:"settings.accountType",IconComponent:()=>e.jsx("div",{className:"group",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",children:[e.jsxs("g",{className:"transition-all duration-300 group-hover:rotate-[-5deg] group-hover:-translate-x-0.5 origin-center",children:[e.jsx("rect",{x:"5",y:"3",width:"9",height:"13",rx:"1",fill:"none",stroke:"currentColor",strokeWidth:"1.5",transform:"rotate(-10 9.5 9.5)"}),e.jsx("text",{x:"8.5",y:"11",fill:"currentColor",fontSize:"6",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"system-ui, sans-serif",transform:"rotate(-10 8.5 11)",children:"A"})]}),e.jsxs("g",{className:"transition-all duration-300 group-hover:rotate-[5deg] group-hover:translate-x-0.5 origin-center",children:[e.jsx("rect",{x:"10",y:"5",width:"9",height:"13",rx:"1",fill:"currentColor",fillOpacity:"0.08",stroke:"currentColor",strokeWidth:"1.5",transform:"rotate(10 14.5 11.5)"}),e.jsx("text",{x:"15.5",y:"13",fill:"currentColor",fontSize:"6",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"system-ui, sans-serif",transform:"rotate(10 15.5 13)",children:"B"})]})]})})},{id:"payout",labelKey:"settings.paymentMethod",IconComponent:function({isHovered:t=!1}){return e.jsxs("div",{className:"flex items-center justify-center pointer-events-none",children:[e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",style:{animation:t?"cardSpin 0.6s ease-in-out":"none"},children:[e.jsx("rect",{x:"6",y:"12",width:"36",height:"24",rx:"3",stroke:"currentColor",strokeWidth:"2.5"}),e.jsx("line",{x1:"6",y1:"20",x2:"42",y2:"20",stroke:"currentColor",strokeWidth:"2.5"}),e.jsx("rect",{x:"12",y:"26",width:"8",height:"6",rx:"1",stroke:"currentColor",strokeWidth:"2.5"}),e.jsx("line",{x1:"26",y1:"29",x2:"36",y2:"29",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeDasharray:"2 4"}),e.jsx("rect",{x:"-2",y:"12",width:"10",height:"24",fill:"url(#shimmer-credit)",style:{opacity:0,animation:t?"shimmerSweep 0.6s ease-out":"none"}}),e.jsx("rect",{x:"6",y:"12",width:"36",height:"24",rx:"3",stroke:"currentColor",strokeWidth:"3",fill:"none",style:{opacity:0,animation:t?"cardGlow 0.6s ease-in-out":"none"}}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"shimmer-credit",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0"}),e.jsx("stop",{offset:"50%",stopColor:"white",stopOpacity:"0.8"}),e.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})})]}),e.jsx("style",{children:"\n        @keyframes cardSpin {\n          0% { \n            transform: rotateY(0deg); \n          }\n          50% { \n            transform: rotateY(180deg) scale(1.1); \n          }\n          100% { \n            transform: rotateY(360deg); \n          }\n        }\n        \n        @keyframes shimmerSweep {\n          0% { \n            opacity: 0; \n            transform: translateX(0); \n          }\n          30% { \n            opacity: 0.7; \n          }\n          100% { \n            opacity: 0; \n            transform: translateX(50px); \n          }\n        }\n        \n        @keyframes cardGlow {\n          0% { \n            opacity: 0; \n            transform: scale(1); \n          }\n          50% { \n            opacity: 0.5; \n            transform: scale(1.15); \n          }\n          100% { \n            opacity: 0; \n            transform: scale(1); \n          }\n        }\n      "})]})}},{id:"display",labelKey:"settings.display",IconComponent:ft},{id:"languages",labelKey:"settings.languages",IconComponent:({isHovered:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",children:[e.jsxs("g",{className:"transition-all duration-500 ease-out opacity-80 group-hover:opacity-0",children:[e.jsx("line",{x1:"6",y1:"18",x2:"12",y2:"6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"18",y1:"18",x2:"12",y2:"6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"8",y1:"13",x2:"16",y2:"13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),e.jsxs("g",{className:"transition-all duration-500 ease-out opacity-0 group-hover:opacity-80",children:[e.jsx("line",{x1:"5",y1:"6",x2:"19",y2:"6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M12 10 Q9 13 6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"}),e.jsx("path",{d:"M12 10 Q15 13 18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"})]})]})},{id:"notifications",labelKey:"settings.notifications",IconComponent:yt},{id:"feedback",labelKey:"settings.sendFeedback",IconComponent:gt},{id:"guides",labelKey:"settings.guides",IconComponent:function({isHovered:t}){return e.jsx("div",{className:"relative w-5 h-5 flex items-center justify-center",style:{perspective:"200px"},children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",children:[e.jsx("rect",{x:"10",y:"8",width:"28",height:"32",rx:"2",stroke:"currentColor",strokeWidth:"2",strokeOpacity:"0.25",fill:"none",className:"opacity-0 transition-opacity duration-400 ease-in-out group-hover:opacity-100"}),e.jsxs("g",{className:"opacity-0 transition-opacity duration-400 ease-in-out group-hover:opacity-100",children:[e.jsx("line",{x1:"16",y1:"16",x2:"32",y2:"16",stroke:"currentColor",strokeWidth:"1.5",strokeOpacity:"0.35",strokeLinecap:"round"}),e.jsx("line",{x1:"16",y1:"22",x2:"28",y2:"22",stroke:"currentColor",strokeWidth:"1.5",strokeOpacity:"0.35",strokeLinecap:"round"}),e.jsx("line",{x1:"16",y1:"28",x2:"30",y2:"28",stroke:"currentColor",strokeWidth:"1.5",strokeOpacity:"0.35",strokeLinecap:"round"})]}),e.jsxs("g",{className:"transition-transform duration-400 ease-in-out group-hover:[transform:perspective(200px)_rotateY(-50deg)]",style:{transformOrigin:"10px 24px"},children:[e.jsx("rect",{x:"10",y:"8",width:"28",height:"32",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("line",{x1:"14",y1:"8",x2:"14",y2:"40",stroke:"currentColor",strokeWidth:"2"}),e.jsx("text",{x:"26",y:"28",fill:"currentColor",fontSize:"16",fontWeight:"600",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"system-ui, sans-serif",children:"?"}),e.jsx("path",{d:"M30 8V14L32 12L34 14V8",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeLinejoin:"round"})]})]})})}},{id:"logout",labelKey:"settings.logOut",IconComponent:vt}],bt=[{id:"display",labelKey:"settings.display",IconComponent:ft},{id:"notifications",labelKey:"settings.notifications",IconComponent:yt},{id:"feedback",label:"Feedback",IconComponent:gt},{id:"logout",labelKey:"settings.logOut",IconComponent:vt}];function jt({label:r,labelKey:s,IconComponent:n,onClick:o,isActive:a,showBorder:i=!0}){const[l,c]=t.useState(!1),{t:d}=A(),u=s?d(s):r||"";return e.jsxs("div",{onClick:o,onMouseEnter:e=>{c(!0),a||(e.currentTarget.style.backgroundColor="var(--bg-elevated)")},onMouseLeave:e=>{c(!1),a||(e.currentTarget.style.backgroundColor="")},className:"group flex items-center gap-4 px-4 py-4 cursor-pointer transition-colors "+(i?"border-b":""),style:{backgroundColor:a?"var(--bg-elevated)":void 0,color:"var(--text-primary)",...i?{borderColor:"var(--border-subtle)"}:{}},children:[e.jsx(n,{isHovered:l}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"text-[15px]",style:{color:"var(--text-primary)"},children:u})}),e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--text-primary)",opacity:.5},children:e.jsx("path",{d:"M9 18l6-6-6-6"})})]})}function wt({renderPersonalInfo:r,renderConnectedAccounts:s,renderAccountType:n,renderPayoutMethods:o,renderDisplay:a,renderLanguages:i,renderNotifications:l,renderSendFeedback:c,renderGuides:d,renderLogOut:u,isMobile:x=!1,onBack:m,userType:p,guideSubpage:h,guideArticle:y,setGuideSubpage:f,setGuideArticle:g}){const v=void 0!==h||void 0!==y,[k,b]=t.useState(v?"guides":"admin"===p?"display":"personal"),[j,w]=t.useState(""),[C,N]=t.useState(null),{t:_}=A();t.useEffect(()=>{(void 0!==h||void 0!==y)&&b("guides")},[h,y]);const L=()=>{switch(k){case"personal":return _("settings.personalInfo");case"accounts":return _("settings.connectedAccounts");case"accountType":return _("settings.accountType");case"payout":return _("settings.paymentMethod");case"display":return _("settings.display");case"languages":return _("settings.languages");case"notifications":return _("settings.notifications");case"feedback":return"admin"===p?"Feedback":_("settings.sendFeedback");case"guides":return _("settings.guides");case"logout":return _("settings.logOut");default:return""}},S=()=>e.jsx("div",{className:"w-5 h-5 flex-shrink-0",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[e.jsx("path",{d:"M12 28C12 20.268 18.268 14 26 14H22C29.732 14 36 20.268 36 28",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"}),e.jsx("rect",{x:"8",y:"26",width:"8",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"32",y:"26",width:"8",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"10",y:"28",width:"4",height:"8",rx:"1",fill:"currentColor",opacity:"0.3"}),e.jsx("rect",{x:"34",y:"28",width:"4",height:"8",rx:"1",fill:"currentColor",opacity:"0.3"})]})}),W=()=>e.jsx("div",{className:"w-5 h-5 flex-shrink-0",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[e.jsx("rect",{x:"14",y:"6",width:"20",height:"36",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"20",y:"9",width:"8",height:"2",rx:"1",fill:"currentColor",opacity:"0.4"}),e.jsx("rect",{x:"21",y:"38",width:"6",height:"2",rx:"1",fill:"currentColor",opacity:"0.4"}),e.jsxs("g",{className:"app app-1",children:[e.jsx("rect",{x:"16",y:"14",width:"10",height:"8",rx:"2",fill:"currentColor",opacity:"0.2"}),e.jsx("path",{d:"M20 16L23 18L20 20V16Z",fill:"currentColor",opacity:"0.8"})]}),e.jsxs("g",{className:"app app-2",children:[e.jsx("rect",{x:"26",y:"14",width:"8",height:"8",rx:"2",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.8"}),e.jsx("circle",{cx:"30",cy:"18",r:"2",stroke:"currentColor",strokeWidth:"1",fill:"none",opacity:"0.8"}),e.jsx("circle",{cx:"32.5",cy:"15.5",r:"0.8",fill:"currentColor",opacity:"0.6"})]})]})}),M=()=>e.jsx("div",{className:"w-5 h-5 flex-shrink-0",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[e.jsx("rect",{x:"6",y:"18",width:"36",height:"22",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M18 18V14C18 12.8954 18.8954 12 20 12H28C29.1046 12 30 12.8954 30 14V18",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{className:"lid",x:"6",y:"18",width:"36",height:"8",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"currentColor"}),e.jsx("rect",{className:"clasp",x:"21",y:"24",width:"6",height:"4",rx:"1",fill:"currentColor"})]})}),T=()=>{if(!p)return null;const t=(e=>{switch(null==e?void 0:e.toLowerCase()){case"artist":return{label:_("accountTypes.artist"),icon:S,color:"var(--text-primary)",bgColor:"var(--bg-elevated)",borderColor:"var(--border-default)"};case"creator":return{label:_("accountTypes.creator"),icon:W,color:"var(--text-primary)",bgColor:"var(--bg-elevated)",borderColor:"var(--border-default)"};case"brand":case"business":return{label:_("accountTypes.brand"),icon:M,color:"var(--text-primary)",bgColor:"var(--bg-elevated)",borderColor:"var(--border-default)"};default:return null}})(p);if(!t)return null;const r=t.icon;return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium border",style:{backgroundColor:t.bgColor,color:t.color,borderColor:t.borderColor},children:[e.jsx(r,{}),e.jsx("span",{children:t.label})]})},B=()=>{switch(k){case"personal":return r();case"accounts":return s();case"accountType":return n();case"payout":return o();case"display":return a();case"languages":return i();case"notifications":return l();case"feedback":return c();case"guides":return d?d():e.jsxs("div",{className:"px-4 py-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"},children:_("guides.title")}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:_("guides.comingSoon")})]});case"logout":return u();default:return null}};return x?C?e.jsxs("div",{className:"animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:()=>N(null),className:"p-2 -ml-2 rounded-full hover:bg-black/10 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-primary)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:L()})]}),B()]}):e.jsxs("div",{className:"animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:_("settings.title")}),m&&e.jsx("button",{onClick:m,className:"p-2 rounded-full hover:bg-black/10 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",style:{color:"var(--text-primary)",opacity:.6},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsxs("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",style:{color:"var(--text-primary)",opacity:.5},children:[e.jsx("circle",{cx:"11",cy:"11",r:"7"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),e.jsx("input",{type:"text",placeholder:_("settings.searchPlaceholder"),value:j,onChange:e=>w(e.target.value),className:"w-full border rounded-full py-3 pl-12 pr-4 focus:outline-none focus:border-[#3B82F6]",style:{backgroundColor:"transparent",borderColor:"var(--border-subtle)",color:"var(--text-primary)"},onFocus:e=>e.target.style.borderColor="var(--text-primary)",onBlur:e=>{e.target.style.borderColor="var(--border-subtle)"}})]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{backgroundColor:"transparent"},children:("admin"===p?bt:kt).map((t,r)=>e.jsx(jt,{labelKey:t.labelKey,label:t.label,IconComponent:t.IconComponent,onClick:()=>{b(t.id),N(t.id)},showBorder:r<("admin"===p?bt:kt).length-1},t.id))})]}):e.jsxs("div",{className:"flex h-[calc(100vh-2rem)] animate-fade-in",children:[e.jsxs("div",{className:"w-[380px] flex-shrink-0 border-r flex flex-col",style:{borderColor:"var(--border-subtle)"},children:[e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",style:{color:"var(--text-primary)"},children:_("settings.title")}),e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",style:{color:"var(--text-primary)",opacity:.5},children:[e.jsx("circle",{cx:"11",cy:"11",r:"7"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),e.jsx("input",{type:"text",placeholder:_("settings.searchPlaceholder"),value:j,onChange:e=>w(e.target.value),className:"w-full bg-transparent border rounded-full py-2.5 pl-10 pr-4 text-[15px] focus:outline-none focus:border-[#3B82F6]",style:{borderColor:"var(--border-subtle)",color:"var(--text-primary)"},onFocus:e=>e.target.style.borderColor="var(--text-primary)",onBlur:e=>{e.target.style.borderColor="var(--border-subtle)"}})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:("admin"===p?bt:kt).map((t,r)=>e.jsx(jt,{labelKey:t.labelKey,label:t.label,IconComponent:t.IconComponent,onClick:()=>b(t.id),isActive:k===t.id,showBorder:r<("admin"===p?bt:kt).length-1},t.id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:k&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b",style:{borderColor:"var(--border-subtle)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:L()}),e.jsx(T,{})]}),e.jsx("p",{className:"text-[15px] leading-relaxed",style:{color:"var(--text-primary)",opacity:.7},children:(()=>{switch(k){case"personal":return _("settings.personalInfoDesc");case"accounts":return _("settings.connectedAccountsDesc");case"accountType":return _("settings.accountTypeDesc");case"payout":return _("settings.paymentMethodDesc");case"display":return _("settings.displayDesc");case"languages":return _("settings.languagesDesc");case"notifications":return _("settings.notificationsDesc");case"feedback":return"admin"===p?"View activity and feedback tools.":_("settings.sendFeedbackDesc");case"guides":return _("settings.guidesDesc");case"logout":return _("settings.logOutDesc");default:return""}})()})]}),e.jsx("div",{className:"p-6",children:B()})]})})]})}function Ct({isActive:t,onToggle:r,backgroundTheme:s="dark",disabled:n=!1,size:o="md"}){const a={sm:t?"translate-x-4":"translate-x-0.5",md:t?"translate-x-[26px]":"translate-x-1",lg:t?"translate-x-7":"translate-x-1"};return e.jsx("button",{onClick:r,disabled:n,className:`relative inline-flex ${{sm:"h-5 w-9",md:"h-6 w-11",lg:"h-7 w-13"}[o]} items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-white/20 ${t?(()=>{switch(s){case"light":return"bg-slate-700";case"grey":return"bg-zinc-800";case"rose":return"bg-rose-950";case"white":return"bg-blue-500";default:return"bg-zinc-900"}})():"white"===s?"bg-gray-300":"bg-gray-600"} ${n?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,style:{border:"none"},children:e.jsx("span",{className:`inline-block ${{sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"}[o]} transform rounded-full bg-white transition-transform duration-200 ${a[o]}`})})}export{pt as C,Y as D,X as E,Xe as M,wt as S,Ct as T,ze as U,Te as a,ht as b,D as c,Fe as d,Ye as e,He as f,Oe as g,qe as h,Ue as i,Ee as j,Be as k,Ie as l,A as u};
