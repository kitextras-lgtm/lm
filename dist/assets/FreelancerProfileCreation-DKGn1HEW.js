import{j as e}from"./spline-OfIZ-5GP.js";import{u as s,r}from"./react-vendor-ClpDbY_3.js";import{d as t,S as a,a as l,s as o}from"./index-BeWpAAxC.js";import{X as i}from"./x-9eSzjIWe.js";import{c as n}from"./createLucideIcon-DkpiXdJH.js";import{C as d}from"./check-Bt1Gg7zJ.js";import{T as c}from"./trash-2-CTJu5OiJ.js";import{A as u}from"./alert-circle-BC14ilB7.js";import"./supabase-Dq2D-Wrk.js";
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=n("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),f=n("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),p=n("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function x({onClose:o}){const n=s(),{updateProfileData:m}=t(),[x,y]=r.useState("idle"),[h,g]=r.useState(null),[b,v]=r.useState(0),[j,k]=r.useState(""),[w,N]=r.useState(null),C=r.useRef(null),I=r.useCallback(e=>{return e.name.toLowerCase().endsWith(".pdf")?e.type&&"application/pdf"!==e.type?"LinkedIn profiles must be saved as PDF. Please export your profile as a PDF first.":e.size>5242880?`File exceeds 5MB. Your file is ${s=e.size,s<1024?`${s} B`:s<1048576?`${(s/1024).toFixed(1)} KB`:`${(s/1048576).toFixed(1)} MB`}.`:0===e.size?"File is empty. Please choose a valid file.":null:"LinkedIn profiles must be saved as PDF. Please export your profile as a PDF first.";var s},[]),F=r.useCallback(async e=>{y("uploading"),v(0),k("");try{const s=localStorage.getItem("verifiedUserId");if(!s)throw new Error("You must be logged in to upload files.");v(10);const r=await fetch(`${a}/functions/v1/profile-upload/init`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({userId:s,uploadType:"linkedin_pdf",fileName:e.name,fileSize:e.size,mimeType:e.type||"application/pdf"})}),t=await r.json();if(!r.ok||!t.success)throw new Error(t.message||"Failed to initialize upload");N(t.uploadId),v(30),await new Promise((s,r)=>{const a=new XMLHttpRequest;a.open("PUT",t.signedUrl,!0),a.setRequestHeader("Content-Type",e.type||"application/pdf"),a.upload.onprogress=e=>{if(e.lengthComputable){const s=30+Math.round(e.loaded/e.total*50);v(s)}},a.onload=()=>{a.status>=200&&a.status<300?s(!0):r(new Error(`Upload failed with status ${a.status}`))},a.onerror=()=>r(new Error("Network error during upload")),a.onabort=()=>r(new Error("Upload was cancelled")),a.send(e)}),v(85);const o=await fetch(`${a}/functions/v1/profile-upload/complete`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({uploadId:t.uploadId,userId:s})}),i=await o.json();if(!o.ok||!i.success)throw new Error(i.message||"Server validation failed");v(100),y("ready"),m({uploadedFileName:e.name,uploadedFileSize:e.size,uploadType:"linkedin_pdf"})}catch(s){k(s instanceof Error?s.message:"Upload failed. Please try again."),y("error")}},[]),S=r.useCallback(e=>{y("validating"),k("");const s=I(e);if(s)return k(s),void y("error");g(e),F(e)},[I,F]),T="idle"===x||"error"===x;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 overflow-hidden",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(6px)",animation:"fadeIn 0.18s ease-out forwards"},onClick:o,children:e.jsxs("div",{className:"relative rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-modal-in",style:{backgroundColor:"var(--bg-card)",border:"1px solid rgba(255, 255, 255, 0.1)",scrollbarWidth:"none"},onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:o,className:"absolute top-6 right-6 w-8 h-8 flex items-center justify-center rounded-full transition-all duration-200",style:{backgroundColor:"rgba(255, 255, 255, 0.05)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",children:e.jsx(i,{className:"w-5 h-5",style:{color:"#666666"}})}),e.jsx("h2",{className:"text-3xl font-normal mb-6",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"Upload your LinkedIn profile"}),e.jsx("p",{className:"text-base mb-6",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#cccccc"},children:"Step 1: if you haven't already, save your LinkedIn profile as a PDF. Here's how:"}),e.jsx("div",{className:"rounded-lg p-6 mb-6",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#b0bec5"},children:e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:"#ffffff"},children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",style:{color:"#78909c"},children:[e.jsx("rect",{x:"4",y:"8",width:"16",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("circle",{cx:"12",cy:"14",r:"2",fill:"currentColor"}),e.jsx("path",{d:"M8 8V6a4 4 0 0 1 8 0v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"Your Name"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{className:"px-4 py-1.5 rounded-full text-sm font-medium",style:{backgroundColor:"#2563eb",color:"#ffffff",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Open to"}),e.jsx("button",{className:"px-4 py-1.5 rounded-full text-sm font-medium",style:{backgroundColor:"rgba(37, 99, 235, 0.1)",border:"1px solid #2563eb",color:"#2563eb",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Add section"}),e.jsx("button",{className:"px-4 py-1.5 rounded-full text-sm font-medium",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#cccccc",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"More"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:"#2563eb"},children:[e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 12h8M12 8v8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),e.jsx("span",{style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Share profile in a message"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:"#2563eb"},children:[e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7 17L17 7M17 7H7M17 7v10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),e.jsx("span",{style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",fontWeight:600},children:"Save to PDF"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:"#2563eb"},children:[e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M8 8h8M8 12h8M8 16h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),e.jsx("span",{style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Build a resume"})]})]})]})]})}),e.jsx("p",{className:"text-base mb-4",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#cccccc"},children:"Step 2: come back here to upload it."}),T&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"px-6 py-4 rounded-lg text-left flex items-center gap-3 transition-all duration-200 hover:brightness-95 cursor-pointer",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"2px solid var(--border-subtle)",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onClick:()=>{var e;null==(e=C.current)||e.click()},children:[e.jsx(p,{className:"w-5 h-5",style:{color:"var(--text-primary)"}}),e.jsx("span",{className:"font-medium",style:{color:"var(--text-primary)",fontSize:"16px"},children:"Upload your saved LinkedIn PDF"})]})}),"validating"===x&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"rounded-lg px-6 py-5 flex items-center gap-3",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:"var(--text-primary)",borderTopColor:"transparent"}}),e.jsx("span",{className:"text-sm",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#cccccc"},children:"Validating file..."})]})}),"uploading"===x&&h&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"rounded-lg px-6 py-5",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(f,{className:"w-5 h-5 flex-shrink-0",style:{color:"var(--text-primary)"}}),e.jsx("span",{className:"text-sm truncate flex-1",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:h.name}),e.jsxs("span",{className:"text-xs flex-shrink-0",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"var(--text-primary)"},children:[b,"%"]})]}),e.jsx("div",{className:"h-1.5 rounded-full",style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},children:e.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{backgroundColor:"var(--text-primary)",width:`${b}%`}})})]})}),("uploaded"===x||"ready"===x)&&h&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"rounded-lg px-6 py-4 flex items-center gap-3",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx(f,{className:"w-5 h-5 flex-shrink-0",style:{color:"var(--text-primary)"}}),e.jsx("span",{className:"text-sm truncate flex-1",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:h.name}),e.jsx(d,{className:"w-5 h-5 flex-shrink-0",style:{color:"var(--text-primary)"}}),e.jsx("button",{onClick:async()=>{if(w)try{const e=localStorage.getItem("verifiedUserId");await fetch(`${a}/functions/v1/profile-upload/delete`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({uploadId:w,userId:e})})}catch(e){}g(null),N(null),v(0),k(""),y("idle")},className:"flex-shrink-0 p-1 rounded transition-all duration-200",style:{color:"var(--text-primary)"},onMouseEnter:e=>e.currentTarget.style.color="#ef4444",onMouseLeave:e=>e.currentTarget.style.color="var(--text-primary)",children:e.jsx(c,{className:"w-5 h-5"})})]})}),"error"===x&&j&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"rounded-lg px-5 py-3 flex items-center gap-3",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[e.jsx(u,{className:"w-5 h-5 flex-shrink-0",style:{color:"#ef4444"}}),e.jsx("span",{className:"text-sm flex-1",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#fca5a5"},children:j}),e.jsx("button",{onClick:()=>{k(""),y("idle")},className:"text-xs font-medium px-3 py-1 rounded",style:{color:"#fca5a5",backgroundColor:"rgba(239, 68, 68, 0.15)"},children:"Retry"})]})}),e.jsx("input",{ref:C,type:"file",accept:".pdf",onChange:e=>{e.target.files&&e.target.files[0]&&S(e.target.files[0]),C.current&&(C.current.value="")},className:"hidden"}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{"ready"===x&&n("/freelancer-category-selection")},disabled:"ready"!==x,className:"px-8 py-3 rounded-lg font-medium text-base transition-all duration-200",style:{backgroundColor:"ready"===x?"#ffffff":"rgba(255, 255, 255, 0.08)",color:"ready"===x?"#000000":"#666666",fontFamily:"Inter, system-ui, -apple-system, sans-serif",cursor:"ready"===x?"pointer":"not-allowed"},children:"Continue"})})]})})}const y=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/rtf","text/rtf"],h=[".pdf",".doc",".docx",".rtf"];function g({onClose:n}){const m=s(),{profileData:p,updateProfileData:x}=t(),[g,b]=r.useState("idle"),[v,j]=r.useState(null),[k,w]=r.useState(0),[N,C]=r.useState(""),[I,F]=r.useState(null),[S,T]=r.useState(null),L=r.useRef(null);r.useEffect(()=>{(async()=>{if(p.uploadedFileName)return T(p.uploadedFileName),void b("ready");const e=localStorage.getItem("verifiedUserId");if(e)try{const{data:s,error:r}=await o.from("resumes").select("file_name").eq("user_id",e).order("created_at",{ascending:!1}).limit(1).single();!r&&(null==s?void 0:s.file_name)&&(T(s.file_name),b("ready"))}catch(s){}})()},[]);const M=r.useCallback(e=>{const s=function(e){const s=e.lastIndexOf(".");return s>=0?e.slice(s).toLowerCase():""}(e.name);return h.includes(s)&&(y.includes(e.type)||""===e.type)?e.size>5242880?`File exceeds 5MB. Your file is ${r=e.size,r<1024?`${r} B`:r<1048576?`${(r/1024).toFixed(1)} KB`:`${(r/1048576).toFixed(1)} MB`}.`:0===e.size?"File is empty. Please choose a valid file.":null:"That file type isn't supported. Please use PDF, DOC, DOCX, or RTF.";var r},[]),P=r.useCallback(async e=>{b("uploading"),w(0),C("");try{const s=localStorage.getItem("verifiedUserId");if(!s)throw new Error("You must be logged in to upload files.");w(10);const r=await fetch(`${a}/functions/v1/profile-upload/init`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({userId:s,uploadType:"resume",fileName:e.name,fileSize:e.size,mimeType:e.type||"application/octet-stream"})}),t=await r.json();if(!r.ok||!t.success)throw new Error(t.message||"Failed to initialize upload");F(t.uploadId),w(30);if(!(await new Promise((s,r)=>{const a=new XMLHttpRequest;a.open("PUT",t.signedUrl,!0),a.setRequestHeader("Content-Type",e.type||"application/octet-stream"),a.upload.onprogress=e=>{if(e.lengthComputable){const s=30+Math.round(e.loaded/e.total*50);w(s)}},a.onload=()=>{a.status>=200&&a.status<300?s(!0):r(new Error(`Upload failed with status ${a.status}`))},a.onerror=()=>r(new Error("Network error during upload")),a.onabort=()=>r(new Error("Upload was cancelled")),a.send(e)})))throw new Error("Upload failed");w(85);const i=await fetch(`${a}/functions/v1/profile-upload/complete`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({uploadId:t.uploadId,userId:s})}),n=await i.json();if(!i.ok||!n.success)throw new Error(n.message||"Server validation failed");w(90);const d=t.storagePath,{data:c,error:u}=await o.from("resumes").insert({user_id:s,file_key:d,file_name:e.name,mime_type:e.type||"application/octet-stream",size_bytes:e.size,status:"UPLOADED"}).select("id").single();if(u||!c)throw new Error("Failed to save resume information");const m=c.id,{error:f}=await o.from("users").update({resume_url:d}).eq("id",s);x({uploadedFileName:e.name,uploadedFileSize:e.size,uploadType:"resume",resumeId:m,parsingStatus:"failed"}),w(100),b("ready")}catch(s){C(s instanceof Error?s.message:"Upload failed. Please try again."),b("error")}},[x]),z=r.useCallback(e=>{b("validating"),C("");const s=M(e);if(s)return C(s),void b("error");j(e),P(e)},[M,P]),B="idle"===g||"dragging"===g||"error"===g;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 overflow-hidden",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(6px)",animation:"fadeIn 0.18s ease-out forwards"},onClick:n,children:e.jsxs("div",{className:"relative rounded-2xl p-8 max-w-2xl w-full animate-modal-in",style:{backgroundColor:"var(--bg-card)",border:"1px solid rgba(255, 255, 255, 0.1)"},onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:n,className:"absolute top-6 right-6 w-8 h-8 flex items-center justify-center rounded-full transition-all duration-200",style:{backgroundColor:"rgba(255, 255, 255, 0.05)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",children:e.jsx(i,{className:"w-5 h-5",style:{color:"#666666"}})}),e.jsx("h2",{className:"text-3xl font-normal mb-3",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"Add your resume"}),e.jsx("p",{className:"text-base mb-8",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#cccccc"},children:"Use a PDF, Word doc, or rich text file – make sure it's 5MB or less."}),B&&e.jsx("div",{className:"rounded-lg p-12 mb-8 transition-all duration-200 cursor-pointer",style:{border:"dragging"===g?"2px solid #94A3B8":"2px dashed rgba(255, 255, 255, 0.2)",backgroundColor:"dragging"===g?"rgba(148, 163, 184, 0.1)":"rgba(255, 255, 255, 0.03)"},onDragOver:e=>{e.preventDefault(),"idle"!==g&&"error"!==g||b("dragging")},onDragLeave:e=>{e.preventDefault(),"dragging"===g&&b("idle")},onDrop:e=>{e.preventDefault(),e.dataTransfer.files&&e.dataTransfer.files[0]?z(e.dataTransfer.files[0]):b("idle")},onClick:()=>{var e;null==(e=L.current)||e.click()},children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("svg",{viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-32 h-32",children:[e.jsx("rect",{x:"30",y:"20",width:"50",height:"70",rx:"4",fill:"#f1f5f9",stroke:"#94A3B8",strokeWidth:"2"}),e.jsxs("g",{transform:"translate(38, 32)",children:[e.jsx("circle",{cx:"0",cy:"0",r:"6",fill:"#94A3B8"}),e.jsx("path",{d:"M -2 0 L -1 1 L 2 -2",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),e.jsxs("g",{transform:"translate(38, 48)",children:[e.jsx("circle",{cx:"0",cy:"0",r:"6",fill:"#94A3B8"}),e.jsx("path",{d:"M -2 0 L -1 1 L 2 -2",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),e.jsx("line",{x1:"50",y1:"32",x2:"70",y2:"32",stroke:"#94A3B8",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"50",y1:"38",x2:"65",y2:"38",stroke:"#94A3B8",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("line",{x1:"50",y1:"48",x2:"70",y2:"48",stroke:"#94A3B8",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"50",y1:"54",x2:"65",y2:"54",stroke:"#94A3B8",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("line",{x1:"38",y1:"64",x2:"72",y2:"64",stroke:"#cccccc",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("line",{x1:"38",y1:"70",x2:"65",y2:"70",stroke:"#cccccc",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("line",{x1:"38",y1:"76",x2:"70",y2:"76",stroke:"#cccccc",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsxs("g",{transform:"translate(90, 75)",children:[e.jsx("circle",{cx:"0",cy:"-8",r:"6",fill:"#ff9800"}),e.jsx("path",{d:"M -8 8 Q -8 0 0 0 Q 8 0 8 8",fill:"#ff9800"})]})]})}),e.jsxs("p",{className:"text-base",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#cccccc"},children:["Drag and drop or"," ",e.jsx("span",{className:"font-medium underline",style:{color:"var(--text-primary)"},children:"choose file"})]})]})}),"uploading"===g&&v&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"rounded-lg px-6 py-5",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(f,{className:"w-5 h-5 flex-shrink-0",style:{color:"var(--text-primary)"}}),e.jsx("span",{className:"text-sm truncate flex-1",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:v.name}),e.jsxs("span",{className:"text-xs flex-shrink-0",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"var(--text-primary)"},children:[k,"%"]})]}),e.jsx("div",{className:"h-1.5 rounded-full",style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},children:e.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{backgroundColor:"var(--text-primary)",width:`${k}%`}})})]})}),"validating"===g&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"rounded-lg px-6 py-5 flex items-center gap-3",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:"var(--text-primary)",borderTopColor:"transparent"}}),e.jsx("span",{className:"text-sm",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#cccccc"},children:"Validating file..."})]})}),("uploaded"===g||"ready"===g)&&(v||S)&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"rounded-lg px-6 py-4 flex items-center gap-3",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx(f,{className:"w-5 h-5 flex-shrink-0",style:{color:"var(--text-primary)"}}),e.jsx("span",{className:"text-sm truncate flex-1",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:(null==v?void 0:v.name)||S}),e.jsx(d,{className:"w-5 h-5 flex-shrink-0",style:{color:"var(--text-primary)"}}),e.jsx("button",{onClick:async()=>{if(I)try{const e=localStorage.getItem("verifiedUserId");await fetch(`${a}/functions/v1/profile-upload/delete`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({uploadId:I,userId:e})})}catch(s){}const e=localStorage.getItem("verifiedUserId");e&&await o.from("users").update({resume_url:null}).eq("id",e),j(null),T(null),F(null),w(0),C(""),b("idle"),x({uploadedFileName:void 0,uploadedFileSize:void 0,resumeId:void 0,draftId:void 0,parsingStatus:"idle"})},className:"flex-shrink-0 p-1 rounded transition-all duration-200",style:{color:"var(--text-primary)"},onMouseEnter:e=>e.currentTarget.style.color="#ef4444",onMouseLeave:e=>e.currentTarget.style.color="var(--text-primary)",children:e.jsx(c,{className:"w-5 h-5"})})]})}),"error"===g&&N&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"rounded-lg px-5 py-3 flex items-center gap-3",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[e.jsx(u,{className:"w-5 h-5 flex-shrink-0",style:{color:"#ef4444"}}),e.jsx("span",{className:"text-sm flex-1",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#fca5a5"},children:N}),e.jsx("button",{onClick:()=>{C(""),b("idle")},className:"text-xs font-medium px-3 py-1 rounded",style:{color:"#fca5a5",backgroundColor:"rgba(239, 68, 68, 0.15)"},children:"Retry"})]})}),e.jsx("input",{ref:L,type:"file",accept:".pdf,.doc,.docx,.rtf",onChange:e=>{e.target.files&&e.target.files[0]&&z(e.target.files[0]),L.current&&(L.current.value="")},className:"hidden"}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{"ready"===g&&m("/freelancer-category-selection")},disabled:"ready"!==g,className:"px-8 py-3 rounded-lg font-medium text-base transition-all duration-200",style:{backgroundColor:"ready"===g?"#ffffff":"rgba(255, 255, 255, 0.08)",color:"ready"===g?"#000000":"#666666",fontFamily:"Inter, system-ui, -apple-system, sans-serif",cursor:"ready"===g?"pointer":"not-allowed"},children:"Continue"})})]})})}function b(){const t=s(),[a,l]=r.useState(!1),[o,i]=r.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12",style:{background:"#000000",backgroundImage:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E\")"},children:e.jsxs("div",{className:"max-w-2xl w-full",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"text-sm mb-2",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"var(--text-primary)"},children:"1/10"}),e.jsx("div",{className:"h-1 rounded-full",style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},children:e.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{backgroundColor:"var(--text-primary)",width:"10%"}})})]}),e.jsx("h1",{className:"text-4xl md:text-5xl font-normal mb-3",style:{fontFamily:"Fraunces, serif",color:"#ffffff"},children:"How would you like to tell us about yourself?"}),e.jsx("p",{className:"text-base mb-12",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#cccccc"},children:"We need to get a sense of your education, experience and skills. It's quickest to import your information — you can edit it before your profile goes live."}),e.jsxs("div",{children:[e.jsxs("div",{className:"space-y-3 mb-12",children:[e.jsxs("button",{onClick:()=>l(!0),className:"w-full px-6 py-4 rounded-lg text-left flex items-center gap-3 transition-all duration-200 hover:brightness-95",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[e.jsx(m,{className:"w-5 h-5",style:{color:"var(--text-primary)"}}),e.jsx("span",{className:"font-medium",style:{color:"var(--text-primary)",fontSize:"16px"},children:"Import from LinkedIn"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"w-full px-6 py-4 rounded-lg text-left flex items-center gap-3 transition-all duration-200 hover:brightness-95",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[e.jsx(p,{className:"w-5 h-5",style:{color:"var(--text-primary)"}}),e.jsx("span",{className:"font-medium",style:{color:"var(--text-primary)",fontSize:"16px"},children:"Upload your resume"})]})]}),e.jsx("button",{onClick:()=>t(-1),className:"px-6 py-3 rounded-lg font-medium text-base transition-all duration-200",style:{backgroundColor:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#ffffff",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"Back"})]})]})}),a&&e.jsx(x,{onClose:()=>l(!1)}),o&&e.jsx(g,{onClose:()=>i(!1)})]})}export{b as FreelancerProfileCreation};
