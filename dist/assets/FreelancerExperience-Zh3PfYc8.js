import{j as e}from"./spline-OfIZ-5GP.js";import{u as t,r}from"./react-vendor-ClpDbY_3.js";import{P as s,C as a}from"./CustomDropdown-Bp0tpfQX.js";import{d as l,s as o}from"./index-DZ9Knzqs.js";import{P as n}from"./plus-DTM3VMsY.js";import{C as i}from"./chevron-left-e436A-jR.js";import{C as c}from"./chevron-right-CFt0xrlA.js";import{c as d}from"./createLucideIcon-DkpiXdJH.js";import{T as m}from"./trash-2-CTJu5OiJ.js";import{X as f}from"./x-9eSzjIWe.js";import"./chevron-down-B3Pw4B6H.js";import"./supabase-Dq2D-Wrk.js";
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=d("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),y=d("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),p=["","January","February","March","April","May","June","July","August","September","October","November","December"];
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function x(e){const t=e.startMonth&&e.startYear?`${p[e.startMonth]} ${e.startYear}`:e.startYear?`${e.startYear}`:"",r=e.isCurrent?"Present":e.endMonth&&e.endYear?`${p[e.endMonth]} ${e.endYear}`:e.endYear?`${e.endYear}`:"";return t||r?r?`${t} - ${r}`:t:""}const b={title:"",company:"",locationCity:"",locationCountry:"",employmentType:"",startMonth:void 0,startYear:void 0,endMonth:void 0,endYear:void 0,isCurrent:!1,description:"",needsReview:!1};function g(){const d=t(),{profileData:g,updateProfileData:h}=l(),[v,j]=r.useState(g.workExperiences||[]),[C,k]=r.useState(null),[N,w]=r.useState(!1),[I,F]=r.useState(!1),M=r.useRef(null),[E,T]=r.useState(!1),[_,S]=r.useState(!1),[Y,L]=r.useState(!1),[D,$]=r.useState(null);r.useEffect(()=>{(async()=>{L(!0),$(null);try{const e=localStorage.getItem("verifiedUserId");if(!e)throw new Error("User not authenticated");let t=g.draftId;if(!g.resumeId||!t){const{data:r,error:s}=await o.from("users").select("resume_url").eq("id",e).maybeSingle();if(s);else if(null==r?void 0:r.resume_url){const{data:s,error:a}=await o.from("resumes").select("id").eq("user_id",e).eq("file_key",r.resume_url).order("created_at",{ascending:!1}).limit(1).single();if(!a&&s){const{data:e,error:r}=await o.from("profile_drafts").select("id").eq("source_resume_id",s.id).order("created_at",{ascending:!1}).limit(1).single();!r&&e&&(t=e.id,h({resumeId:s.id,draftId:e.id}))}}}if(!t)return void L(!1);const{data:r,error:s}=await o.from("draft_work_experiences").select("*").eq("draft_id",t).order("sort_order",{ascending:!0});if(s)throw s;if(r&&r.length>0){const e=r.map(e=>({id:e.id,title:e.title,company:e.company,locationCity:e.location_city,locationCountry:e.location_country,employmentType:e.employment_type,startMonth:e.start_month,startYear:e.start_year,endMonth:e.end_month,endYear:e.end_year,isCurrent:e.is_current,description:e.description,sourceSnippet:e.source_snippet,confidenceJson:e.confidence_json,needsReview:e.needs_review}));j(e),h({workExperiences:e})}}catch(e){$(e instanceof Error?e.message:"Failed to load experiences")}finally{L(!1)}})()},[g.draftId]);const A=()=>{const e=M.current;e&&(T(e.scrollLeft>0),S(e.scrollLeft+e.clientWidth<e.scrollWidth-1))};r.useEffect(()=>(A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)),[v]);const U=e=>{const t=M.current;if(!t)return;t.scrollBy({left:"left"===e?-340:340,behavior:"smooth"}),setTimeout(A,350)},W=()=>{k({id:crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,9)}`,...b}),F(!0),w(!0)},q=()=>{w(!1),k(null)},B=(e,t)=>{C&&k({...C,[e]:t})},J=Array.from({length:50},(e,t)=>(new Date).getFullYear()-t);return e.jsxs("div",{className:"min-h-screen flex items-center justify-center px-4 py-12",style:{background:"#000000",backgroundImage:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E\")"},children:[e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"text-sm mb-2",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"var(--text-primary)"},children:"5/10"}),e.jsx("div",{className:"h-1 rounded-full",style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},children:e.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{backgroundColor:"var(--text-primary)",width:"50%"}})})]}),e.jsx("h1",{className:"text-4xl md:text-5xl font-normal mb-3",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"Here's what you've told us about your experience â€” any more to add?"}),e.jsx("p",{className:"text-base mb-10",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#cccccc"},children:"The more you tell us, the better: freelancers who've added their work experience are twice as likely to win work."}),e.jsxs("div",{className:"relative mb-12",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:W,className:"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200",style:{border:"1px solid rgba(255, 255, 255, 0.3)",backgroundColor:"transparent",color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:e.jsx(n,{className:"w-5 h-5"})}),E&&e.jsx("button",{onClick:()=>U("left"),className:"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200",style:{border:"1px solid rgba(255, 255, 255, 0.3)",backgroundColor:"transparent",color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:e.jsx(i,{className:"w-5 h-5"})}),_&&e.jsx("button",{onClick:()=>U("right"),className:"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200",style:{border:"1px solid rgba(255, 255, 255, 0.3)",backgroundColor:"transparent",color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:e.jsx(c,{className:"w-5 h-5"})})]}),Y?e.jsx("div",{className:"rounded-xl p-8 text-center",style:{backgroundColor:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:"var(--text-primary)",borderTopColor:"transparent"}}),e.jsx("p",{className:"text-base",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#cccccc"},children:"Loading your experience from resume..."})]})}):D?e.jsxs("div",{className:"rounded-xl p-8 text-center",style:{backgroundColor:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[e.jsx("p",{className:"text-base mb-4",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#fca5a5"},children:D}),e.jsx("button",{onClick:W,className:"px-4 py-2 rounded-lg text-sm font-medium",style:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#ffffff",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Add manually"})]}):0===v.length?e.jsx("div",{className:"rounded-xl p-8 text-center",style:{backgroundColor:"rgba(255, 255, 255, 0.03)",border:"1px dashed rgba(255, 255, 255, 0.15)"},children:e.jsx("p",{className:"text-base mb-4",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#cccccc"},children:"No experience added yet. Click the + button to add your work experience."})}):e.jsx("div",{ref:M,onScroll:A,className:"flex gap-4 overflow-x-auto pb-2",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:v.map(t=>e.jsxs("div",{className:"flex-shrink-0 rounded-xl p-5 relative",style:{width:"320px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:t.needsReview?"1px solid rgba(239, 68, 68, 0.5)":"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"rgba(148, 163, 184, 0.15)"},children:e.jsx(y,{className:"w-5 h-5",style:{color:"var(--text-primary)"}})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:"font-semibold text-base leading-tight",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:t.title})})]}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-2",children:[e.jsx("button",{onClick:()=>(e=>{k({...e}),F(!1),w(!0)})(t),className:"w-7 h-7 rounded-full flex items-center justify-center transition-all duration-200",style:{border:"1px solid rgba(148, 163, 184, 0.3)",backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:e.jsx(s,{className:"w-3.5 h-3.5",style:{color:"var(--text-primary)"}})}),e.jsx("button",{onClick:()=>{return e=t.id,void j(t=>t.filter(t=>t.id!==e));var e},className:"w-7 h-7 rounded-full flex items-center justify-center transition-all duration-200",style:{border:"1px solid rgba(148, 163, 184, 0.3)",backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:e.jsx(m,{className:"w-3.5 h-3.5",style:{color:"var(--text-primary)"}})})]})]}),e.jsxs("p",{className:"text-sm mb-2",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"var(--text-primary)"},children:[t.company,x(t)&&` | ${x(t)}`]}),t.description&&e.jsx("p",{className:"text-sm leading-relaxed",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"var(--text-primary)",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.description}),t.needsReview&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 px-3 py-2 rounded-lg",style:{backgroundColor:"rgba(239, 68, 68, 0.1)"},children:[e.jsx(u,{className:"w-4 h-4 flex-shrink-0",style:{color:"#ef4444"}}),e.jsx("p",{className:"text-xs",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ef4444"},children:"We only got part of that. Check we're not missing anything."})]})]},t.id))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>d(-1),className:"px-6 py-3 rounded-lg font-medium text-base transition-all duration-200",style:{backgroundColor:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#ffffff",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"Back"}),e.jsx("button",{onClick:()=>{h({workExperiences:v}),d("/freelancer-education")},className:"px-8 py-3 rounded-lg font-medium text-base transition-all duration-200",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Next, add your education"})]})]}),N&&C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",style:{backgroundColor:"rgba(0, 0, 0, 0.8)"},onClick:q,children:e.jsxs("div",{className:"w-full max-w-lg rounded-xl p-6 relative",style:{backgroundColor:"#111111",border:"1px solid rgba(255, 255, 255, 0.1)",maxHeight:"90vh",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:I?"Add experience":"Edit experience"}),e.jsx("button",{onClick:q,className:"w-8 h-8 rounded-full flex items-center justify-center transition-all duration-200",style:{backgroundColor:"rgba(255, 255, 255, 0.05)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},children:e.jsx(f,{className:"w-4 h-4",style:{color:"var(--text-primary)"}})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"Title *"}),e.jsx("input",{type:"text",value:C.title,onChange:e=>B("title",e.target.value),placeholder:"e.g. Junior Product Designer",className:"w-full px-4 py-2.5 rounded-lg text-sm outline-none",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:C.title.trim()?"1px solid rgba(255, 255, 255, 0.15)":"1px solid rgba(239, 68, 68, 0.5)",color:"#ffffff",fontFamily:"Inter, system-ui, -apple-system, sans-serif"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"Company *"}),e.jsx("input",{type:"text",value:C.company,onChange:e=>B("company",e.target.value),placeholder:"e.g. IBial Corporation",className:"w-full px-4 py-2.5 rounded-lg text-sm outline-none",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:C.company.trim()?"1px solid rgba(255, 255, 255, 0.15)":"1px solid rgba(239, 68, 68, 0.5)",color:"#ffffff",fontFamily:"Inter, system-ui, -apple-system, sans-serif"}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"City"}),e.jsx("input",{type:"text",value:C.locationCity||"",onChange:e=>B("locationCity",e.target.value),placeholder:"City",className:"w-full px-4 py-2.5 rounded-lg text-sm outline-none",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",color:"#ffffff",fontFamily:"Inter, system-ui, -apple-system, sans-serif"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"Country"}),e.jsx("input",{type:"text",value:C.locationCountry||"",onChange:e=>B("locationCountry",e.target.value),placeholder:"Country",className:"w-full px-4 py-2.5 rounded-lg text-sm outline-none",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",color:"#ffffff",fontFamily:"Inter, system-ui, -apple-system, sans-serif"}})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"Start month"}),e.jsx(a,{value:C.startMonth,onChange:e=>B("startMonth",e?Number(e):void 0),options:[{value:void 0,label:"Month"},...p.slice(1).map((e,t)=>({value:t+1,label:e}))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"Start year"}),e.jsx(a,{value:C.startYear,onChange:e=>B("startYear",e?Number(e):void 0),options:[{value:void 0,label:"Year"},...J.map(e=>({value:e,label:e.toString()}))]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>B("isCurrent",!C.isCurrent),className:"w-5 h-5 rounded flex items-center justify-center transition-all duration-200",style:{backgroundColor:C.isCurrent?"var(--text-primary)":"transparent",border:C.isCurrent?"1px solid var(--border-subtle)":"1px solid rgba(255, 255, 255, 0.3)"},children:C.isCurrent&&e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"#000",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"text-sm",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"I currently work here"})]}),!C.isCurrent&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"End month"}),e.jsx(a,{value:C.endMonth,onChange:e=>B("endMonth",e?Number(e):void 0),options:[{value:void 0,label:"Month"},...p.slice(1).map((e,t)=>({value:t+1,label:e}))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"End year"}),e.jsx(a,{value:C.endYear,onChange:e=>B("endYear",e?Number(e):void 0),options:[{value:void 0,label:"Year"},...J.map(e=>({value:e,label:e.toString()}))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#ffffff"},children:"Description"}),e.jsx("textarea",{value:C.description||"",onChange:e=>B("description",e.target.value),placeholder:"Describe your responsibilities and achievements...",rows:4,className:"w-full px-4 py-2.5 rounded-lg text-sm outline-none resize-none",style:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",color:"#ffffff",fontFamily:"Inter, system-ui, -apple-system, sans-serif"}})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:q,className:"px-5 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",style:{backgroundColor:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#ffffff",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"Cancel"}),e.jsx("button",{onClick:()=>{C&&C.title.trim()&&C.company.trim()&&(j(I?e=>[...e,C]:e=>e.map(e=>e.id===C.id?C:e)),w(!1),k(null))},disabled:!C.title.trim()||!C.company.trim(),className:"px-5 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",style:{backgroundColor:C.title.trim()&&C.company.trim()?"#ffffff":"rgba(255, 255, 255, 0.08)",color:C.title.trim()&&C.company.trim()?"#000000":"#666666",fontFamily:"Inter, system-ui, -apple-system, sans-serif",cursor:C.title.trim()&&C.company.trim()?"pointer":"not-allowed"},children:I?"Add":"Save"})]})]})}),e.jsx("style",{children:"\n        div::-webkit-scrollbar { display: none; }\n      "})]})}export{g as default};
