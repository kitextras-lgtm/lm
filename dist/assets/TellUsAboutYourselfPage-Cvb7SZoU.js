import{j as e}from"./spline-C1bWgT9i.js";import{u as a,d as t,r}from"./react-vendor-D-1Z2fag.js";import{s}from"./index-BH9g96JM.js";import"./supabase-Dexhd8Ad.js";const i=["United States of America","United Kingdom","Canada","Australia","Germany","France","Spain","Italy","Japan","South Korea","Brazil","Mexico","India","China","Netherlands","Sweden","Norway","Denmark","Finland","Switzerland","Austria","Belgium","Portugal","Poland","Greece","Ireland","New Zealand","Singapore","South Africa","Argentina","Chile","Colombia","Peru","Thailand","Vietnam","Malaysia","Indonesia","Philippines","Turkey","United Arab Emirates","Saudi Arabia","Israel","Egypt","Nigeria","Kenya","Other"],n=["English","Spanish","French","German","Italian","Portuguese","Dutch","Russian","Chinese (Mandarin)","Japanese","Korean","Arabic","Hindi","Bengali","Turkish","Vietnamese","Thai","Indonesian","Malay","Tagalog","Swedish","Norwegian","Danish","Finnish","Polish","Greek","Hebrew","Swahili","Other"];function l(){const l=a(),o=t(),[c,d]=r.useState(""),[u,h]=r.useState(""),[p,m]=r.useState(!1),[g,x]=r.useState(!1),[y,f]=r.useState(!1),[b,w]=r.useState(null),[v,S]=r.useState(null),[j,k]=r.useState(null),[N,F]=r.useState(!1),[C,A]=r.useState(window.innerWidth<640);r.useEffect(()=>{const e=setTimeout(()=>{F(!0)},100);return()=>clearTimeout(e)},[]),r.useEffect(()=>{const e=()=>A(window.innerWidth<640);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),r.useEffect(()=>{(async()=>{const{data:{user:e}}=await s.auth.getUser();if(e){const{data:a}=await s.from("users").select("*").eq("id",e.id).maybeSingle();a&&(S(a.user_type),k(a))}})()},[]),r.useEffect(()=>{const e=localStorage.getItem("tempProfile");if(e)try{const a=JSON.parse(e);a.location&&d(a.location),a.primaryLanguage&&h(a.primaryLanguage)}catch(a){}},[]),r.useEffect(()=>{(async()=>{var e;if(!c)try{const a=await fetch("https://ipapi.co/json/"),t=await a.json();if(t.country_name){const a={en:"English",es:"Spanish",fr:"French",de:"German",it:"Italian",pt:"Portuguese",nl:"Dutch",ru:"Russian",zh:"Chinese (Mandarin)",ja:"Japanese",ko:"Korean",ar:"Arabic",hi:"Hindi",bn:"Bengali",tr:"Turkish",vi:"Vietnamese",th:"Thai",id:"Indonesian",ms:"Malay",tl:"Tagalog",sv:"Swedish",no:"Norwegian",da:"Danish",fi:"Finnish",pl:"Polish",el:"Greek",he:"Hebrew",sw:"Swahili"},r={"United States":"United States of America","United Kingdom":"United Kingdom",Canada:"Canada",Australia:"Australia",Germany:"Germany",France:"France",Spain:"Spain",Italy:"Italy",Japan:"Japan","South Korea":"South Korea",Brazil:"Brazil",Mexico:"Mexico",India:"India",China:"China",Netherlands:"Netherlands",Sweden:"Sweden",Norway:"Norway",Denmark:"Denmark",Finland:"Finland",Switzerland:"Switzerland",Austria:"Austria",Belgium:"Belgium",Portugal:"Portugal",Poland:"Poland",Greece:"Greece",Ireland:"Ireland","New Zealand":"New Zealand",Singapore:"Singapore","South Africa":"South Africa",Argentina:"Argentina",Chile:"Chile",Colombia:"Colombia",Peru:"Peru",Thailand:"Thailand",Vietnam:"Vietnam",Malaysia:"Malaysia",Indonesia:"Indonesia",Philippines:"Philippines",Turkey:"Turkey","United Arab Emirates":"United Arab Emirates","Saudi Arabia":"Saudi Arabia",Israel:"Israel",Egypt:"Egypt",Nigeria:"Nigeria",Kenya:"Kenya"}[t.country_name]||"Other",s=a[null==(e=t.languages)?void 0:e.split(",")[0]]||"English";d(r),h(s)}}catch(a){}})()},[]);return e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center relative overflow-hidden py-8 sm:py-12 px-6",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E\")"},children:[e.jsxs("button",{onClick:()=>{l("/make-profile")},className:"fixed top-6 left-6 z-50 flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors group",children:[e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),e.jsx("span",{className:"text-xs font-medium",children:"Back"})]}),!C&&e.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none transition-opacity duration-700 ease-out overflow-hidden",style:{opacity:N?1:0,transform:"translateX(30%) scale(1.035)"},children:e.jsx("spline-viewer",{url:"https://prod.spline.design/hxB6DGH8u6Rcpq21/scene.splinecode","mouse-controls":"false",className:"spline-viewer-no-watermark"})}),e.jsxs("div",{className:"relative z-10 w-full max-w-sm flex flex-col items-center",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-3",style:{color:"#F2F4F7"},children:"Tell us about yourself"}),e.jsx("p",{className:"text-sm",style:{color:"#9CA3AF"},children:"This helps us accurately create your profile."})]}),e.jsx("div",{className:"w-full p-6 relative",style:{background:"rgba(10, 10, 15, 0.65)",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",border:"1px solid rgba(255, 255, 255, 0.06)",borderRadius:"16px",boxShadow:"0 24px 48px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.03)"},children:e.jsxs("div",{className:"space-y-4 relative z-10",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1.5",style:{color:"#9CA3AF"},children:"Your location"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>m(!p),className:"w-full h-11 px-4 rounded-lg text-left flex items-center justify-between transition-all text-sm",style:{color:"#F2F4F7",background:"transparent",border:"1px solid rgba(75, 85, 99, 1)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("svg",{className:"w-4 h-4",style:{color:"#9CA3AF"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{style:{color:c?"#F2F4F7":"#9CA3AF"},children:c||"Select your location"})]}),e.jsx("svg",{className:"w-4 h-4",style:{color:"#9CA3AF"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&e.jsx("div",{className:"absolute z-20 w-full mt-2 rounded-lg shadow-lg max-h-60 overflow-y-auto",style:{background:"rgba(10, 10, 15, 0.95)",backdropFilter:"blur(24px)",border:"1px solid rgba(75, 85, 99, 1)"},children:i.map(a=>e.jsx("button",{onClick:()=>{d(a),m(!1)},className:"w-full px-4 py-2.5 text-left transition-colors text-sm",style:{color:"#F2F4F7"},onMouseEnter:e=>e.currentTarget.style.background="rgba(75, 85, 99, 0.5)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1.5",style:{color:"#9CA3AF"},children:"What is your Primary Language?"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>x(!g),className:"w-full h-11 px-4 rounded-lg text-left flex items-center justify-between transition-all text-sm",style:{color:"#F2F4F7",background:"transparent",border:"1px solid rgba(75, 85, 99, 1)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-4 h-4",style:{color:"#9CA3AF"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),e.jsx("span",{style:{color:u?"#F2F4F7":"#9CA3AF"},children:u||"Select your language"})]}),e.jsx("svg",{className:"w-4 h-4",style:{color:"#9CA3AF"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&e.jsx("div",{className:"absolute z-20 w-full mt-2 rounded-lg shadow-lg max-h-60 overflow-y-auto",style:{background:"rgba(10, 10, 15, 0.95)",backdropFilter:"blur(24px)",border:"1px solid rgba(75, 85, 99, 1)"},children:n.map(a=>e.jsx("button",{onClick:()=>{h(a),x(!1)},className:"w-full px-4 py-2.5 text-left transition-colors text-sm",style:{color:"#F2F4F7"},onMouseEnter:e=>e.currentTarget.style.background="rgba(75, 85, 99, 0.5)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:a},a))})]})]}),b&&e.jsx("div",{className:"text-red-500 text-xs text-center",children:b}),e.jsx("button",{onClick:async()=>{var e,a,t;if(c&&u){f(!0),w(null);try{const{data:{user:r}}=await s.auth.getUser(),i=localStorage.getItem("verifiedUserId"),n=(null==r?void 0:r.id)||i;if(n){const a="https://hlcpoqxzqgbghsadouef.supabase.co/functions/v1/save-profile",t=await fetch(a,{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsY3BvcXh6cWdiZ2hzYWRvdWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzI2MTUsImV4cCI6MjA4MTcwODYxNX0.Qhbzj0g5FbpW0wgtGsJBF2AV0HqL-9X2S2nGL64KCYA","Content-Type":"application/json"},body:JSON.stringify({userId:n,location:c,primaryLanguage:u})}),r=await t.json();if(!r.success)throw new Error(r.message||"Failed to save profile");const s=localStorage.getItem("tempProfile"),i=s?JSON.parse(s):{};localStorage.setItem("tempProfile",JSON.stringify({...i,location:c,primaryLanguage:u,userType:i.userType||(null==(e=o.state)?void 0:e.userType)}))}else{const e=localStorage.getItem("tempProfile"),t=e?JSON.parse(e):{};localStorage.setItem("tempProfile",JSON.stringify({...t,location:c,primaryLanguage:u,userType:t.userType||(null==(a=o.state)?void 0:a.userType)}))}const d=localStorage.getItem("tempProfile");"artist"===(d?JSON.parse(d):{}).userType||"artist"===(null==(t=o.state)?void 0:t.userType)?(l("/dashboard/artist",{state:{fromOnboarding:!0}}),localStorage.removeItem("tempProfile")):l("/user-type-selection")}catch(r){w(r.message||"Failed to save profile")}finally{f(!1)}}else w("Please complete all fields")},disabled:!c||!u||y,className:`\n                w-full h-11 rounded-lg font-semibold transition-all duration-300\n                ${c&&u&&!y?"hover:opacity-95":"opacity-50 cursor-not-allowed"}\n              `,style:{background:c&&u&&!y?"#E8E8E8":"rgba(75, 85, 99, 1)",color:c&&u&&!y?"#000000":"#9CA3AF"},children:y?"Saving...":"Continue"})]})})]})]})}export{l as TellUsAboutYourselfPage};
