const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-BsmpcyEG.js","assets/spline-B-CxCvYB.js","assets/react-vendor-C0nIU5mK.js","assets/createLucideIcon-436Arfi6.js","assets/plus-BZb7UiDE.js","assets/SignupPage-BfUDQY_o.js","assets/supabase-4pTIYIFL.js","assets/LoginPage-CpAdu7FL.js","assets/UserTypeSelectionPage-B7gA43fm.js","assets/MakeProfilePage-m8cBh1yh.js","assets/TellUsAboutYourselfPage-DEqdPPpL.js","assets/ContactForm-ByLxRlY7.js","assets/chevron-down-BvV-b1Lb.js","assets/ArtistDashboard-BEp96ivN.js","assets/ToggleSwitch-DXJVkLvE.js","assets/SettingsView-CGZrjMz5.js","assets/arrow-left-BrWP3Ahp.js","assets/map-pin-Cm1T73oP.js","assets/user-BFhjjbIl.js","assets/CreatorDashboard-zfDpwCQR.js","assets/bell-S72O6Bo6.js","assets/BusinessDashboard-BavKSwSX.js","assets/MobileMenuPage-DVDPkCOn.js","assets/SettingsPage-B02pn6St.js","assets/VerifySetupPage-BbT-oGED.js","assets/AdminLoginPage-DLbIwZDp.js","assets/AdminDashboard-CMIDBLzU.js","assets/LearnArtist-Crkx0dtW.js"])))=>i.map(i=>d[i]);
import{j as e,_ as t}from"./spline-B-CxCvYB.js";import{a as r,r as a,N as s,B as n,R as i,b as o}from"./react-vendor-C0nIU5mK.js";import{c as l}from"./supabase-4pTIYIFL.js";var c;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var u=r;c=u.createRoot,u.hydrateRoot;const d="https://hlcpoqxzqgbghsadouef.supabase.co",m="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsY3BvcXh6cWdiZ2hzYWRvdWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzI2MTUsImV4cCI6MjA4MTcwODYxNX0.Qhbzj0g5FbpW0wgtGsJBF2AV0HqL-9X2S2nGL64KCYA",f=l(d,m),p={light:{bg:{primary:"#0F172A",secondary:"#0F172A",elevated:"#0F172A",active:"#1E293B",sidebar:"#0F172A",input:"#0F172A",card:"#0F172A",modal:"#0F172A"},text:{primary:"#FFFFFF",secondary:"#94A3B8",muted:"#64748B"},border:{subtle:"rgba(148, 163, 184, 0.3)",default:"rgba(148, 163, 184, 0.2)"}},grey:{bg:{primary:"#1A1A1E",secondary:"#1A1A1E",elevated:"#1A1A1E",active:"#2A2A2E",sidebar:"#1A1A1E",input:"#1A1A1E",card:"#1A1A1E",modal:"#1A1A1E"},text:{primary:"#F8FAFC",secondary:"#94A3B8",muted:"#64748B"},border:{subtle:"#2f2f2f",default:"rgba(75, 85, 99, 0.2)"}},dark:{bg:{primary:"#000000",secondary:"#000000",elevated:"#000000",active:"#0f0f13",sidebar:"#000000",input:"#000000",card:"#000000",modal:"#000000"},text:{primary:"#F8FAFC",secondary:"#94A3B8",muted:"#64748B"},border:{subtle:"#1a1a1a",default:"rgba(75, 85, 99, 0.2)"}}};function h(e){const t=p[e];Object.entries(t).forEach(([e,t])=>{Object.entries(t).forEach(([t,r])=>{document.documentElement.style.setProperty(`--${e}-${t}`,r)})}),document.documentElement.setAttribute("data-theme",e)}const g=a.createContext(void 0);function _({children:t}){const[r,s]=a.useState(()=>localStorage.getItem("theme")||"dark");a.useEffect(()=>{h(r)},[r]),a.useEffect(()=>{h(r)},[]);const n={theme:r,setTheme:e=>{s(e),localStorage.setItem("theme",e),localStorage.setItem("backgroundTheme",e),localStorage.setItem("appliedTheme",e)},tokens:p[r]};return e.jsx(g.Provider,{value:n,children:t})}function y(){const e=a.useContext(g);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}function x({text:t="Loading...",barCount:r=5,className:a=""}){const{tokens:s}=y();return e.jsxs("div",{className:`flex flex-col items-center justify-center ${a}`,children:[e.jsx("div",{className:"flex items-end gap-1.5 mb-4",children:Array.from({length:r}).map((t,r)=>e.jsx("div",{className:"w-1.5 rounded-full animate-bar",style:{backgroundColor:s.text.primary,height:"32px",animationDelay:.05*r+"s"}},r))}),t&&e.jsx("p",{className:"text-sm",style:{color:s.text.secondary},children:t})]})}function j({children:t}){const[r,n]=a.useState(null),[i,o]=a.useState(!0),{theme:l,tokens:c}=y();return a.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("verifiedUserId"),t=localStorage.getItem("verifiedEmail");if(e)return n(!0),void o(!1);if(t){const{data:{user:e}}=await f.auth.getUser();if(e)n(!0);else{const{data:e}=await f.from("users").select("id").eq("email",t).maybeSingle();(null==e?void 0:e.id)?(localStorage.setItem("verifiedUserId",e.id),n(!0)):n(!1)}}else{const{data:{session:e}}=await f.auth.getSession();n(!!e)}}catch(e){n(!1)}finally{o(!1)}})()},[]),i?e.jsx("div",{style:{backgroundColor:c.bg.primary,minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",color:c.text.primary},children:e.jsx(x,{text:"Loading..."})}):r?t:e.jsx(s,{to:"/login",replace:!0})}const b=a.createContext(void 0);function v({children:t}){const[r,s]=a.useState(null),[n,i]=a.useState(null),[o,l]=a.useState(!0),c=a.useRef(null);a.useEffect(()=>{l(!1)},[]);const u=async()=>{try{const e=c.current||n;if(!e)return l(!1),!1;const t=await fetch(`${d}/functions/v1/admin-verify-session`,{method:"GET",headers:{Authorization:`Bearer ${m}`,"X-Session-Token":e,"Content-Type":"application/json"}}),r=await t.json();return r.success&&r.admin?(s(r.admin),c.current=e,l(!1),!0):(s(null),i(null),c.current=null,l(!1),!1)}catch(e){return s(null),i(null),c.current=null,l(!1),!1}},f={admin:r,sessionToken:c.current||n,isLoading:o,isAuthenticated:!!r,login:async(e,t,r)=>{try{const a=await fetch(`${d}/functions/v1/admin-login`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({email:e,password:t,totpCode:r})});if(!a.ok){await a.text();return{success:!1,message:`Server error: ${a.status}`}}const n=await a.text();if(!n)return{success:!1,message:"Empty response from server"};const o=JSON.parse(n);return o.success&&o.sessionToken&&o.admin?(c.current=o.sessionToken,i(o.sessionToken),s(o.admin),{success:!0}):{success:!1,message:o.message||"Login failed",requiresTotp:o.requiresTotp||!1}}catch(a){return{success:!1,message:a.message||"Login failed"}}},logout:async()=>{try{n&&await fetch(`${d}/functions/v1/admin-logout`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"X-Session-Token":n,"Content-Type":"application/json"}})}catch(e){}finally{s(null),i(null),c.current=null}},verifySession:u,hasPermission:(e,t)=>{if(!r||!r.permissions)return!1;const a=r.permissions[e];return!(!a||!Array.isArray(a))&&a.includes(t)},refreshSession:async()=>{await u()}};return e.jsx(b.Provider,{value:f,children:t})}function A(){const e=a.useContext(b);if(void 0===e)throw new Error("useAdminAuth must be used within an AdminAuthProvider");return e}const S="user_profile_cache";function E(e){if(!e)return null;try{const t=localStorage.getItem(S);if(!t)return null;const r=JSON.parse(t);return"1"!==r.version||r.userId!==e?null:r.profile}catch(t){return null}}function I(e,t){if(e&&t)try{const r={profile:t,userId:e,timestamp:Date.now(),version:"1"};localStorage.setItem(S,JSON.stringify(r))}catch(r){}}const P="avatar_cache_";function w(e){try{const t=localStorage.getItem(P+e);if(t){const{data:e,version:r}=JSON.parse(t);if("1"===r)return e}}catch(t){}return null}async function T(e){try{if(w(e))return;const t=await async function(e){try{const t=await fetch(e,{mode:"cors"}),r=await t.blob();return new Promise((e,t)=>{const a=new FileReader;a.onloadend=()=>e(a.result),a.onerror=t,a.readAsDataURL(r)})}catch(t){return null}}(e);t&&localStorage.setItem(P+e,JSON.stringify({data:t,version:"1",timestamp:Date.now()}))}catch(t){}}function L(e){if(!e)return;if(w(e))return;const t=new Image;t.crossOrigin="anonymous",t.loading="eager",t.fetchPriority="high",t.onload=()=>{T(e).catch(()=>{})},t.onerror=()=>{},t.src=e}const O=a.createContext(void 0);function k({children:t}){const[r,s]=a.useState(null),[n,i]=a.useState(null),[o,l]=a.useState(!0),[c,u]=a.useState(!1),[p,h]=a.useState(null),g=a.useCallback(async e=>{try{const t=`${d}/functions/v1/get-profile?userId=${e}`,r=await fetch(t,{method:"GET",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(r.ok){const e=await r.json();if(e.success&&e.user){const t=e.user;return{id:t.id,email:t.email||"",first_name:t.first_name||"",last_name:t.last_name||"",username:t.username||"",profile_picture_url:t.profile_picture_url||null,banner_url:t.banner_url||null,location:t.location||"",primary_language:t.primary_language||"English",user_type:t.user_type||"",created_at:t.created_at||"",updated_at:t.updated_at||(new Date).toISOString()}}}const{data:a,error:s}=await f.from("users").select("*").eq("id",e).maybeSingle();if(s)return null;if(a){return{id:a.id,email:a.email||"",first_name:a.first_name||"",last_name:a.last_name||"",username:a.username||"",profile_picture_url:a.profile_picture_url||null,banner_url:a.banner_url||null,location:a.location||"",primary_language:a.primary_language||"English",user_type:a.user_type||"",created_at:a.created_at||"",updated_at:a.updated_at||(new Date).toISOString()}}return null}catch(t){return null}},[]),_=a.useCallback(async()=>{try{const{data:{user:e}}=await f.auth.getUser(),t=localStorage.getItem("verifiedUserId"),r=localStorage.getItem("verifiedEmail");let a=(null==e?void 0:e.id)||t;if(!a&&r){const{data:e}=await f.from("users").select("id").eq("email",r).maybeSingle();(null==e?void 0:e.id)&&(a=e.id,localStorage.setItem("verifiedUserId",a))}if(!a)return void l(!1);i(a);const n=E(a);if(n){s(n),l(!1),n.profile_picture_url&&"string"==typeof n.profile_picture_url&&L(n.profile_picture_url),u(!0);const e=await g(a);e&&JSON.stringify(e)!==JSON.stringify(n)&&(s(e),I(a,e),e.profile_picture_url&&e.profile_picture_url!==n.profile_picture_url&&L(e.profile_picture_url)),u(!1)}else{const e=await g(a);e&&(s(e),I(a,e),e.profile_picture_url&&L(e.profile_picture_url)),l(!1)}}catch(e){h("Failed to load profile"),l(!1)}},[g]),y=a.useCallback(async()=>{if(!n)return;u(!0),h(null);const e=await g(n);e?(s(e),I(n,e)):h("Failed to refresh profile"),u(!1)},[n,g]),x=a.useCallback(e=>{if(!n||!r)return;const t={...r,...e,updated_at:(new Date).toISOString()};s(t),function(e,t){const r=E(e);if(!r)return;I(e,{...r,...t,updated_at:(new Date).toISOString()})}(n,e)},[n,r]),j=a.useCallback(()=>{!function(){try{localStorage.removeItem(S)}catch(p){}}(),s(null),i(null)},[]),b=a.useCallback(async e=>{const t=await g(e);return t&&(I(e,t),s(t),i(e),t.profile_picture_url&&L(t.profile_picture_url)),t},[g]);a.useEffect(()=>{_()},[_]),a.useEffect(()=>{const{data:{subscription:e}}=f.auth.onAuthStateChange((e,t)=>{var r;"SIGNED_OUT"===e?j():"SIGNED_IN"===e&&(null==(r=null==t?void 0:t.user)?void 0:r.id)&&b(t.user.id)});return()=>{e.unsubscribe()}},[j,b]),a.useEffect(()=>{const e=()=>{!document.hidden&&n&&y()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[n,y]);const v={profile:r,userId:n,isLoading:o,isRefreshing:c,error:p,refetch:y,updateProfile:x,clearCache:j,prefetchProfile:b};return e.jsx(O.Provider,{value:v,children:t})}function C(){const e=a.useContext(O);if(void 0===e)throw new Error("useUserProfile must be used within a UserProfileProvider");return e}function D({children:t,requiredPermission:r}){const{isAuthenticated:a,isLoading:n,hasPermission:i}=A();return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#111111"},children:e.jsx(x,{text:"Loading dashboard..."})}):a?r&&!i(r.resource,r.action)?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#111111"},children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-400",children:"You don't have permission to access this page."})]})}):e.jsx(e.Fragment,{children:t}):e.jsx(s,{to:"/admin/login",replace:!0})}function N(){const{tokens:t}=y();return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center",style:{backgroundColor:t.bg.primary},children:e.jsxs("div",{className:"relative",style:{width:"100px",height:"100px"},children:[e.jsx("div",{className:"absolute rounded-full",style:{width:"100px",height:"100px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"radial-gradient(circle, rgba(255, 255, 255, 0.06) 0%, transparent 70%)",animation:"premium-pulse 2.5s ease-in-out infinite"}}),e.jsx("div",{className:"absolute rounded-full",style:{width:"70px",height:"70px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"radial-gradient(circle, rgba(255, 255, 255, 0.04) 0%, transparent 70%)",animation:"premium-pulse 2.5s ease-in-out infinite 0.4s"}}),e.jsx("div",{className:"absolute rounded-full",style:{width:"40px",height:"40px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"radial-gradient(circle, rgba(255, 255, 255, 0.08) 0%, transparent 60%)",animation:"premium-pulse 2.5s ease-in-out infinite 0.8s"}}),e.jsx("div",{className:"absolute rounded-full",style:{width:"3px",height:"3px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(255, 255, 255, 0.5)",boxShadow:"0 0 6px rgba(255, 255, 255, 0.2)"}})]})})}const F=a.lazy(()=>t(()=>import("./HomePage-BsmpcyEG.js"),__vite__mapDeps([0,1,2,3,4])).then(e=>({default:e.HomePage}))),z=a.lazy(()=>t(()=>import("./SignupPage-BfUDQY_o.js"),__vite__mapDeps([5,1,2,6])).then(e=>({default:e.SignupPage}))),R=a.lazy(()=>t(()=>import("./LoginPage-CpAdu7FL.js"),__vite__mapDeps([7,1,2,6])).then(e=>({default:e.LoginPage}))),V=a.lazy(()=>t(()=>import("./UserTypeSelectionPage-B7gA43fm.js"),__vite__mapDeps([8,1,2,6])).then(e=>({default:e.UserTypeSelectionPage}))),B=a.lazy(()=>t(()=>import("./MakeProfilePage-m8cBh1yh.js"),__vite__mapDeps([9,1,2,6])).then(e=>({default:e.MakeProfilePage}))),J=a.lazy(()=>t(()=>import("./TellUsAboutYourselfPage-DEqdPPpL.js"),__vite__mapDeps([10,1,2,6])).then(e=>({default:e.TellUsAboutYourselfPage}))),U=a.lazy(()=>t(()=>import("./ContactForm-ByLxRlY7.js"),__vite__mapDeps([11,1,2,3,12])).then(e=>({default:e.ContactForm}))),M=a.lazy(()=>t(()=>import("./ArtistDashboard-BEp96ivN.js"),__vite__mapDeps([13,1,2,14,3,15,16,12,4,17,18,6])).then(e=>({default:e.ArtistDashboard}))),$=a.lazy(()=>t(()=>import("./CreatorDashboard-zfDpwCQR.js"),__vite__mapDeps([19,1,2,14,3,15,16,12,4,17,20,18,6])).then(e=>({default:e.CreatorDashboard}))),q=a.lazy(()=>t(()=>import("./BusinessDashboard-BavKSwSX.js"),__vite__mapDeps([21,1,2,14,3,15,16,12,4,17,6])).then(e=>({default:e.BusinessDashboard}))),Y=a.lazy(()=>t(()=>import("./MobileMenuPage-DVDPkCOn.js"),__vite__mapDeps([22,1,2])).then(e=>({default:e.MobileMenuPage}))),X=a.lazy(()=>t(()=>import("./SettingsPage-B02pn6St.js"),__vite__mapDeps([23,1,2,16,3,17,6])).then(e=>({default:e.SettingsPage}))),G=a.lazy(()=>t(()=>import("./VerifySetupPage-BbT-oGED.js"),__vite__mapDeps([24,1,2,6])).then(e=>({default:e.VerifySetupPage}))),H=a.lazy(()=>t(()=>import("./AdminLoginPage-DLbIwZDp.js"),__vite__mapDeps([25,1,2,6])).then(e=>({default:e.AdminLoginPage}))),W=a.lazy(()=>t(()=>import("./AdminDashboard-CMIDBLzU.js"),__vite__mapDeps([26,1,2,15,3,16,12,20,18,6])).then(e=>({default:e.AdminDashboard}))),Z=a.lazy(()=>t(()=>import("./LearnArtist-Crkx0dtW.js"),__vite__mapDeps([27,1,2])).then(e=>({default:e.LearnArtist})));function K(){return e.jsx(_,{children:e.jsx(k,{children:e.jsx(v,{children:e.jsx(n,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(a.Suspense,{fallback:e.jsx(N,{}),children:e.jsxs(i,{children:[e.jsx(o,{path:"/",element:e.jsx(F,{})}),e.jsx(o,{path:"/menu",element:e.jsx(Y,{})}),e.jsx(o,{path:"/signup",element:e.jsx(z,{})}),e.jsx(o,{path:"/login",element:e.jsx(R,{})}),e.jsx(o,{path:"/user-type-selection",element:e.jsx(V,{})}),e.jsx(o,{path:"/make-profile",element:e.jsx(B,{})}),e.jsx(o,{path:"/tell-us-about-yourself",element:e.jsx(J,{})}),e.jsx(o,{path:"/contact",element:e.jsx(U,{})}),e.jsx(o,{path:"/dashboard/artist",element:e.jsx(j,{children:e.jsx(M,{})})}),e.jsx(o,{path:"/dashboard/creator",element:e.jsx(j,{children:e.jsx($,{})})}),e.jsx(o,{path:"/dashboard/business",element:e.jsx(j,{children:e.jsx(q,{})})}),e.jsx(o,{path:"/settings",element:e.jsx(j,{children:e.jsx(X,{})})}),e.jsx(o,{path:"/verify-setup",element:e.jsx(G,{})}),e.jsx(o,{path:"/learn/artist",element:e.jsx(Z,{})}),e.jsx(o,{path:"/admin/login",element:e.jsx(H,{})}),e.jsx(o,{path:"/admin/dashboard",element:e.jsx(D,{children:e.jsx(W,{})})})]})})})})})})}document.body.classList.add("preload"),window.addEventListener("load",()=>{setTimeout(()=>{document.body.classList.remove("preload")},100)});const Q=document.getElementById("root");if(!Q)throw new Error("Root element not found");c(Q).render(e.jsx(a.StrictMode,{children:e.jsx(K,{})}));export{x as A,d as S,m as a,y as b,A as c,w as g,L as p,f as s,p as t,C as u};
