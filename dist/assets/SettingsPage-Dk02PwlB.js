import{j as e}from"./spline-DN92G9fQ.js";import{u as s,r as a}from"./react-vendor-C5CBPnGl.js";import{s as l}from"./index-DHN5MaPw.js";import{A as t}from"./arrow-left-D6ZoFILw.js";import{C as o,M as n,G as i}from"./map-pin-D8GFr4Pd.js";import"./supabase-CAOwvaCC.js";import"./createLucideIcon-DApH4y_Q.js";function r(){return e.jsx("span",{className:"inline-flex items-center justify-center px-0.5 py-0.5 text-[6px] sm:px-1.5 sm:text-[8px] font-medium uppercase tracking-wider text-white bg-[#1e1e1e] rounded border border-border/50 cursor-default transition-all duration-300 ease-out hover:bg-[#2a2a2a] hover:text-white hover:border-foreground/30 hover:shadow-[0_0_12px_rgba(255,255,255,0.15)] hover:scale-105 select-none -ml-1",children:"Beta"})}const c=["United States of America","United Kingdom","Canada","Australia","Germany","France","Spain","Italy","Japan","South Korea","Brazil","Mexico","India","China","Netherlands","Sweden","Norway","Denmark","Finland","Switzerland","Austria","Belgium","Portugal","Poland","Greece","Ireland","New Zealand","Singapore","South Africa","Argentina","Chile","Colombia","Peru","Thailand","Vietnam","Malaysia","Indonesia","Philippines","Turkey","United Arab Emirates","Saudi Arabia","Israel","Egypt","Nigeria","Kenya","Other"],d=["English","Spanish","French","German","Italian","Portuguese","Dutch","Russian","Chinese (Mandarin)","Japanese","Korean","Arabic","Hindi","Bengali","Turkish","Vietnamese","Thai","Indonesian","Malay","Tagalog","Swedish","Norwegian","Danish","Finnish","Polish","Greek","Hebrew","Swahili","Other"];function m(){const m=s(),[u,h]=a.useState("personal"),[x,f]=a.useState(!1),[p,g]=a.useState(null),[b,v]=a.useState(null),[j,y]=a.useState(null),[N,w]=a.useState({firstName:"",lastName:"",username:"",location:"United States of America",language:"English",email:""});a.useEffect(()=>{k()},[]),a.useEffect(()=>{const e=()=>{document.hidden||k()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]);const k=async()=>{S(!0);try{const{data:{user:s},error:a}=await l.auth.getUser(),t=localStorage.getItem("verifiedUserId"),o=localStorage.getItem("verifiedEmail");let n=(null==s?void 0:s.id)||t;if(!n&&o){const{data:e}=await l.from("users").select("id").eq("email",o).maybeSingle();(null==e?void 0:e.id)&&(n=e.id,localStorage.setItem("verifiedUserId",n))}if(!n)return;let i=null,r=null;try{const e=`https://hlcpoqxzqgbghsadouef.supabase.co/functions/v1/get-profile?userId=${n}`,s=await fetch(e,{method:"GET",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsY3BvcXh6cWdiZ2hzYWRvdWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzI2MTUsImV4cCI6MjA4MTcwODYxNX0.Qhbzj0g5FbpW0wgtGsJBF2AV0HqL-9X2S2nGL64KCYA","Content-Type":"application/json"}});if(s.ok){const e=await s.json();e.success&&(i=e.profile,r=e.user)}else{await s.text()}}catch(e){}if(!i){const e=await l.from("users").select("*").eq("id",n).maybeSingle();e.error||e.data&&(i=e.data,r=e.data)}const c=r||i;if(c){g(c);const e={firstName:(null==c?void 0:c.first_name)||"",lastName:(null==c?void 0:c.last_name)||"",username:(null==c?void 0:c.username)||"",location:(null==c?void 0:c.location)||"United States of America",language:(null==c?void 0:c.primary_language)||"English",email:(null==c?void 0:c.email)||(null==s?void 0:s.email)||o||""};w(e),(null==c?void 0:c.profile_picture_url)?y(c.profile_picture_url):y(null)}else o&&w(e=>({...e,email:o}))}catch(s){}finally{S(!1)}},[C,F]=a.useState(!1),[I,A]=a.useState(null),[L,S]=a.useState(!1),B=async()=>{F(!0),A(null);try{const{data:{user:s}}=await l.auth.getUser(),a=localStorage.getItem("verifiedUserId"),t=(null==s?void 0:s.id)||a;if(!t)return A("You must be logged in to save changes"),void F(!1);let o=null,n=null;if(b)try{const e=new FileReader;o=await new Promise((s,a)=>{e.onload=()=>{const a=e.result.split(",")[1];s(a)},e.onerror=a,e.readAsDataURL(b)}),n=b.name}catch(e){return A(`Failed to process profile picture: ${e.message}`),void F(!1)}const i="https://hlcpoqxzqgbghsadouef.supabase.co/functions/v1/save-profile",r=await fetch(i,{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsY3BvcXh6cWdiZ2hzYWRvdWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzI2MTUsImV4cCI6MjA4MTcwODYxNX0.Qhbzj0g5FbpW0wgtGsJBF2AV0HqL-9X2S2nGL64KCYA","Content-Type":"application/json"},body:JSON.stringify({userId:t,firstName:N.firstName,lastName:N.lastName,location:N.location,primaryLanguage:N.language,profilePictureBase64:o,profilePictureFileName:n})}),c=await r.json();if(!c.success)throw new Error(c.message||"Failed to save changes");j&&j.startsWith("blob:")&&URL.revokeObjectURL(j),await k(),v(null),y(null),f(!1)}catch(s){A(s.message||"Failed to save changes")}finally{F(!1)}},E=(s,a)=>e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#F8FAFC"},children:s}),e.jsx("p",{className:"text-sm",style:{color:"#94A3B8"},children:a})]})});return e.jsxs("div",{className:"h-screen text-white overflow-hidden flex flex-col",style:{backgroundColor:"#111111"},children:[e.jsx("header",{className:"flex-shrink-0 h-16 z-50",style:{backgroundColor:"#111111",borderBottom:"1px solid #1a1a1a"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 h-full flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>{const e=localStorage.getItem("currentDashboard");m(e||"/dashboard/creator")},className:"flex items-center gap-2 text-sm transition-colors hover:brightness-110",style:{color:"#94A3B8"},children:[e.jsx(t,{className:"w-4 h-4"}),"Back"]}),e.jsx("div",{className:"h-6 w-px",style:{backgroundColor:"#1a1a1a"}}),e.jsx("img",{src:"/elevate_transparent_white_.png",alt:"ELEVATE",className:"h-28 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>m("/")}),e.jsx(r,{})]})})}),e.jsx("div",{className:"flex-1 overflow-hidden pt-8 pb-8",children:e.jsxs("div",{className:"h-full max-w-5xl mx-auto px-8 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-10 flex-shrink-0",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center overflow-hidden border-2 border-white/10 shadow-lg",children:(null==p?void 0:p.profile_picture_url)?e.jsx("img",{src:p.profile_picture_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-1",style:{color:"#F8FAFC"},children:N.firstName||N.lastName?`${N.firstName} ${N.lastName}`.trim():"Your Name"}),e.jsxs("p",{className:"text-base",style:{color:"#64748B"},children:[N.username?`@${N.username}`:""," ",N.email]})]})]}),e.jsxs("div",{className:"flex gap-6 flex-1 overflow-hidden min-h-0",children:[e.jsx("aside",{className:"w-72 flex-shrink-0",children:e.jsx("div",{className:"rounded-2xl p-1 shadow-xl h-full",style:{backgroundColor:"#1a1a1e"},children:e.jsxs("nav",{className:"space-y-1 p-2",children:[e.jsx("button",{onClick:()=>h("personal"),className:"w-full text-left px-5 py-3.5 rounded-xl text-sm font-semibold transition-all duration-200 "+("personal"===u?"shadow-md":"hover:brightness-105"),style:{backgroundColor:"personal"===u?"#0f0f13":"transparent",color:"#F8FAFC"},children:"Personal info"}),e.jsx("button",{onClick:()=>h("accounts"),className:"w-full text-left px-5 py-3.5 rounded-xl text-sm font-semibold transition-all duration-200 "+("accounts"===u?"shadow-md":"hover:brightness-105"),style:{backgroundColor:"accounts"===u?"#0f0f13":"transparent",color:"#F8FAFC"},children:"Connected accounts"}),e.jsx("button",{onClick:()=>h("payout"),className:"w-full text-left px-5 py-3.5 rounded-xl text-sm font-semibold transition-all duration-200 "+("payout"===u?"shadow-md":"hover:brightness-105"),style:{backgroundColor:"payout"===u?"#0f0f13":"transparent",color:"#F8FAFC"},children:"Payment Method"}),e.jsx("button",{onClick:()=>h("notifications"),className:"w-full text-left px-5 py-3.5 rounded-xl text-sm font-semibold transition-all duration-200 "+("notifications"===u?"shadow-md":"hover:brightness-105"),style:{backgroundColor:"notifications"===u?"#0f0f13":"transparent",color:"#F8FAFC"},children:"Notifications"}),e.jsx("button",{onClick:()=>h("close"),className:"w-full text-left px-5 py-3.5 rounded-xl text-sm font-semibold transition-all duration-200 "+("close"===u?"shadow-md":"hover:brightness-105"),style:{backgroundColor:"close"===u?"#0f0f13":"transparent",color:"#F8FAFC"},children:"Close account"})]})})}),e.jsxs("main",{className:"flex-1 rounded-2xl p-8 shadow-xl overflow-y-auto",style:{backgroundColor:"#1a1a1e"},children:["personal"===u&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold",style:{color:"#F8FAFC"},children:"Personal info"}),e.jsx("button",{onClick:()=>{k()},disabled:L,className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#0f0f13",color:"#F8FAFC"},children:L?"Loading...":"Refresh Data"})]}),e.jsxs("div",{className:"mb-6 p-4 rounded-lg text-xs space-y-1",style:{backgroundColor:"#0f0f13",color:"#94A3B8"},children:[e.jsx("div",{className:"font-bold mb-2 text-white",children:"ðŸ” Debug Info:"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"userId:"})," ",localStorage.getItem("verifiedUserId")||"âŒ Not found"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",localStorage.getItem("verifiedEmail")||"âŒ Not found"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Has Profile Data:"})," ",p?"âœ… Yes":"âŒ No"]}),p&&e.jsxs("div",{className:"pl-4 text-green-400",children:[e.jsxs("div",{children:["âœ“ Profile ID: ",null==(U=p.id)?void 0:U.substring(0,8),"..."]}),e.jsxs("div",{children:["âœ“ User Type: ",p.user_type]})]}),e.jsx("div",{className:"font-semibold mt-2",children:"Form Data:"}),e.jsxs("div",{className:"pl-4",children:[e.jsxs("div",{children:["â€¢ First Name: ",N.firstName||"(empty)"]}),e.jsxs("div",{children:["â€¢ Last Name: ",N.lastName||"(empty)"]}),e.jsxs("div",{children:["â€¢ Username: ",N.username||"(empty)"]}),e.jsxs("div",{children:["â€¢ Email: ",N.email||"(empty)"]}),e.jsxs("div",{children:["â€¢ Location: ",N.location]}),e.jsxs("div",{children:["â€¢ Language: ",N.language]})]}),!p&&e.jsx("div",{className:"mt-2 p-2 rounded",style:{backgroundColor:"#7f1d1d",color:"#fecaca"},children:"âš ï¸ NO PROFILE DATA FOUND! This user hasn't completed onboarding yet."}),e.jsx("div",{className:"mt-2 text-yellow-400",children:'ðŸ‘‰ Open browser console (F12) and click "Refresh Data" to see detailed logs'})]}),L?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):e.jsxs("div",{className:"space-y-7",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",style:{color:"#94A3B8"},children:"Profile picture"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center overflow-hidden border-2 border-white/10 shadow-md",children:j?e.jsx("img",{src:j,alt:"Profile",className:"w-full h-full object-cover"}):(null==p?void 0:p.profile_picture_url)?e.jsx("img",{src:p.profile_picture_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("label",{className:"flex items-center gap-2 px-5 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 hover:brightness-110 shadow-sm cursor-pointer",style:{backgroundColor:"#0f0f13",color:"#F8FAFC"},children:[e.jsx(o,{className:"w-4 h-4"}),"Replace picture",e.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a){v(a);const e=URL.createObjectURL(a);y(e)}},className:"hidden"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2.5",style:{color:"#94A3B8"},children:"First name"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:N.firstName,onChange:e=>w({...N,firstName:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&x&&!C&&B()},disabled:!x,className:"flex-1 h-12 px-4 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-white/10 transition-all",style:{color:"#F8FAFC",background:"#0f0f13",border:"1px solid rgba(75, 85, 99, 0.2)"}}),!x&&e.jsx("button",{onClick:()=>f(!0),className:"p-2.5 hover:brightness-110 transition-all rounded-lg",style:{color:"#64748B"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2.5",style:{color:"#94A3B8"},children:"Last name"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:N.lastName,onChange:e=>w({...N,lastName:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&x&&!C&&B()},disabled:!x,className:"flex-1 h-12 px-4 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-white/10 transition-all",style:{color:"#F8FAFC",background:"#0f0f13",border:"1px solid rgba(75, 85, 99, 0.2)"}}),e.jsx("div",{className:"w-10 h-10"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2.5",style:{color:"#94A3B8"},children:"Username"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 flex items-center h-12 px-4 rounded-xl transition-all opacity-70",style:{background:"#0f0f13",border:"1px solid rgba(75, 85, 99, 0.2)"},children:[e.jsx("span",{style:{color:"#64748B"},children:"@"}),e.jsx("input",{type:"text",value:N.username,disabled:!0,readOnly:!0,className:"flex-1 bg-transparent text-sm focus:outline-none ml-1 cursor-not-allowed",style:{color:"#F8FAFC"},title:"Username cannot be changed after onboarding"})]}),e.jsx("div",{className:"w-10 h-10"})]}),e.jsx("p",{className:"text-xs mt-1.5",style:{color:"#64748B"},children:"Username cannot be changed after onboarding"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2.5",style:{color:"#94A3B8"},children:"Location"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 flex items-center h-12 px-4 rounded-xl focus-within:ring-2 focus-within:ring-white/10 transition-all",style:{background:"#0f0f13",border:"1px solid rgba(75, 85, 99, 0.2)"},children:[e.jsx(n,{className:"w-4 h-4 mr-2 flex-shrink-0",style:{color:"#64748B"}}),e.jsx("select",{value:N.location,onChange:e=>w({...N,location:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&x&&!C&&B()},disabled:!x,className:"flex-1 bg-transparent text-sm focus:outline-none",style:{color:"#F8FAFC"},children:c.map(s=>e.jsx("option",{value:s,style:{background:"#0f0f13"},children:s},s))})]}),!x&&e.jsx("button",{onClick:()=>f(!0),className:"p-2.5 hover:brightness-110 transition-all rounded-lg",style:{color:"#64748B"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2.5",style:{color:"#94A3B8"},children:"Languages you post in"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 flex items-center h-12 px-4 rounded-xl focus-within:ring-2 focus-within:ring-white/10 transition-all",style:{background:"#0f0f13",border:"1px solid rgba(75, 85, 99, 0.2)"},children:[e.jsx(i,{className:"w-4 h-4 mr-2 flex-shrink-0",style:{color:"#64748B"}}),e.jsx("select",{value:N.language,onChange:e=>w({...N,language:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&x&&!C&&B()},disabled:!x,className:"flex-1 bg-transparent text-sm focus:outline-none",style:{color:"#F8FAFC"},children:d.map(s=>e.jsx("option",{value:s,style:{background:"#0f0f13"},children:s},s))})]}),!x&&e.jsx("button",{onClick:()=>f(!0),className:"p-2.5 hover:brightness-110 transition-all rounded-lg",style:{color:"#64748B"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2.5",style:{color:"#94A3B8"},children:"Email"}),e.jsx("input",{type:"email",value:N.email,disabled:!0,className:"w-full h-12 px-4 rounded-xl text-sm focus:outline-none opacity-50",style:{color:"#F8FAFC",background:"#0f0f13",border:"1px solid rgba(75, 85, 99, 0.2)"}}),e.jsx("p",{className:"text-xs mt-1.5",style:{color:"#64748B"},children:"Email cannot be changed"})]}),I&&e.jsx("div",{className:"text-red-500 text-sm mt-4",children:I}),x&&e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>{j&&j.startsWith("blob:")&&URL.revokeObjectURL(j),f(!1),v(null),y((null==p?void 0:p.profile_picture_url)||null),p&&w({firstName:(null==p?void 0:p.first_name)||"",lastName:(null==p?void 0:p.last_name)||"",username:(null==p?void 0:p.username)||"",location:(null==p?void 0:p.location)||"United States of America",language:(null==p?void 0:p.primary_language)||"English",email:(null==p?void 0:p.email)||N.email})},className:"px-7 py-3 rounded-xl text-sm font-semibold transition-all duration-200 hover:brightness-110 shadow-sm",style:{backgroundColor:"#0f0f13",color:"#F8FAFC"},children:"Cancel"}),e.jsx("button",{onClick:B,disabled:C,className:"px-7 py-3 rounded-xl text-sm font-semibold transition-all duration-200 hover:brightness-110 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#E8E8E8",color:"#000000"},children:C?"Saving...":"Save changes"})]})]})]}),"accounts"===u&&E("Connected accounts","Manage your social media connections"),"payout"===u&&E("Payment Method","Payments are typically processed automatically through Tipalti. If a payout needs to be issued outside of Tipalti, you can add an alternative payment method."),"notifications"===u&&E("Notifications","Manage your notification preferences"),"close"===u&&E("Close account","Delete your account and data")]})]})]})})]});var U}export{m as SettingsPage};
