const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-B-g7agtC.js","assets/spline-DN92G9fQ.js","assets/react-vendor-C5CBPnGl.js","assets/createLucideIcon-DApH4y_Q.js","assets/plus-huPEdIgT.js","assets/SignupPage-MfMTclbm.js","assets/supabase-CAOwvaCC.js","assets/LoginPage-CTUEiec0.js","assets/UserTypeSelectionPage-BySCCs_E.js","assets/MakeProfilePage-D3fKMCmn.js","assets/TellUsAboutYourselfPage-D-sFM84w.js","assets/ContactForm-DVBgjtjv.js","assets/chevron-down-BtUUkoj_.js","assets/ArtistDashboard-Ck_YW6Li.js","assets/SettingsView-CcVI6Jai.js","assets/debounce-BXBQ5-RS.js","assets/arrow-left-D6ZoFILw.js","assets/map-pin-D8GFr4Pd.js","assets/DoorTransition-qwGU0lrz.js","assets/CreatorDashboard-DdxVADpU.js","assets/BusinessDashboard-DQ-6Jn2e.js","assets/MobileMenuPage-Bwwb7oHr.js","assets/SettingsPage-DHaj-fxh.js","assets/VerifySetupPage-CqAFf79Q.js","assets/AdminLoginPage-CMvKhGVp.js","assets/AdminDashboard-DYDo2V_D.js"])))=>i.map(i=>d[i]);
import{j as e,_ as t}from"./spline-DN92G9fQ.js";import{a as s,r as n,N as a,B as r,R as i,b as o}from"./react-vendor-C5CBPnGl.js";import{c as l}from"./supabase-CAOwvaCC.js";var c;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var d=s;c=d.createRoot,d.hydrateRoot;const u="https://hlcpoqxzqgbghsadouef.supabase.co",m="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsY3BvcXh6cWdiZ2hzYWRvdWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzI2MTUsImV4cCI6MjA4MTcwODYxNX0.Qhbzj0g5FbpW0wgtGsJBF2AV0HqL-9X2S2nGL64KCYA",h=l(u,m);function f({text:t="Loading...",barCount:s=5,className:n=""}){return e.jsxs("div",{className:`flex flex-col items-center justify-center ${n}`,children:[e.jsx("div",{className:"flex items-end gap-1.5 mb-4",children:Array.from({length:s}).map((t,s)=>e.jsx("div",{className:"w-1.5 rounded-full animate-bar",style:{backgroundColor:"#F8FAFC",height:"32px",animationDelay:.05*s+"s"}},s))}),t&&e.jsx("p",{className:"text-sm",style:{color:"#64748B"},children:t})]})}function p({children:t}){const[s,r]=n.useState(null),[i,o]=n.useState(!0);return n.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("verifiedUserId"),t=localStorage.getItem("verifiedEmail");if(e)return r(!0),void o(!1);if(t){const{data:{user:e}}=await h.auth.getUser();if(e)r(!0);else{const{data:e}=await h.from("users").select("id").eq("email",t).maybeSingle();(null==e?void 0:e.id)?(localStorage.setItem("verifiedUserId",e.id),r(!0)):r(!1)}}else{const{data:{session:e}}=await h.auth.getSession();r(!!e)}}catch(e){r(!1)}finally{o(!1)}})()},[]),i?e.jsx("div",{style:{backgroundColor:"#000",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:e.jsx(f,{text:"Loading..."})}):s?t:e.jsx(a,{to:"/login",replace:!0})}const g=n.createContext(void 0);function x({children:t}){const[s,a]=n.useState(null),[r,i]=n.useState(null),[o,l]=n.useState(!0),c=n.useRef(null);n.useEffect(()=>{l(!1)},[]);const d=async()=>{try{const e=c.current||r;if(!e)return l(!1),!1;const t=await fetch(`${u}/functions/v1/admin-verify-session`,{method:"GET",headers:{Authorization:`Bearer ${m}`,"X-Session-Token":e,"Content-Type":"application/json"}}),s=await t.json();return s.success&&s.admin?(a(s.admin),c.current=e,l(!1),!0):(a(null),i(null),c.current=null,l(!1),!1)}catch(e){return a(null),i(null),c.current=null,l(!1),!1}},h={admin:s,sessionToken:c.current||r,isLoading:o,isAuthenticated:!!s,login:async(e,t,s)=>{try{const n=await fetch(`${u}/functions/v1/admin-login`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({email:e,password:t,totpCode:s})});if(!n.ok){await n.text();return{success:!1,message:`Server error: ${n.status}`}}const r=await n.text();if(!r)return{success:!1,message:"Empty response from server"};const o=JSON.parse(r);return o.success&&o.sessionToken&&o.admin?(c.current=o.sessionToken,i(o.sessionToken),a(o.admin),{success:!0}):{success:!1,message:o.message||"Login failed",requiresTotp:o.requiresTotp||!1}}catch(n){return{success:!1,message:n.message||"Login failed"}}},logout:async()=>{try{r&&await fetch(`${u}/functions/v1/admin-logout`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"X-Session-Token":r,"Content-Type":"application/json"}})}catch(e){}finally{a(null),i(null),c.current=null}},verifySession:d,hasPermission:(e,t)=>{if(!s||!s.permissions)return!1;const n=s.permissions[e];return!(!n||!Array.isArray(n))&&n.includes(t)},refreshSession:async()=>{await d()}};return e.jsx(g.Provider,{value:h,children:t})}function j(){const e=n.useContext(g);if(void 0===e)throw new Error("useAdminAuth must be used within an AdminAuthProvider");return e}function y({children:t,requiredPermission:s}){const{isAuthenticated:n,isLoading:r,hasPermission:i}=j();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#111111"},children:e.jsx(f,{text:"Loading dashboard..."})}):n?s&&!i(s.resource,s.action)?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#111111"},children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-400",children:"You don't have permission to access this page."})]})}):e.jsx(e.Fragment,{children:t}):e.jsx(a,{to:"/admin/login",replace:!0})}function _(){return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center",style:{backgroundColor:"#000000"},children:e.jsxs("div",{className:"relative",style:{width:"100px",height:"100px"},children:[e.jsx("div",{className:"absolute rounded-full",style:{width:"100px",height:"100px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"radial-gradient(circle, rgba(255, 255, 255, 0.06) 0%, transparent 70%)",animation:"premium-pulse 2.5s ease-in-out infinite"}}),e.jsx("div",{className:"absolute rounded-full",style:{width:"70px",height:"70px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"radial-gradient(circle, rgba(255, 255, 255, 0.04) 0%, transparent 70%)",animation:"premium-pulse 2.5s ease-in-out infinite 0.4s"}}),e.jsx("div",{className:"absolute rounded-full",style:{width:"40px",height:"40px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"radial-gradient(circle, rgba(255, 255, 255, 0.08) 0%, transparent 60%)",animation:"premium-pulse 2.5s ease-in-out infinite 0.8s"}}),e.jsx("div",{className:"absolute rounded-full",style:{width:"3px",height:"3px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(255, 255, 255, 0.5)",boxShadow:"0 0 6px rgba(255, 255, 255, 0.2)"}})]})})}const b=n.lazy(()=>t(()=>import("./HomePage-B-g7agtC.js"),__vite__mapDeps([0,1,2,3,4])).then(e=>({default:e.HomePage}))),P=n.lazy(()=>t(()=>import("./SignupPage-MfMTclbm.js"),__vite__mapDeps([5,1,2,6])).then(e=>({default:e.SignupPage}))),v=n.lazy(()=>t(()=>import("./LoginPage-CTUEiec0.js"),__vite__mapDeps([7,1,2,6])).then(e=>({default:e.LoginPage}))),A=n.lazy(()=>t(()=>import("./UserTypeSelectionPage-BySCCs_E.js"),__vite__mapDeps([8,1,2,6])).then(e=>({default:e.UserTypeSelectionPage}))),E=n.lazy(()=>t(()=>import("./MakeProfilePage-D3fKMCmn.js"),__vite__mapDeps([9,1,2,6])).then(e=>({default:e.MakeProfilePage}))),I=n.lazy(()=>t(()=>import("./TellUsAboutYourselfPage-D-sFM84w.js"),__vite__mapDeps([10,1,2,6])).then(e=>({default:e.TellUsAboutYourselfPage}))),T=n.lazy(()=>t(()=>import("./ContactForm-DVBgjtjv.js"),__vite__mapDeps([11,1,2,3,12])).then(e=>({default:e.ContactForm}))),L=n.lazy(()=>t(()=>import("./ArtistDashboard-Ck_YW6Li.js"),__vite__mapDeps([13,1,2,14,3,15,16,4,12,17,18,6])).then(e=>({default:e.ArtistDashboard}))),S=n.lazy(()=>t(()=>import("./CreatorDashboard-DdxVADpU.js"),__vite__mapDeps([19,1,2,14,3,15,16,4,12,17,18,6])).then(e=>({default:e.CreatorDashboard}))),w=n.lazy(()=>t(()=>import("./BusinessDashboard-DQ-6Jn2e.js"),__vite__mapDeps([20,1,2,18])).then(e=>({default:e.BusinessDashboard}))),D=n.lazy(()=>t(()=>import("./MobileMenuPage-Bwwb7oHr.js"),__vite__mapDeps([21,1,2])).then(e=>({default:e.MobileMenuPage}))),O=n.lazy(()=>t(()=>import("./SettingsPage-DHaj-fxh.js"),__vite__mapDeps([22,1,2,16,3,17,6])).then(e=>({default:e.SettingsPage}))),z=n.lazy(()=>t(()=>import("./VerifySetupPage-CqAFf79Q.js"),__vite__mapDeps([23,1,2,6])).then(e=>({default:e.VerifySetupPage}))),N=n.lazy(()=>t(()=>import("./AdminLoginPage-CMvKhGVp.js"),__vite__mapDeps([24,1,2,6])).then(e=>({default:e.AdminLoginPage}))),C=n.lazy(()=>t(()=>import("./AdminDashboard-DYDo2V_D.js"),__vite__mapDeps([25,1,2,15,3,16,6])).then(e=>({default:e.AdminDashboard})));function k(){return e.jsx(x,{children:e.jsx(r,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(n.Suspense,{fallback:e.jsx(_,{}),children:e.jsxs(i,{children:[e.jsx(o,{path:"/",element:e.jsx(b,{})}),e.jsx(o,{path:"/menu",element:e.jsx(D,{})}),e.jsx(o,{path:"/signup",element:e.jsx(P,{})}),e.jsx(o,{path:"/login",element:e.jsx(v,{})}),e.jsx(o,{path:"/user-type-selection",element:e.jsx(A,{})}),e.jsx(o,{path:"/make-profile",element:e.jsx(E,{})}),e.jsx(o,{path:"/tell-us-about-yourself",element:e.jsx(I,{})}),e.jsx(o,{path:"/contact",element:e.jsx(T,{})}),e.jsx(o,{path:"/dashboard/artist",element:e.jsx(p,{children:e.jsx(L,{})})}),e.jsx(o,{path:"/dashboard/creator",element:e.jsx(p,{children:e.jsx(S,{})})}),e.jsx(o,{path:"/dashboard/business",element:e.jsx(p,{children:e.jsx(w,{})})}),e.jsx(o,{path:"/settings",element:e.jsx(p,{children:e.jsx(O,{})})}),e.jsx(o,{path:"/verify-setup",element:e.jsx(z,{})}),e.jsx(o,{path:"/admin/login",element:e.jsx(N,{})}),e.jsx(o,{path:"/admin/dashboard",element:e.jsx(y,{children:e.jsx(C,{})})})]})})})})}document.body.classList.add("preload"),window.addEventListener("load",()=>{setTimeout(()=>{document.body.classList.remove("preload")},100)});const R=document.getElementById("root");if(!R)throw new Error("Root element not found");c(R).render(e.jsx(n.StrictMode,{children:e.jsx(k,{})}));export{f as A,u as S,m as a,h as s,j as u};
