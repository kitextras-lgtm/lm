import{j as e}from"./spline-C1bWgT9i.js";import{r,f as t}from"./react-vendor-D-1Z2fag.js";import{S as s,a,s as l,u as o}from"./index-DPBRF2P4.js";import{L as n,u as i,U as c,e as d,Y as u,I as m,c as x,T as p,f as h,g as y,D as f,a as g,h as v,i as b,j,k,l as w,m as C,d as N,n as _,o as L,p as T}from"./SettingsView-4WIeKVaH.js";import{P as S}from"./plus-BCtRZ9is.js";import{C as E}from"./loader-2-BKtSGDzb.js";import{X as W}from"./x-wo8mI0S6.js";import{C as M}from"./check-C5bJyFii.js";import{c as I}from"./createLucideIcon-Dr5VM9HU.js";import{C as F}from"./chevron-down-ET2sv1ZZ.js";import{A}from"./alert-circle-DZ8aNWen.js";import{A as U}from"./arrow-left-EZXjPn0x.js";import{C as B}from"./camera-BW9-W4LN.js";import{M as O}from"./map-pin-D_lNttE0.js";
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=I("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),z=I("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),$=I("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function D({isHovered:r=!1}){return e.jsx("div",{className:"flex items-center justify-center overflow-visible",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 overflow-visible",children:[e.jsx("circle",{cx:"24",cy:"20",r:"14",fill:"currentColor",style:{opacity:r?.15:0,transform:r?"scale(1.3)":"scale(1)",transformOrigin:"24px 20px",filter:"blur(8px)",transition:"all 0.4s ease"}}),e.jsx("path",{d:"M24 6C17.4 6 12 11.4 12 18C12 22.4 14.4 26.2 18 28.4V34H30V28.4C33.6 26.2 36 22.4 36 18C36 11.4 30.6 6 24 6Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinejoin:"round",fill:"none",style:{filter:r?"drop-shadow(0 0 6px rgba(255,255,255,0.6))":"none",transition:"filter 0.3s ease"}}),e.jsx("line",{x1:"18",y1:"38",x2:"30",y2:"38",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("line",{x1:"20",y1:"42",x2:"28",y2:"42",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M24 12L25.5 17H30.5L26.5 20L28 25L24 22L20 25L21.5 20L17.5 17H22.5L24 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round",fill:"none",style:{opacity:r?1:.5,transform:r?"scale(1.1)":"scale(1)",transformOrigin:"24px 18px",transition:"all 0.3s ease"}})]})})}function P({isHovered:r=!1}){return e.jsx("div",{className:"flex items-center justify-center overflow-visible",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 overflow-visible",style:{transform:r?"rotate(5deg)":"rotate(0deg)",transition:"transform 0.15s ease-in-out"},children:[e.jsx("ellipse",{cx:"24",cy:"28",rx:"10",ry:"12",stroke:"currentColor",strokeWidth:"2.5",fill:"none",style:{transform:r?"scale(1.05)":"scale(1)",transformOrigin:"24px 28px",transition:"transform 0.3s ease"}}),e.jsx("circle",{cx:"24",cy:"14",r:"5",stroke:"currentColor",strokeWidth:"2.5",fill:"none"}),e.jsx("path",{d:"M20 10L16 4",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:r?"rotate(-15deg)":"rotate(0deg)",transformOrigin:"20px 10px",transition:"transform 0.2s ease"}}),e.jsx("path",{d:"M28 10L32 4",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:r?"rotate(15deg)":"rotate(0deg)",transformOrigin:"28px 10px",transition:"transform 0.2s ease"}}),e.jsx("line",{x1:"14",y1:"24",x2:"34",y2:"24",stroke:"currentColor",strokeWidth:"2.5"}),e.jsx("line",{x1:"14",y1:"32",x2:"34",y2:"32",stroke:"currentColor",strokeWidth:"2.5"}),e.jsx("path",{d:"M14 24L8 20",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:r?"rotate(-10deg)":"rotate(0deg)",transformOrigin:"14px 24px",transition:"transform 0.2s ease 0.05s"}}),e.jsx("path",{d:"M14 28L6 28",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:r?"translateX(-2px)":"translateX(0)",transition:"transform 0.2s ease 0.1s"}}),e.jsx("path",{d:"M14 32L8 36",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:r?"rotate(10deg)":"rotate(0deg)",transformOrigin:"14px 32px",transition:"transform 0.2s ease 0.15s"}}),e.jsx("path",{d:"M34 24L40 20",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:r?"rotate(10deg)":"rotate(0deg)",transformOrigin:"34px 24px",transition:"transform 0.2s ease 0.05s"}}),e.jsx("path",{d:"M34 28L42 28",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:r?"translateX(2px)":"translateX(0)",transition:"transform 0.2s ease 0.1s"}}),e.jsx("path",{d:"M34 32L40 36",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:r?"rotate(-10deg)":"rotate(0deg)",transformOrigin:"34px 32px",transition:"transform 0.2s ease 0.15s"}})]})})}function q({isHovered:r=!1}){return e.jsx("div",{className:"flex items-center justify-center overflow-visible",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 overflow-visible",style:{transform:r?"translateY(-2px)":"translateY(0)",transition:"transform 0.3s ease"},children:[e.jsx("path",{d:"M8 40L28 20",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:r?"rotate(-5deg)":"rotate(0deg)",transformOrigin:"8px 40px",transition:"transform 0.3s ease"}}),e.jsx("path",{d:"M28 20L32 16L36 20L32 24L28 20Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinejoin:"round",fill:"none",style:{transform:r?"rotate(-5deg)":"rotate(0deg)",transformOrigin:"8px 40px",transition:"transform 0.3s ease"}}),e.jsx("circle",{cx:"38",cy:"10",r:"2",fill:"currentColor",style:{opacity:r?1:.5,transform:r?"scale(1.3)":"scale(1)",transformOrigin:"38px 10px",transition:"all 0.3s ease"}}),e.jsx("circle",{cx:"42",cy:"18",r:"1.5",fill:"currentColor",style:{opacity:r?1:.3,transform:r?"scale(1.5)":"scale(1)",transformOrigin:"42px 18px",transition:"all 0.3s ease 0.1s"}}),e.jsx("circle",{cx:"34",cy:"6",r:"1.5",fill:"currentColor",style:{opacity:r?1:.3,transform:r?"scale(1.5)":"scale(1)",transformOrigin:"34px 6px",transition:"all 0.3s ease 0.15s"}}),e.jsx("path",{d:"M18 8L19 11L22 12L19 13L18 16L17 13L14 12L17 11L18 8Z",fill:"currentColor",style:{opacity:r?1:0,transform:r?"scale(1.2) rotate(15deg)":"scale(0.8) rotate(0deg)",transformOrigin:"18px 12px",transition:"all 0.3s ease 0.05s"}})]})})}function Y({isHovered:r=!1}){return e.jsx("div",{className:"flex items-center justify-center overflow-visible",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 overflow-visible",style:{transform:r?"rotate(-8deg) translateY(-2px)":"rotate(0deg) translateY(0)",transition:"transform 0.3s ease"},children:[e.jsx("path",{d:"M12 36L8 40L12 44L36 20L32 16L12 36Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinejoin:"round",fill:"none"}),e.jsx("path",{d:"M36 20L40 16L44 12L40 8L36 12L32 16L36 20Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinejoin:"round",fill:"none"}),e.jsx("line",{x1:"14",y1:"34",x2:"18",y2:"38",stroke:"currentColor",strokeWidth:"2.5"}),e.jsx("line",{x1:"6",y1:"28",x2:"14",y2:"28",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",style:{opacity:r?1:0,transform:r?"translateX(0)":"translateX(-4px)",transition:"all 0.3s ease"}}),e.jsx("line",{x1:"6",y1:"22",x2:"18",y2:"22",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",style:{opacity:r?1:0,transform:r?"translateX(0)":"translateX(-4px)",transition:"all 0.3s ease 0.1s"}}),e.jsx("line",{x1:"6",y1:"16",x2:"12",y2:"16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",style:{opacity:r?1:0,transform:r?"translateX(0)":"translateX(-4px)",transition:"all 0.3s ease 0.15s"}})]})})}function H(){return e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"home-icon-wrapper",style:{width:"48px",height:"48px",overflow:"visible"},children:e.jsxs("div",{className:"relative",style:{width:"48px",height:"48px",overflow:"visible"},children:[e.jsx("div",{className:"absolute",style:{left:0,top:0,width:"48px",height:"48px",overflow:"visible"},children:e.jsx(n,{className:"animate-link-left",size:48,strokeWidth:2.5,style:{clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)",color:"var(--text-primary)"}})}),e.jsx("div",{className:"absolute",style:{left:0,top:0,width:"48px",height:"48px",overflow:"visible"},children:e.jsx(n,{className:"animate-link-right",size:48,strokeWidth:2.5,style:{clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)",color:"var(--text-primary)"}})})]})})})}const V=`${s}/functions/v1/social-links`,X=`${s}/functions/v1/verify-social-link`,Z={"Content-Type":"application/json",Authorization:`Bearer ${a}`},G={YouTube:u,Instagram:m,TikTok:x,Twitter:p,Twitch:h,Other:n};function J({value:t,options:s,onChange:a,platformIcons:l}){const[o,n]=r.useState(!1),i=r.useRef(null);r.useEffect(()=>{const e=e=>{i.current&&!i.current.contains(e.target)&&n(!1)};return o&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);const c=l[t]||null,d=s.find(e=>e.key===t);return e.jsxs("div",{className:"relative",ref:i,children:[e.jsxs("button",{type:"button",onClick:()=>n(!o),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/20 flex items-center justify-between group border",style:{backgroundColor:"transparent",borderColor:"var(--border-subtle)",color:"var(--text-primary)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--bg-elevated)",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.transform="translateY(0)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsx(c,{className:"w-4 h-4 transition-all duration-200 group-hover:scale-110",style:{color:"var(--text-primary)"}}),e.jsx("span",{className:"transition-all duration-200",children:(null==d?void 0:d.label)||t})]}),e.jsx(F,{className:"w-4 h-4 transition-all duration-200 group-hover:scale-110 "+(o?"rotate-180":""),style:{color:"var(--text-primary)"}})]}),o&&e.jsx("div",{className:"absolute z-50 w-full mt-1 rounded-lg shadow-xl overflow-hidden animate-fade-in-down",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-default)"},children:e.jsx("div",{className:"max-h-60 overflow-y-auto",children:s.map(r=>{const s=l[r.key]||null,o=r.key===t;return e.jsxs("button",{type:"button",onClick:()=>{a(r.key),n(!1)},className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 text-left text-sm transition-all duration-200 flex items-center gap-2 group/option relative",style:{backgroundColor:o?"var(--bg-elevated)":"transparent",color:"var(--text-primary)"},onMouseEnter:e=>{o||(e.currentTarget.style.backgroundColor="var(--bg-elevated)"),e.currentTarget.style.transform="translateX(4px)"},onMouseLeave:e=>{o||(e.currentTarget.style.backgroundColor="transparent"),e.currentTarget.style.transform="translateX(0)"},children:[s&&e.jsxs("div",{className:"relative group/icon",children:[e.jsx(s,{className:"w-4 h-4 transition-all duration-300 group-hover/option:scale-125 group-hover/option:rotate-12 group-hover/icon:scale-150 group-hover/icon:rotate-180",style:{color:"var(--text-primary)"}}),e.jsx("div",{className:"absolute inset-0 w-4 h-4 rounded-full opacity-0 group-hover/icon:opacity-20 group-hover/icon:scale-150 transition-all duration-300",style:{backgroundColor:"var(--text-primary)"}})]}),e.jsx("span",{className:"transition-all duration-200",children:r.label}),o&&e.jsx("span",{className:"ml-auto text-xs transition-all duration-200",style:{color:"var(--text-primary)"},children:"✓"})]},r.key)})})})]})}const K="w-full px-4 py-2.5 rounded-xl text-sm focus:outline-none transition-all border",Q={backgroundColor:"var(--bg-elevated)",borderColor:"var(--border-subtle)",color:"var(--text-primary)"};function ee({value:t,options:s,onChange:a}){const[l,o]=r.useState(!1),n=r.useRef(null);return r.useEffect(()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&o(!1)};return l&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[l]),e.jsxs("div",{className:"relative",ref:n,children:[e.jsxs("button",{type:"button",onClick:()=>o(e=>!e),className:"w-full px-4 py-2.5 rounded-xl text-sm focus:outline-none transition-all border flex items-center justify-between",style:{backgroundColor:"var(--bg-elevated)",borderColor:l?"var(--text-primary)":"var(--border-subtle)",color:"var(--text-primary)"},children:[e.jsx("span",{children:t}),e.jsx(F,{className:"w-4 h-4 transition-transform duration-200 "+(l?"rotate-180":"")})]}),l&&e.jsx("div",{className:"absolute z-50 w-full mt-1 rounded-xl overflow-hidden shadow-xl animate-fade-in",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-default)"},children:s.map(r=>e.jsxs("button",{type:"button",onClick:()=>{a(r),o(!1)},className:"w-full px-4 py-2.5 text-sm text-left flex items-center justify-between transition-all",style:{color:"var(--text-primary)",backgroundColor:t===r?"var(--bg-elevated)":"transparent"},onMouseEnter:e=>{e.currentTarget.style.transform="translateX(4px)",e.currentTarget.style.backgroundColor="var(--bg-elevated)"},onMouseLeave:e=>{e.currentTarget.style.transform="",e.currentTarget.style.backgroundColor=t===r?"var(--bg-elevated)":"transparent"},children:[r,t===r&&e.jsx("span",{style:{color:"var(--text-primary)"},children:"✓"})]},r))})]})}function re({label:r,children:t}){return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"text-sm font-medium flex-shrink-0 w-40 text-right pt-2.5",style:{color:"var(--text-primary)"},children:r}),e.jsx("div",{className:"flex-1",children:t})]})}function te({onClose:t,onSubmit:s}){const[a,l]=r.useState({name:"",imageFile:null,imagePreview:"",appleMusicId:"",spotifyId:"",soundcloudId:"",deezerId:"",audiomackId:"",amazonId:"",type:"Solo Artist",role:"Artist role",genre:"Select a main genre",bio:"",country:"United States",websiteUrl:"",facebookUrl:"",xHandle:"",instagramHandle:"",youtubeChannel:"",tiktokUsername:""}),o=e=>l(r=>({...r,...e}));return e.jsxs("div",{className:"space-y-5 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4",style:{borderBottom:"1px solid var(--border-subtle)"},children:[e.jsxs("h3",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:["Add ",e.jsx("span",{className:"font-bold",children:"New Artist"})]}),e.jsx("button",{onClick:t,style:{color:"var(--text-primary)"},children:e.jsx(W,{className:"w-5 h-5"})})]}),e.jsx(re,{label:"Artist name:",children:e.jsx("input",{type:"text",placeholder:"Enter stage name",value:a.name,onChange:e=>o({name:e.target.value}),className:K,style:Q,onFocus:e=>e.target.style.borderColor="var(--text-primary)",onBlur:e=>e.target.style.borderColor="var(--border-subtle)"})}),e.jsx(re,{label:"Artist image:",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-32 h-32 rounded-xl flex items-center justify-center flex-shrink-0",style:{border:"2px dashed var(--border-subtle)",backgroundColor:"var(--bg-elevated)"},children:a.imagePreview?e.jsx("img",{src:a.imagePreview,alt:"preview",className:"w-full h-full object-cover rounded-xl"}):e.jsx(c,{className:"w-10 h-10",style:{color:"var(--text-primary)"}})}),e.jsxs("label",{className:"flex-1 flex flex-col items-center justify-center gap-2 rounded-xl cursor-pointer transition-all duration-200",style:{border:"2px dashed var(--border-subtle)",backgroundColor:"var(--bg-elevated)",minHeight:"128px"},onMouseEnter:e=>e.currentTarget.style.borderColor="var(--text-primary)",onMouseLeave:e=>e.currentTarget.style.borderColor="var(--border-subtle)",onDragOver:e=>{e.preventDefault(),e.currentTarget.style.borderColor="var(--text-primary)"},onDragLeave:e=>e.currentTarget.style.borderColor="var(--border-subtle)",onDrop:e=>{e.preventDefault(),e.currentTarget.style.borderColor="var(--border-subtle)";const r=e.dataTransfer.files[0];r&&o({imageFile:r,imagePreview:URL.createObjectURL(r)})},children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{var r;const t=null==(r=e.target.files)?void 0:r[0];t&&o({imageFile:t,imagePreview:URL.createObjectURL(t)})}}),e.jsx(z,{className:"w-6 h-6",style:{color:"var(--text-primary)"}}),e.jsxs("p",{className:"text-xs text-center",style:{color:"var(--text-primary)"},children:["Drag image here",e.jsx("br",{}),"or"]}),e.jsx("span",{className:"px-4 py-1 rounded-full text-xs font-semibold",style:{border:"1px solid var(--text-primary)",color:"var(--text-primary)"},children:"Select file"})]})]})}),["appleMusicId","spotifyId","soundcloudId","deezerId","audiomackId","amazonId"].map(r=>e.jsx(re,{label:{appleMusicId:"Apple Music ID:",spotifyId:"Spotify ID:",soundcloudId:"Soundcloud ID:",deezerId:"Deezer ID:",audiomackId:"Audiomack ID:",amazonId:"Amazon ID:"}[r],children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter ID if you already have one",value:a[r],onChange:e=>o({[r]:e.target.value}),className:K,style:Q,onFocus:e=>e.target.style.borderColor="var(--text-primary)",onBlur:e=>e.target.style.borderColor="var(--border-subtle)"}),e.jsx(z,{className:"w-5 h-5 flex-shrink-0",style:{color:"var(--text-primary)"}})]})},r)),e.jsx(re,{label:"Type",children:e.jsx(ee,{value:a.type,options:["Solo Artist","Band / Group","Orchestra","Choir"],onChange:e=>o({type:e})})}),e.jsx(re,{label:"Role",children:e.jsx(ee,{value:a.role,options:["Main Artist","Featured Artist","Composer","Producer","Lyricist"],onChange:e=>o({role:e})})}),e.jsx(re,{label:"Main Genre",children:e.jsx(ee,{value:a.genre,options:["Pop","Hip-Hop / Rap","R&B / Soul","Rock","Electronic","Jazz","Classical","Country","Latin","Reggae","Gospel","Other"],onChange:e=>o({genre:e})})}),e.jsx(re,{label:"Artist bio:",children:e.jsx("textarea",{placeholder:"Add a short description of you and your music",value:a.bio,onChange:e=>o({bio:e.target.value}),rows:4,className:"w-full px-4 py-2.5 rounded-xl text-sm focus:outline-none transition-all border resize-none",style:{backgroundColor:"var(--bg-elevated)",borderColor:"var(--border-subtle)",color:"var(--text-primary)"},onFocus:e=>e.target.style.borderColor="var(--text-primary)",onBlur:e=>e.target.style.borderColor="var(--border-subtle)"})}),e.jsx(re,{label:"Country",children:e.jsx(ee,{value:a.country,options:["United States","United Kingdom","Canada","Australia","Germany","France","Japan","Brazil","Nigeria","South Africa","India","Other"],onChange:e=>o({country:e})})}),["websiteUrl","facebookUrl","xHandle","instagramHandle","youtubeChannel","tiktokUsername"].map(r=>{const[t,s]={websiteUrl:"Website URL:|Enter your website address",facebookUrl:"Facebook URL:|Enter page name",xHandle:"X handle:|Enter X user name",instagramHandle:"Instagram handle:|Enter Instagram user name",youtubeChannel:"YouTube channel:|Enter YouTube channel name",tiktokUsername:"TikTok username:|Enter TikTok page name"}[r].split("|");return e.jsx(re,{label:t,children:e.jsx("input",{type:"text",placeholder:s,value:a[r],onChange:e=>o({[r]:e.target.value}),className:K,style:Q,onFocus:e=>e.target.style.borderColor="var(--text-primary)",onBlur:e=>e.target.style.borderColor="var(--border-subtle)"})},r)}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx("button",{type:"button",className:"px-8 py-3 rounded-full text-sm font-bold transition-all hover:brightness-110",style:{backgroundColor:"var(--text-primary)",color:"var(--bg-primary)"},onClick:()=>s(a.name,a.imagePreview),children:"Create Artist"})})]})}function se({appliedTheme:t,userType:s,userId:a}){const{t:o}=i(),[u,m]=r.useState([]),[x,p]=r.useState(!1),[h,y]=r.useState({platform:"YouTube",url:"",display_name:"",channel_type:"",channel_description:""}),[f,g]=r.useState(!0),[v,b]=r.useState(!1),[j,k]=r.useState(null),[w,C]=r.useState(null),[N,_]=r.useState(!1),[L,T]=r.useState("idle"),[I,F]=r.useState(!1);r.useEffect(()=>{a&&A();const e=e=>{"social_links_updated"===e.key&&A()};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[a]);const A=async()=>{try{if(!a)return;const e=await fetch(`${V}?userId=${a}`,{headers:Z}),r=await e.json();r.success&&m(r.links||[])}catch(e){}finally{g(!1)}},U=async()=>{if(w){_(!0),T("idle");try{const e=await fetch(X,{method:"POST",headers:Z,body:JSON.stringify({action:"check",linkId:w.link.id,userId:a})});(await e.json()).verified?(T("success"),await A(),setTimeout(()=>{C(null),T("idle")},2e3)):T("fail")}finally{_(!1)}}};return f?e.jsx("div",{className:"rounded-xl sm:rounded-2xl p-6 sm:p-8 border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:e.jsx("div",{className:"text-center",style:{color:"var(--text-primary)"},children:o("common.loading")})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-xl sm:rounded-2xl p-5 sm:p-7 border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:[e.jsx("div",{className:"flex items-center justify-end mb-5 sm:mb-6",children:!x&&e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-110 border",style:{backgroundColor:"transparent",borderColor:"var(--border-subtle)",color:"var(--text-primary)"},children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"artist"===s?"Add New Artist":o("socialLinks.addLink")})]})}),x&&"artist"!==s&&e.jsx("div",{className:"mb-5 p-4 sm:p-5 rounded-xl",style:{backgroundColor:"transparent"},children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:o("socialLinks.platform")}),e.jsx(J,{value:h.platform,options:[{key:"YouTube",label:o("platforms.youtube")},{key:"Instagram",label:o("platforms.instagram")},{key:"TikTok",label:o("platforms.tiktok")},{key:"Twitter",label:o("platforms.twitter")},{key:"Twitch",label:o("platforms.twitch")},{key:"Other",label:o("platforms.other")}],onChange:e=>y({...h,platform:e}),platformIcons:G})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:o("socialLinks.url")}),e.jsx("input",{type:"text",value:h.url,onChange:e=>{const r=e.target.value,t=(e=>{const r=e.toLowerCase();return r.includes("youtube.com")||r.includes("youtu.be")?"YouTube":r.includes("instagram.com")?"Instagram":r.includes("tiktok.com")?"TikTok":r.includes("twitter.com")||r.includes("x.com")?"Twitter":r.includes("twitch.tv")?"Twitch":"Other"})(r);y(e=>({...e,url:r,platform:t})),j&&k(null)},placeholder:"https://www.youtube.com/@YourChannel",className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/20 border",style:{backgroundColor:"transparent",borderColor:j?"#ef4444":"var(--border-subtle)",color:"var(--text-primary)"},onFocus:e=>{j||(e.target.style.borderColor="var(--text-primary)")},onBlur:e=>{j||(e.target.style.borderColor="var(--border-subtle)")}}),j&&e.jsx("p",{className:"mt-1.5 text-xs",style:{color:"#ef4444"},children:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:o("socialLinks.displayName")}),e.jsx("input",{type:"text",value:h.display_name,onChange:e=>y({...h,display_name:e.target.value}),placeholder:o("socialLinks.displayNamePlaceholder"),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/20 border",style:{backgroundColor:"transparent",borderColor:"var(--border-subtle)",color:"var(--text-primary)"},onFocus:e=>e.target.style.borderColor="var(--text-primary)",onBlur:e=>e.target.style.borderColor="var(--border-subtle)"})]}),"creator"===s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:o("socialLinks.channelType")}),e.jsx(J,{value:h.channel_type||"__select__",options:[{key:"__select__",label:o("socialLinks.selectChannelType")},{key:"Music",label:o("channelTypes.music")},{key:"Gaming",label:o("channelTypes.gaming")},{key:"Lifestyle",label:o("channelTypes.lifestyle")},{key:"Education",label:o("channelTypes.education")},{key:"Comedy",label:o("channelTypes.comedy")},{key:"Sports",label:o("channelTypes.sports")},{key:"Technology",label:o("channelTypes.technology")},{key:"Art & Design",label:o("channelTypes.artDesign")},{key:"Fashion",label:o("channelTypes.fashion")},{key:"Food & Cooking",label:o("channelTypes.foodCooking")},{key:"Travel",label:o("channelTypes.travel")},{key:"Fitness",label:o("channelTypes.fitness")},{key:"Business",label:o("channelTypes.business")},{key:"Entertainment",label:o("channelTypes.entertainment")},{key:"Other",label:o("channelTypes.other")}],onChange:e=>y({...h,channel_type:"__select__"===e?"":e}),platformIcons:{}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:o("socialLinks.channelDescription")}),e.jsx("textarea",{value:h.channel_description,onChange:e=>y({...h,channel_description:e.target.value}),placeholder:o("socialLinks.channelDescPlaceholder"),rows:3,className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/20 border resize-none",style:{backgroundColor:"transparent",borderColor:"var(--border-subtle)",color:"var(--text-primary)"},onFocus:e=>e.target.style.borderColor="var(--text-primary)",onBlur:e=>e.target.style.borderColor="var(--border-subtle)"})]})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 pt-2",children:[e.jsx("button",{onClick:async()=>{if(!h.url.trim()||!a)return;const{valid:e,normalized:r,error:t}=(e=>{const r=e.trim().replace(/\/+$/,"");return r.match(/^https:\/\//i)?{valid:!0,normalized:r}:{valid:!1,normalized:r,error:"URL must start with https:// (e.g. https://www.youtube.com/@YourChannel)"}})(h.url);if(e){k(null),b(!0);try{const e=await(async e=>{try{const{data:r}=await l.from("whitelisted_channels").select("url_pattern");if(!r)return!1;const t=e.toLowerCase();return r.some(e=>t.includes(e.url_pattern.toLowerCase()))}catch{return!1}})(r),t={userId:a,platform:h.platform,url:r,display_name:h.display_name.trim()||h.platform,...e?{verified:!0}:{}};"creator"===s&&(t.channel_type=h.channel_type.trim(),t.channel_description=h.channel_description.trim());const n=await fetch(V,{method:"POST",headers:Z,body:JSON.stringify(t)}),i=await n.json();if(i.duplicate)return void(i.own?alert(o("socialLinks.linkAlreadyRegistered")):alert("This link is already registered and verified by another user. Each social link can only belong to one account."));if(!i.success)throw new Error(i.message||"Insert failed");await A(),localStorage.setItem("social_links_updated",Date.now().toString()),y({platform:"YouTube",url:"",display_name:"",channel_type:"",channel_description:""}),p(!1)}catch(n){alert(o("socialLinks.errorAddingLink"))}finally{b(!1)}}else k(t||"Invalid URL")},disabled:v,className:"flex-1 px-4 py-2 sm:py-2.5 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-110 disabled:opacity-60",style:{backgroundColor:"var(--text-primary)",color:"var(--bg-primary)"},children:v?"Saving...":o("socialLinks.save")}),e.jsx("button",{onClick:()=>{p(!1),y({platform:"YouTube",url:"",display_name:"",channel_type:"",channel_description:""})},className:"px-4 py-2 sm:py-2.5 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-90 border",style:{backgroundColor:"transparent",borderColor:"var(--border-subtle)",color:"var(--text-primary)"},children:o("socialLinks.cancel")})]})]})}),x&&"artist"===s&&e.jsx(te,{onClose:()=>p(!1),onSubmit:(e,r)=>{const t={id:`local-${Date.now()}`,platform:"Artist",url:r||"",display_name:e||"New Artist",channel_type:"",channel_description:"",verified:!1};m(e=>[...e,t]),p(!1)}}),e.jsx("div",{className:"space-y-3",children:0===u.length?e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(H,{}),e.jsx("p",{className:"text-sm sm:text-base font-medium mb-1",style:{color:"var(--text-primary)"},children:"artist"===s?"No Artists added yet":o("socialLinks.noLinksYet")}),"artist"===s?e.jsx("p",{className:"text-xs sm:text-sm",style:{color:"var(--text-primary)"},children:"Artists added will show up here"}):"creator"===s||"business"===s?null:e.jsx("p",{className:"text-xs sm:text-sm",style:{color:"var(--text-primary)"},children:o("socialLinks.distributeToStart")})]}):u.map(r=>{const t=G[r.platform]||n;return e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 rounded-lg transition-all duration-200 hover:brightness-105",style:{backgroundColor:"transparent"},children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg flex items-center justify-center flex-shrink-0 overflow-hidden",style:{backgroundColor:"var(--bg-elevated)"},children:"Artist"===r.platform&&r.url?e.jsx("img",{src:r.url,alt:r.display_name,className:"w-full h-full object-cover"}):"Artist"===r.platform?e.jsx(c,{className:"w-4 h-4 sm:w-5 sm:h-5",style:{color:"var(--text-primary)"}}):e.jsx(t,{className:"w-4 h-4 sm:w-5 sm:h-5",style:{color:"var(--text-primary)"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm sm:text-base font-medium truncate",style:{color:"var(--text-primary)"},children:r.display_name||r.platform}),"Artist"!==r.platform&&e.jsx("div",{className:"text-xs sm:text-sm truncate",style:{color:"var(--text-primary)"},children:r.url.replace(/^https?:\/\//i,"")})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[r.verified?e.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-medium px-2.5 py-1 rounded-full whitespace-nowrap",style:{color:"#22C55E",backgroundColor:"#22C55E15"},children:[e.jsx(E,{className:"w-3 h-3"})," Verified"]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full whitespace-nowrap",style:{color:"var(--text-primary)",backgroundColor:"var(--bg-elevated)"},children:"Unverified"}),e.jsx("button",{onClick:()=>(async e=>{T("idle");const r=await fetch(X,{method:"POST",headers:Z,body:JSON.stringify({action:"get-phrase",linkId:e.id,userId:a})}),t=await r.json();t.success&&C({link:e,phrase:t.phrase})})(r),className:"text-xs font-semibold px-2.5 py-1 rounded-full whitespace-nowrap transition-all duration-200 hover:opacity-80",style:{color:"var(--bg-primary)",backgroundColor:"var(--text-primary)"},children:"Verify Now"})]}),!r.verified&&e.jsx("button",{onClick:()=>(async e=>{try{const r=await fetch(`${V}?id=${e}&userId=${a}`,{method:"DELETE",headers:Z}),t=await r.json();if(!t.success)throw new Error(t.message);await A()}catch(r){}})(r.id),className:"p-2 rounded-lg transition-all duration-200 hover:brightness-110",style:{backgroundColor:"transparent",color:"var(--text-primary)"},children:e.jsx(W,{className:"w-4 h-4"})})]})]},r.id)})})]}),w&&(()=>{const r=w;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0,0,0,0.7)"},children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl p-6 shadow-2xl border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-lg font-bold",style:{color:"var(--text-primary)"},children:"Verify Ownership"}),"success"!==L&&e.jsx("button",{onClick:()=>{C(null),T("idle")},className:"p-1 rounded-lg",style:{color:"var(--text-primary)"},children:e.jsx(W,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-5 p-3 rounded-lg",style:{backgroundColor:"var(--bg-elevated)",borderColor:"var(--border-subtle)",border:"1px solid"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-primary)"},children:"Link being verified"}),e.jsx("p",{className:"text-sm font-medium truncate",style:{color:"var(--text-primary)"},children:r.link.url})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("p",{className:"text-sm mb-3 leading-relaxed",style:{color:"var(--text-primary)"},children:"Add this phrase to your bio to verify account ownership and prevent impersonation."}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("span",{className:"text-base font-bold tracking-wide",style:{color:"var(--text-primary)"},children:r.phrase}),e.jsx("button",{onClick:()=>{var e;null==(e=navigator.clipboard)||e.writeText(r.phrase),F(!0),setTimeout(()=>F(!1),2e3)},className:"flex items-center gap-1 text-xs px-2.5 py-1 rounded-full transition-all hover:opacity-80",style:{color:"var(--bg-primary)",backgroundColor:"var(--text-primary)"},children:I?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-3 h-3"})," Copied"]}):"Copy"})]}),e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--text-primary)"},children:"You can remove it once the check is complete."})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("a",{href:r.link.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm transition-all hover:opacity-70",style:{color:"var(--text-primary)"},children:[e.jsx(d,{className:"w-4 h-4"}),"Open ",r.link.platform," to add the phrase"]})}),"success"===L&&e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg mb-4",style:{backgroundColor:"#22C55E10",border:"1px solid #22C55E40"},children:[e.jsx(E,{className:"w-5 h-5 flex-shrink-0",style:{color:"#22C55E"}}),e.jsx("p",{className:"text-sm font-medium",style:{color:"#22C55E"},children:"Verified! This link is now exclusively yours."})]}),"fail"===L&&e.jsx("div",{className:"p-3 rounded-lg mb-4",style:{backgroundColor:"#EF444410",border:"1px solid #EF444440"},children:e.jsxs("p",{className:"text-sm font-medium",style:{color:"#EF4444"},children:["Phrase not found. Make sure you saved the change on ",w.link.platform," and try again."]})}),e.jsx("button",{onClick:U,disabled:N||"success"===L,className:"w-full py-2.5 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-110 disabled:opacity-60 flex items-center justify-center gap-2",style:{backgroundColor:"var(--text-primary)",color:"var(--bg-primary)"},children:N?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4 animate-spin"}),"Checking..."]}):"Check Verification"})]})})})()]})}const ae={artist:"/learn/artist",freelancer:"/learn/freelancer",business:"/learn/brands",creator:"/"};function le({userType:t,userId:o}){var c;const{t:d}=i(),[u,m]=r.useState(null),[x,p]=r.useState(""),[h,f]=r.useState(!1),[g,v]=r.useState(!1),[b,j]=r.useState(!0),[k,w]=r.useState(!1),[C,N]=r.useState(null),[_,L]=r.useState(!1);r.useEffect(()=>{T()},[]);const T=async()=>{try{let t=null;try{const{data:{user:e}}=await l.auth.getUser();t=(null==e?void 0:e.id)||null}catch(e){}const n=localStorage.getItem("verifiedUserId"),i=o||t||n;if(!i)return void j(!1);let c=null;try{const e=`${s}/functions/v1/get-profile?userId=${i}`,r=await fetch(e,{method:"GET",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(r.ok){const e=await r.json();e.success&&e.profile&&(c=e.profile.username)}}catch(r){}if(!c){const{data:e}=await l.from("users").select("username").eq("id",i).maybeSingle();if(c=null==e?void 0:e.username,!c){const{data:e}=await l.from("profiles").select("name").eq("id",i).maybeSingle();(null==e?void 0:e.name)&&(c=e.name.replace(/\s+/g,""))}}if(c){const{data:e}=await l.from("referral_codes").select("total_uses, total_earnings").eq("user_id",i).maybeSingle();m({code:c.toUpperCase(),total_uses:(null==e?void 0:e.total_uses)||0,total_earnings:(null==e?void 0:e.total_earnings)||0})}const{data:d}=await l.from("referral_applications").select("id").eq("user_id",i).maybeSingle();L(!!d)}catch(t){}finally{j(!1)}},S=()=>{if(!u)return"";return`${window.location.origin}${ae[t||"creator"]??"/"}?ref=${u.code}`};return b?e.jsx("div",{className:"rounded-xl sm:rounded-2xl p-6 sm:p-8 border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:e.jsx("div",{className:"text-center",style:{color:"var(--text-primary)"},children:"Loading..."})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-5",children:[e.jsxs("div",{className:"rounded-xl sm:rounded-2xl p-5 sm:p-7 border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[e.jsx(R,{className:"w-5 h-5",style:{color:"var(--text-primary)"}}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold",style:{color:"var(--text-primary)"},children:d("referral.yourCode")})]}),e.jsx("div",{className:"rounded-lg p-4 mb-5",style:{backgroundColor:"transparent"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"var(--text-primary)"},children:d("referral.yourReferralCode")}),e.jsx("div",{className:"h-[60px] flex items-center justify-center mb-3",children:e.jsx("div",{className:"text-2xl sm:text-3xl font-bold tracking-wider",style:{color:"var(--text-primary)"},children:(null==u?void 0:u.code)||"N/A"})}),e.jsx("button",{onClick:async()=>{if(u)try{await navigator.clipboard.writeText(u.code),f(!0),setTimeout(()=>f(!1),2e3)}catch(e){}},disabled:!u,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--text-primary)",color:"var(--bg-primary)"},children:h?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:d("referral.copied")})]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:d("referral.copyCode")})]})})]})}),u&&e.jsxs("div",{className:"mb-5",children:[e.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"var(--text-primary)"},children:"YOUR REFERRAL LINK"}),e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-subtle)"},children:[e.jsx(n,{className:"w-3.5 h-3.5 flex-shrink-0",style:{color:"var(--text-primary)"}}),e.jsx("span",{className:"text-xs truncate flex-1",style:{color:"var(--text-primary)"},children:S()}),e.jsxs("button",{onClick:async()=>{try{await navigator.clipboard.writeText(S()),v(!0),setTimeout(()=>v(!1),2e3)}catch(e){}},className:"flex items-center gap-1.5 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 transition-all hover:opacity-80",style:{color:"var(--bg-primary)",backgroundColor:"var(--text-primary)"},children:[g?e.jsx(M,{className:"w-3 h-3"}):e.jsx(y,{className:"w-3 h-3"}),g?"Copied":"Copy"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold mb-3",style:{color:"var(--text-primary)"},children:d("referral.yourStats")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 px-3 rounded-lg",style:{backgroundColor:"transparent"},children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:d("referral.totalUses")}),e.jsx("span",{className:"text-sm font-bold",style:{color:"var(--text-primary)"},children:(null==u?void 0:u.total_uses)||0})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 px-3 rounded-lg",style:{backgroundColor:"transparent"},children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:d("referral.totalEarned")}),e.jsxs("span",{className:"text-sm font-bold",style:{color:"var(--text-primary)"},children:["$",(null==(c=null==u?void 0:u.total_earnings)?void 0:c.toFixed(2))||"0.00"]})]})]})]})]}),e.jsxs("div",{className:"rounded-xl sm:rounded-2xl p-5 sm:p-7 border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[e.jsx(R,{className:"w-5 h-5",style:{color:"var(--text-primary)"}}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold",style:{color:"var(--text-primary)"},children:d("referral.enterACode")})]}),_?e.jsxs("div",{className:"rounded-lg p-6 text-center",style:{backgroundColor:"transparent"},children:[e.jsx(M,{className:"w-12 h-12 mx-auto mb-3",style:{color:"#10B981"}}),e.jsx("p",{className:"text-base font-medium mb-1",style:{color:"var(--text-primary)"},children:d("referral.codeApplied")}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:d("referral.alreadyApplied")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-lg p-4 mb-5",style:{backgroundColor:"transparent"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-primary)"},children:d("referral.referralCode")}),e.jsx("div",{className:"h-[60px] flex items-center justify-center mb-3",children:e.jsx("input",{type:"text",value:x,onChange:e=>p(e.target.value.toUpperCase()),placeholder:d("referral.enterCode"),maxLength:8,className:"w-full px-4 py-2.5 rounded-lg text-2xl sm:text-3xl font-bold tracking-wider text-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/20",style:{backgroundColor:"transparent",color:"var(--text-primary)"}})}),e.jsx("button",{onClick:async()=>{if(x.trim()&&!k){w(!0),N(null);try{const{data:e,error:r}=await l.rpc("apply_referral_code",{p_code:x.trim().toUpperCase()});if(r)throw r;e.success?(N({type:"success",text:e.message}),p(""),L(!0)):N({type:"error",text:e.error})}catch(e){N({type:"error",text:e.message||d("referral.failedToApply")})}finally{w(!1)}}},disabled:!x.trim()||k,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--text-primary)",color:"var(--bg-primary)"},children:d(k?"referral.applying":"referral.applyCode")})]})}),C&&e.jsx("div",{className:"rounded-lg p-3 text-sm text-center mb-5",style:{backgroundColor:"success"===C.type?"#10B98120":"#EF444420",color:"success"===C.type?"#10B981":"#EF4444"},children:C.text}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold mb-3",style:{color:"var(--text-primary)"},children:d("referral.benefits")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 px-3 rounded-lg",style:{backgroundColor:"transparent"},children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:d("referral.firstCampaignBonus")}),e.jsx("div",{className:"w-1.5 h-1.5 rounded-full flex-shrink-0",style:{backgroundColor:"#10B981"}})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 px-3 rounded-lg",style:{backgroundColor:"transparent"},children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:d("referral.supportCommunity")}),e.jsx("div",{className:"w-1.5 h-1.5 rounded-full flex-shrink-0",style:{backgroundColor:"#10B981"}})]})]})]})]})]})]})}function oe({showTransition:t=!1}){const[s,a]=r.useState(!1);return r.useEffect(()=>{if(t){const e=setTimeout(()=>{a(!0)},500);return()=>clearTimeout(e)}},[t]),t?e.jsxs("div",{className:"fixed inset-0 pointer-events-none",style:{perspective:"1500px",zIndex:9999},children:[e.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-full bg-zinc-900 border-r border-white/10 transition-transform duration-[1.5s] "+(s?"shadow-none":"shadow-[inset_-20px_0_40px_rgba(0,0,0,0.3)]"),style:{transformOrigin:"left center",transform:s?"rotateY(-105deg)":"rotateY(0deg)",transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)",backfaceVisibility:"hidden"},children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-end pr-16",children:e.jsx("div",{className:"transition-opacity duration-300 "+(s?"opacity-0":"opacity-100"),children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-3 h-32 bg-zinc-600 rounded-full shadow-lg"}),e.jsx("div",{className:"w-12 h-3 bg-zinc-700 rounded-sm"})]})})})}),e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-zinc-900 border-l border-white/10 transition-transform duration-[1.5s] "+(s?"shadow-none":"shadow-[inset_20px_0_40px_rgba(0,0,0,0.3)]"),style:{transformOrigin:"right center",transform:s?"rotateY(105deg)":"rotateY(0deg)",transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)",backfaceVisibility:"hidden"},children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-start pl-16",children:e.jsx("div",{className:"transition-opacity duration-300 "+(s?"opacity-0":"opacity-100"),children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-3 h-32 bg-zinc-600 rounded-full shadow-lg"}),e.jsx("div",{className:"w-12 h-3 bg-zinc-700 rounded-sm"})]})})})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none transition-opacity duration-300 "+(s?"opacity-0":"opacity-100"),style:{zIndex:10},children:e.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-white/10"})})]}):null}function ne({onClick:t,className:s}){const[a,l]=r.useState(!1);return e.jsx("button",{onClick:t,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),className:`p-2.5 rounded-lg transition-colors ${s||""}`,"aria-label":"Edit",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 overflow-visible",children:[e.jsx("rect",{x:"8",y:"10",width:"28",height:"28",rx:"3",stroke:"currentColor",strokeWidth:"3.5",fill:"none"}),e.jsx("path",{d:"M36 10 L36 16 L30 16",stroke:"currentColor",strokeWidth:"3.5",fill:"none"}),e.jsxs("g",{style:{transform:a?"translate(-2px, -2px) rotate(-5deg)":"translate(0, 0) rotate(0deg)",transformOrigin:"32px 14px",transition:"transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:[e.jsx("path",{d:"M40 8 L28 20 L22 14 L34 2 C34.8 1.2 36.2 1.2 37 2 L40 5 C40.8 5.8 40.8 7.2 40 8 Z",stroke:"currentColor",strokeWidth:"3.5",fill:"rgba(0,0,0,0.9)",strokeLinejoin:"round"}),e.jsx("path",{d:"M28 20 L22 14 L20 16 L26 22 Z",fill:"currentColor",opacity:"0.7"})]}),e.jsx("line",{x1:"12",y1:"20",x2:"28",y2:"20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",style:{opacity:a?.5:0,strokeDasharray:"16",strokeDashoffset:a?"0":"16",transition:"all 0.4s ease 0.2s"}}),e.jsx("circle",{cx:"36",cy:"10",r:"2",fill:"currentColor",style:{opacity:a?.8:0,transform:a?"scale(1)":"scale(0)",transformOrigin:"36px 10px",transition:"all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s"}}),e.jsx("rect",{x:"8",y:"10",width:"28",height:"28",rx:"3",fill:"currentColor",style:{opacity:a?.1:0,transition:"opacity 0.3s ease"}})]})})}function ie({isOpen:t,onClose:s,onSelectUser:a,currentUserId:o,userType:n}){const{t:c}=i(),[d,u]=r.useState(""),[m,x]=r.useState([]),[p,h]=r.useState([]),[y,g]=r.useState(!1),v=r.useRef(null);r.useEffect(()=>{t&&v.current&&setTimeout(()=>{var e;return null==(e=v.current)?void 0:e.focus()},100)},[t]),r.useEffect(()=>{const e=e=>{"Escape"===e.key&&s()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[t,s]),r.useEffect(()=>{const e=setTimeout(async()=>{const e=d.trim().replace(/^@/,"").toLowerCase();if(!e)return x([]),void g(!1);g(!0);try{let r=l.from("unified_users").select("id, display_name, username, avatar_url").neq("id",o).eq("username",e);r="artist"===n?r.eq("is_admin",!0):r.not("user_type","eq","artist");const{data:t,error:s}=await r.limit(1);!s&&t&&t.length>0?x(t.map(e=>({id:e.id,name:e.display_name||"Unknown",username:e.username||"",avatar_url:e.avatar_url}))):x([]),g(!1)}catch(r){x([]),g(!1)}},300);return()=>clearTimeout(e)},[d,o,n]),r.useEffect(()=>{h([])},[d]);return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:()=>{s(),u("")},children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),e.jsxs("div",{className:"relative w-full max-w-md mx-4 rounded-2xl overflow-hidden flex flex-col",style:{backgroundColor:"var(--bg-primary)",maxHeight:"80vh",border:"1px solid var(--border-default)"},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",style:{borderBottom:"1px solid var(--border-default)"},children:[e.jsx("div",{className:"w-8"}),e.jsx("h2",{className:"text-base font-semibold",style:{color:"var(--text-primary)"},children:c("messages.newMessage")}),e.jsx("button",{onClick:()=>{s(),u("")},className:"p-1 rounded-lg hover:bg-white/5 transition-colors","aria-label":"Close",children:e.jsx(W,{className:"w-5 h-5",style:{color:"var(--text-secondary)"}})})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",style:{borderBottom:"1px solid var(--border-default)"},children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:c("messages.to")}),e.jsx("div",{className:"flex-1 relative",children:e.jsx("input",{ref:v,type:"text",value:d,onChange:e=>{u(e.target.value),h([])},placeholder:c("messages.searchPlaceholder"),className:"w-full bg-transparent text-sm focus:outline-none",style:{color:"var(--text-primary)"}})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",style:{maxHeight:"400px"},children:y?e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:c("messages.searching")})}):d.trim()?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"px-4 py-2 text-xs font-medium",style:{color:"var(--text-muted)"},children:c("messages.results")}),0===m.length?e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:c("messages.noUsersFound")})}):m.map(r=>{const t=p.some(e=>e.id===r.id);return e.jsxs("button",{onClick:()=>(e=>{h(r=>r.some(r=>r.id===e.id)?r.filter(r=>r.id!==e.id):[...r,e])})(r),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 transition-colors",children:[e.jsx("img",{src:r.avatar_url||f,alt:r.name,className:"w-11 h-11 rounded-full object-cover",style:{backgroundColor:"var(--bg-elevated)"}}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",style:{color:"var(--text-primary)"},children:r.name}),e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:r.username})]}),e.jsx("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-colors",style:{borderColor:t?"var(--text-primary)":"var(--border-default)",backgroundColor:t?"var(--text-primary)":"transparent"},children:t&&e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]},r.id)})]}):e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:c("messages.enterUsername")})})}),e.jsx("div",{className:"p-4",style:{borderTop:"1px solid var(--border-default)"},children:e.jsx("button",{onClick:()=>{if(p.length>0){const e=p[0];a({id:e.id,username:e.username,display_name:e.name,avatar_url:e.avatar_url}),s(),u("")}},disabled:0===p.length,className:"w-full py-3 rounded-xl text-sm font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:p.length>0?"var(--text-primary)":"var(--bg-elevated)",color:p.length>0?"var(--bg-primary)":"var(--text-primary)"},children:c("messages.chat")})})]})]}):null}function ce({currentUserId:t,backgroundTheme:s="dark",userType:a}){const{t:n}=i(),{profile:c,isLoading:d}=o(),{conversations:u,loading:m,updateConversationUnreadCount:x,selectConversation:p,pendingConversation:h,startConversationWith:y,sendMessageToConversation:f,clearPendingConversation:T,acceptRequest:S,denyRequest:E}=g(t),[W,M]=r.useState(""),[I,F]=r.useState(""),[A,U]=r.useState(null),[B,O]=r.useState(!1),[R,z]=r.useState("all"),[$,D]=r.useState(!0),[P,q]=r.useState(!1);v(t);const Y=r.useMemo(()=>(null==c?void 0:c.username)?c.username:(null==c?void 0:c.first_name)?c.first_name:(null==c?void 0:c.email)?c.email.split("@")[0]:d?"":"Messages",[c,d]),H=()=>{"artist"!==a&&q(!0)};r.useEffect(()=>{const e=e=>{"Escape"===e.key&&h&&T()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[h,T]),r.useEffect(()=>{(async()=>{if(!m&&t){const e=window.innerWidth<1024;if(u.length>0){const r=localStorage.getItem(`lastConversation_${t}`);if(r){const e=u.find(e=>e.id===r);if(e)return U(e),p(r),void D(!1)}e||(U(u[0]),p(u[0].id))}else{await b(t)}D(!1)}})()},[t,m,u.length,p,b]);const V=r.useMemo(()=>j(e=>F(e),300),[]);r.useEffect(()=>{V(W)},[W,V]),r.useEffect(()=>{(async()=>{const e=window.innerWidth<1024;if(!$&&u.length>0&&!A&&!e){const e=u[0];if(U(e),e.unread_count_customer>0)try{await l.from("conversations").update({unread_count_customer:0}).eq("id",e.id)}catch(r){}}else if(!$&&u.length>0&&A){const r=u.find(e=>e.id===A.id);r?U(r):e||U(u[0])}})()},[u,$,A]);const X=r.useMemo(()=>{let e=[...u];A&&!e.find(e=>e.id===A.id)&&(e=[A,...e]);return e.filter(e=>{var r;if(!e.admin)return!1;if(I.trim()){if(!((null==(r=e.admin.name)?void 0:r.toLowerCase())||"").includes(I.toLowerCase()))return!1}return"unread"===R?e.unread_count_customer>0:"pinned"===R?!0===e.is_request&&e.admin_id===t:!0!==e.is_request||e.admin_id!==t})},[u,A,I,R]),Z=r.useMemo(()=>u.filter(e=>!0===e.is_request&&e.admin_id===t).length,[u,t]),G=r.useCallback(e=>{var r;if(e===t){return(null==c?void 0:c.first_name)?`${c.first_name}${c.last_name?` ${c.last_name}`:""}`:(null==c?void 0:c.username)||"You"}return(null==(r=null==A?void 0:A.admin)?void 0:r.name)||"Support"},[c,A,t]),J=async e=>{T(),p(e.id,!0),U(e);window.innerWidth<1024&&O(!0);const r=e.customer_id===t;if((r?e.unread_count_customer:e.unread_count_admin)>0){x(e.id,0);try{await l.from("conversations").update(r?{unread_count_customer:0}:{unread_count_admin:0}).eq("id",e.id)}catch(s){}}},K=()=>{O(!1)},Q=async(e,r)=>{try{const{error:t}=await l.from("conversations").update({is_pinned:r}).eq("id",e);if(t)throw t}catch(t){}},ee="undefined"!=typeof window&&window.innerWidth<1024,re=m&&0===u.length,te=$&&!A;return ee&&B&&A?e.jsx("div",{className:"flex flex-col w-full",style:{backgroundColor:"var(--bg-primary)",height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},children:e.jsx("div",{className:"flex-1 min-h-0",children:A.admin&&e.jsx(k,{conversation:A,otherUser:A.admin,currentUserId:t,getSenderName:G,backgroundTheme:s,onBack:K,showBackButton:!0},A.id)})}):e.jsxs("div",{className:"flex flex-col lg:flex-row rounded-2xl w-full shadow-2xl",style:{backgroundColor:"var(--bg-primary)",height:"100%",maxHeight:"100%",border:"1px solid var(--border-default)",overflow:"hidden",display:"flex"},children:[ee&&!1,ee&&e.jsxs("div",{className:"lg:hidden flex flex-col flex-1 min-h-0 overflow-hidden",style:{overflow:"hidden"},children:[e.jsxs("div",{className:"p-3 pb-3",style:{borderBottom:"1px solid var(--border-subtle)",backgroundColor:"var(--bg-primary)"},children:[e.jsxs("div",{className:"flex items-center justify-center relative mb-3",children:[e.jsx("span",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:Y}),"artist"!==a&&e.jsx(ne,{onClick:H,className:"absolute right-0 p-2 rounded-lg transition-colors"})]}),e.jsxs("div",{className:"relative mb-3 lg:mb-4",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 lg:w-4 lg:h-4",style:{color:"var(--text-primary)"}}),e.jsx("input",{type:"text",value:W,onChange:e=>M(e.target.value),placeholder:n("messages.searchConversations"),"aria-label":n("messages.searchConversations"),className:"w-full pl-9 lg:pl-10 pr-3 lg:pr-4 py-2 lg:py-3 rounded-lg lg:rounded-xl text-xs lg:text-sm focus:outline-none focus:ring-2 focus:ring-opacity-50 transition-all",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid rgba(75, 85, 99, 0.25)",color:"var(--text-primary)"}})]}),"artist"!==a&&e.jsxs("div",{className:"flex gap-1.5 lg:gap-2",children:[e.jsx("button",{onClick:()=>z("all"),className:"flex-1 px-3 lg:px-4 py-1.5 lg:py-2.5 rounded-lg text-xs lg:text-sm font-medium transition-all duration-200 "+("all"===R?"":"hover:brightness-110 active:scale-[0.98]"),style:"all"===R?{backgroundColor:"var(--bg-primary)",border:"1.5px solid rgba(148, 163, 184, 0.3)",color:"var(--text-primary)",boxShadow:"0 1px 2px rgba(148, 163, 184, 0.2)"}:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid transparent"},children:n("messages.primary")}),e.jsx("button",{onClick:()=>z("unread"),className:"flex-1 px-3 lg:px-4 py-1.5 lg:py-2.5 rounded-lg text-xs lg:text-sm font-medium transition-all duration-200 "+("unread"===R?"":"hover:brightness-110 active:scale-[0.98]"),style:"unread"===R?{backgroundColor:"var(--bg-primary)",border:"1.5px solid rgba(148, 163, 184, 0.3)",color:"var(--text-primary)",boxShadow:"0 1px 2px rgba(148, 163, 184, 0.2)"}:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid transparent"},children:n("messages.general")}),e.jsx("button",{onClick:()=>z("pinned"),className:"flex-1 px-3 lg:px-4 py-1.5 lg:py-2.5 rounded-lg text-xs lg:text-sm font-medium transition-all duration-200 relative "+("pinned"===R?"":"hover:brightness-110 active:scale-[0.98]"),style:"pinned"===R?{backgroundColor:"var(--bg-primary)",border:"1.5px solid rgba(148, 163, 184, 0.3)",color:"var(--text-primary)",boxShadow:"0 1px 2px rgba(148, 163, 184, 0.2)"}:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid transparent"},children:Z>0?`Requests (${Z})`:n("messages.requests")})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",style:{scrollbarWidth:"thin",scrollbarColor:"rgba(75, 85, 99, 0.3) transparent",WebkitOverflowScrolling:"touch"},children:re?e.jsx(C,{count:4,backgroundTheme:s}):0===X.length?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bg-elevated)"},children:e.jsx(N,{className:"w-8 h-8 animate-message-float",style:{color:"var(--text-primary)"}})}),"artist"===a?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:n("messages.noMessagesYet")}),e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-primary)"},children:n("messages.supportTeamReachOut")})]}):e.jsx(e.Fragment,{children:e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:n("messages.noConversationsFound")})})]}):X.map(r=>r.admin&&e.jsx(_,{user:r.admin,conversation:r,isActive:(null==A?void 0:A.id)===r.id,onClick:()=>J(r),onPin:Q,unreadCount:r.customer_id===t?r.unread_count_customer:r.unread_count_admin,currentUserId:t},r.id))})]}),e.jsxs("div",{className:"hidden lg:flex flex-col w-80 xl:w-96 min-h-0 flex-shrink-0 overflow-hidden border-r",style:{borderRight:"1px solid var(--border-subtle)",backgroundColor:"var(--bg-primary)",height:"100%"},children:[e.jsxs("div",{className:"flex items-center justify-between px-5 pt-5 pb-3",style:{backgroundColor:"var(--bg-primary)"},children:[e.jsx("span",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:Y}),"artist"!==a&&e.jsx(ne,{onClick:H,className:"p-2 rounded-lg transition-colors"})]}),e.jsxs("div",{className:"px-5 pb-4",style:{borderBottom:"1px solid var(--border-subtle)",backgroundColor:"var(--bg-primary)"},children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(w,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:"var(--text-primary)"}}),e.jsx("input",{type:"text",value:W,onChange:e=>M(e.target.value),placeholder:n("messages.searchConversations"),"aria-label":n("messages.searchConversations"),className:"w-full pl-10 pr-4 py-3 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-opacity-50 transition-all",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid rgba(75, 85, 99, 0.25)",color:"var(--text-primary)"}})]}),"artist"!==a&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z("all"),className:"flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 "+("all"===R?"":"hover:brightness-110 active:scale-[0.98]"),style:"all"===R?{backgroundColor:"var(--bg-elevated)",border:"1.5px solid rgba(148, 163, 184, 0.3)",color:"var(--text-primary)",boxShadow:"0 1px 2px rgba(148, 163, 184, 0.2)"}:{backgroundColor:"transparent",color:"var(--text-primary)",border:"1px solid transparent"},children:n("messages.primary")}),e.jsx("button",{onClick:()=>z("unread"),className:"flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 "+("unread"===R?"":"hover:brightness-110 active:scale-[0.98]"),style:"unread"===R?{backgroundColor:"var(--bg-elevated)",border:"1.5px solid rgba(148, 163, 184, 0.3)",color:"var(--text-primary)",boxShadow:"0 1px 2px rgba(148, 163, 184, 0.2)"}:{backgroundColor:"transparent",color:"var(--text-primary)",border:"1px solid transparent"},children:n("messages.general")}),e.jsx("button",{onClick:()=>z("pinned"),className:"flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 relative "+("pinned"===R?"":"hover:brightness-110 active:scale-[0.98]"),style:"pinned"===R?{backgroundColor:"var(--bg-elevated)",border:"1.5px solid rgba(148, 163, 184, 0.3)",color:"var(--text-primary)",boxShadow:"0 1px 2px rgba(148, 163, 184, 0.2)"}:{backgroundColor:"transparent",color:"var(--text-primary)",border:"1px solid transparent"},children:Z>0?`Requests (${Z})`:n("messages.requests")})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",style:{scrollbarWidth:"thin",scrollbarColor:"rgba(75, 85, 99, 0.3) transparent",WebkitOverflowScrolling:"touch"},children:re?e.jsx(C,{count:5,backgroundTheme:s}):0===X.length?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bg-card)"},children:e.jsx(N,{className:"w-8 h-8 animate-message-float",style:{color:"var(--text-primary)"}})}),"artist"===a?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:n("messages.noMessagesYet")}),e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-primary)"},children:n("messages.supportTeamReachOut")})]}):e.jsx(e.Fragment,{children:e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:n("messages.noConversationsFound")})})]}):X.map(r=>r.admin&&e.jsx(_,{user:r.admin,conversation:r,isActive:(null==A?void 0:A.id)===r.id,onClick:()=>J(r),onPin:Q,unreadCount:r.customer_id===t?r.unread_count_customer:r.unread_count_admin,currentUserId:t},r.id))})]}),e.jsx("div",{className:"hidden lg:flex flex-col flex-1 min-h-0 min-w-0 overflow-hidden",style:{backgroundColor:"var(--bg-primary)",height:"100%",overflow:"hidden"},children:h?e.jsx(k,{isPending:!0,pendingRecipient:h.recipientUser,currentUserId:t,getSenderName:G,backgroundTheme:s,onSendPendingMessage:async e=>{const r=await f(null,e);r.newConversation&&(U(r.newConversation),p(r.newConversation.id,!0))},onCancelPending:T},`pending-${h.recipientId}`):A&&A.admin?e.jsx(k,{conversation:A,otherUser:A.admin,currentUserId:t,getSenderName:G,onMarkAsRead:e=>x(e,0),backgroundTheme:s,isRequest:!0===A.is_request&&A.admin_id===t,onAcceptRequest:async()=>{await S(A.id),U(e=>e?{...e,is_request:!1}:e),z("all")},onDenyRequest:async()=>{await E(A.id),U(null)}},A.id):te?e.jsx(L,{backgroundTheme:s}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center px-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-5 rounded-2xl flex items-center justify-center",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid rgba(75, 85, 99, 0.1)"},children:e.jsx(N,{className:"w-10 h-10",style:{color:"var(--text-primary)"}})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--text-primary)"},children:n("messages.selectConversation")}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:n("messages.chooseFromList")})]})})}),e.jsx(ie,{isOpen:P,onClose:()=>q(!1),onSelectUser:async e=>{q(!1);const r=await y(e);"existing"===r.type&&r.conversation?(U(r.conversation),O(!0)):"pending"===r.type&&(U(null),O(!0))},currentUserId:t,userType:a})]})}function de(e){const[t,s]=r.useState(0),a=r.useCallback(async()=>{if(!e)return;const{data:r,error:t}=await l.from("conversations").select("customer_id, admin_id, unread_count_customer, unread_count_admin").or(`customer_id.eq.${e},admin_id.eq.${e}`);if(!t&&r){const t=r.reduce((r,t)=>r+((t.customer_id===e?t.unread_count_customer:t.unread_count_admin)||0),0);s(t)}},[e]);return r.useEffect(()=>{a()},[a]),r.useEffect(()=>{if(!e)return;const r=l.channel(`unread:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"conversations"},r=>{const t=r.new;!t||t.customer_id!==e&&t.admin_id!==e||a()}).subscribe();return()=>{r.unsubscribe()}},[e,a]),t}function ue({isActive:s,onClick:a,icon:l,label:o}){const[n,i]=r.useState(!1);return e.jsxs("button",{type:"button",onClick:a,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:"w-full text-left px-3 sm:px-5 py-3 sm:py-3.5 rounded-xl text-xs sm:text-sm font-semibold transition-all duration-200 flex items-center gap-2 sm:gap-3 "+(s?"shadow-md":"hover:brightness-105"),style:{backgroundColor:s?"var(--bg-elevated)":"transparent",color:"var(--text-primary)",border:s?"1px solid rgba(148, 163, 184, 0.3)":"1px solid rgba(75, 85, 99, 0.25)"},children:[t.cloneElement(l,{isHovered:n}),e.jsx("span",{children:o})]})}function me({isOpen:t,onClose:s,userId:a}){const[o,n]=r.useState(""),[i,c]=r.useState("suggestion"),[d,u]=r.useState(!1),[m,x]=r.useState("idle");r.useEffect(()=>{const e=e=>{"Escape"===e.key&&s()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[t,s]),r.useEffect(()=>{t||(n(""),c("suggestion"),x("idle"))},[t]);return t?e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center backdrop-blur-sm animate-fade-in overflow-y-auto p-0 sm:p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.85)"},onClick:s,children:e.jsxs("div",{className:"relative w-full h-full sm:h-auto sm:max-w-2xl sm:mx-4 sm:my-8 sm:rounded-2xl shadow-2xl animate-fade-in flex flex-col",style:{backgroundColor:"#111111",border:"none"},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 border-b flex-shrink-0",style:{borderColor:"rgba(75, 85, 99, 0.25)",backgroundColor:"#111111"},children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold tracking-tight",style:{color:"var(--text-primary)"},children:"Give Feedback"}),e.jsx("button",{onClick:s,className:"p-2 sm:p-1.5 rounded-lg transition-colors hover:brightness-110",style:{backgroundColor:"transparent",color:"var(--text-primary)"},children:e.jsx(W,{className:"w-6 h-6 sm:w-5 sm:h-5"})})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),o.trim()&&a){u(!0),x("idle");try{const{error:e}=await l.from("feedback").insert({user_id:a,category:i,content:o.trim(),status:"pending"});if(e)throw e;x("success"),setTimeout(()=>{s()},1500)}catch(r){x("error")}finally{u(!1)}}},className:"p-4 sm:p-6 space-y-4 sm:space-y-5 flex-1 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2 sm:mb-3",style:{color:"var(--text-primary)"},children:"Category"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsx(ue,{isActive:"suggestion"===i,onClick:()=>c("suggestion"),icon:e.jsx(D,{}),label:"Suggestion"}),e.jsx(ue,{isActive:"bug"===i,onClick:()=>c("bug"),icon:e.jsx(P,{}),label:"Bug Report"}),e.jsx(ue,{isActive:"feature"===i,onClick:()=>c("feature"),icon:e.jsx(q,{}),label:"Feature Request"}),e.jsx(ue,{isActive:"other"===i,onClick:()=>c("other"),icon:e.jsx(Y,{}),label:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Your Feedback"}),e.jsx("textarea",{value:o,onChange:e=>n(e.target.value),placeholder:"Share your thoughts, suggestions, or report any issues...",rows:5,required:!0,className:"w-full px-3 sm:px-4 py-3 rounded-xl text-sm resize-none transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/10 placeholder:text-slate-400 hover:border-slate-500/40",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-subtle)",color:"var(--text-primary)"},onFocus:e=>e.target.style.borderColor="var(--text-primary)",onBlur:e=>e.target.style.borderColor="var(--border-subtle)"})]}),"success"===m&&e.jsx("div",{className:"p-3 rounded-xl text-sm font-medium",style:{backgroundColor:"rgba(34, 197, 94, 0.1)",color:"#4ADE80",border:"1px solid rgba(34, 197, 94, 0.2)"},children:"✓ Feedback submitted successfully! Thank you."}),"error"===m&&e.jsx("div",{className:"p-3 rounded-xl text-sm font-medium",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",color:"#F87171",border:"1px solid rgba(239, 68, 68, 0.2)"},children:"✗ Failed to submit feedback. Please try again."}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:brightness-110",style:{backgroundColor:"transparent",border:"1px solid var(--border-subtle)",color:"var(--text-primary)"},children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!o.trim()||d||"success"===m,className:"flex-1 px-4 py-3 rounded-xl text-sm font-bold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed hover:brightness-105",style:{backgroundColor:"success"===m?"#22C55E":"#F8FAFC",color:"success"===m?"#FFFFFF":"#111111"},children:d?"Submitting...":"success"===m?"Submitted!":"Submit Feedback"})]})]})]})}):null}const xe=e=>{try{const r=`dismissed_announcements_${e}`,t=localStorage.getItem(r);return t?new Set(JSON.parse(t)):new Set}catch{return new Set}};function pe({userId:t,userType:s="creator"}){const[a,o]=r.useState([]),[n,i]=r.useState(!0);r.useEffect(()=>{if(!t)return void i(!1);const e=async()=>{try{const e=xe(t),{data:r,error:a}=await l.from("announcements").select("id, title, content, created_at, is_read, announcement_type, target_audience").or(`user_id.eq.${t},user_id.is.null`).eq("is_read",!1).order("created_at",{ascending:!1}).limit(10);if(a)throw a;const n=(r||[]).filter(r=>{if(e.has(r.id))return!1;const t=r.target_audience||"all";return"all"===t||("creators"===t&&"creator"===s||("artists"===t&&"artist"===s||("businesses"===t&&"business"===s||"freelancers"===t&&"freelancer"===s)))}).slice(0,5);o(n)}catch(e){o([])}finally{i(!1)}};e();const r=l.channel(`announcements-${t}-${s}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"announcements"},r=>{const a=r.new,l=a.target_audience||"all",o="all"===l||"creators"===l&&"creator"===s||"artists"===l&&"artist"===s||"businesses"===l&&"business"===s||"freelancers"===l&&"freelancer"===s;null!==a.user_id&&a.user_id!==t||!o||e()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"announcements"},r=>{const s=r.new;null!==s.user_id&&s.user_id!==t||e()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"announcements"},()=>{e()}).subscribe(e=>{});return()=>{l.removeChannel(r)}},[t,s]);const c=async e=>{o(r=>r.filter(r=>r.id!==e)),t&&((e,r)=>{try{const t=`dismissed_announcements_${e}`,s=xe(e);s.add(r),localStorage.setItem(t,JSON.stringify([...s]))}catch(t){}})(t,e);try{await l.from("announcements").update({is_read:!0}).eq("id",e)}catch(r){}};if(n||0===a.length)return null;const d=a.find(e=>!e.is_read)||a[0];if(!d)return null;const u="serious"===d.announcement_type;return e.jsx("div",{className:"mb-4 animate-fade-in",children:e.jsx("div",{className:"rounded-xl px-4 py-3 border relative",style:{backgroundColor:u?"rgba(239, 68, 68, 0.1)":"#111111",borderColor:u?"rgba(239, 68, 68, 0.4)":"#2f2f2f"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-1 flex items-center gap-1.5",style:{color:u?"#ef4444":"#F8FAFC"},children:[u&&e.jsx(A,{className:"w-3.5 h-3.5 flex-shrink-0",style:{color:"#ef4444"}}),d.title]}),e.jsx("p",{className:"text-xs leading-relaxed whitespace-pre-wrap",style:{color:u?"#F8FAFC":"var(--text-primary)"},children:d.content})]}),e.jsx("button",{onClick:()=>c(d.id),className:"flex-shrink-0 w-6 h-6 rounded-md flex items-center justify-center transition-all duration-200 hover:brightness-110",style:{backgroundColor:u?"rgba(239, 68, 68, 0.2)":"#0f0f13",color:u?"#ef4444":"var(--text-primary)"},"aria-label":"Dismiss announcement",children:e.jsx(W,{className:"w-3 h-3"})})]})})})}const he=()=>e.jsxs("div",{className:"music-icon group w-5 h-5 flex-shrink-0",children:[e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[e.jsx("path",{d:"M12 28C12 20.268 18.268 14 26 14H22C29.732 14 36 20.268 36 28",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"}),e.jsx("rect",{x:"8",y:"26",width:"8",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"32",y:"26",width:"8",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"10",y:"28",width:"4",height:"8",rx:"1",fill:"currentColor",opacity:"0.3"}),e.jsx("rect",{x:"34",y:"28",width:"4",height:"8",rx:"1",fill:"currentColor",opacity:"0.3"})]}),e.jsx("div",{className:"note note-1",children:e.jsxs("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",children:[e.jsx("path",{d:"M2 12V3L9 1V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"2",cy:"12",r:"2",fill:"currentColor"})]})}),e.jsx("div",{className:"note note-2",children:e.jsxs("svg",{width:"8",height:"12",viewBox:"0 0 10 14",fill:"none",children:[e.jsx("path",{d:"M2 12V3L9 1V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"2",cy:"12",r:"2",fill:"currentColor"})]})}),e.jsx("div",{className:"note note-3",children:e.jsxs("svg",{width:"6",height:"10",viewBox:"0 0 10 14",fill:"none",children:[e.jsx("path",{d:"M2 12V3L9 1V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"2",cy:"12",r:"2",fill:"currentColor"})]})})]}),ye=()=>e.jsx("div",{className:"creators-icon group w-5 h-5 flex-shrink-0",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[e.jsx("rect",{x:"14",y:"6",width:"20",height:"36",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"20",y:"9",width:"8",height:"2",rx:"1",fill:"currentColor",opacity:"0.4"}),e.jsx("rect",{x:"21",y:"38",width:"6",height:"2",rx:"1",fill:"currentColor",opacity:"0.4"}),e.jsxs("g",{className:"app app-1",children:[e.jsx("rect",{x:"16",y:"14",width:"10",height:"8",rx:"2",fill:"currentColor",opacity:"0.2"}),e.jsx("path",{d:"M20 16L23 18L20 20V16Z",fill:"currentColor",opacity:"0.8"})]}),e.jsxs("g",{className:"app app-2",children:[e.jsx("rect",{x:"26",y:"14",width:"8",height:"8",rx:"2",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.8"}),e.jsx("circle",{cx:"30",cy:"18",r:"2",stroke:"currentColor",strokeWidth:"1",fill:"none",opacity:"0.8"}),e.jsx("circle",{cx:"32.5",cy:"15.5",r:"0.8",fill:"currentColor",opacity:"0.6"})]})]})}),fe=()=>e.jsx("div",{className:"businesses-icon group w-5 h-5 flex-shrink-0",children:e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[e.jsx("rect",{x:"6",y:"18",width:"36",height:"22",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M18 18V14C18 12.8954 18.8954 12 20 12H28C29.1046 12 30 12.8954 30 14V18",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{className:"lid",x:"6",y:"18",width:"36",height:"8",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"var(--bg-primary)"}),e.jsx("rect",{className:"clasp",x:"21",y:"24",width:"6",height:"4",rx:"1",fill:"currentColor"}),e.jsxs("g",{className:"documents",children:[e.jsx("rect",{x:"12",y:"22",width:"10",height:"14",rx:"1",fill:"currentColor",opacity:"0.2"}),e.jsx("line",{x1:"14",y1:"25",x2:"20",y2:"25",stroke:"currentColor",strokeWidth:"1",opacity:"0.6"}),e.jsx("line",{x1:"14",y1:"28",x2:"18",y2:"28",stroke:"currentColor",strokeWidth:"1",opacity:"0.6"}),e.jsx("line",{x1:"14",y1:"31",x2:"20",y2:"31",stroke:"currentColor",strokeWidth:"1",opacity:"0.6"}),e.jsx("rect",{x:"26",y:"22",width:"10",height:"14",rx:"1",fill:"currentColor",opacity:"0.2"}),e.jsx("path",{d:"M28 33L31 28L33 30L36 25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.8"})]})]})}),ge=()=>e.jsx("div",{className:"creators-icon group w-5 h-5 flex-shrink-0 -mt-0.5",children:e.jsx("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:e.jsxs("g",{className:"origin-center transition-transform duration-500 group-hover:rotate-[360deg]",children:[e.jsx("rect",{x:"12",y:"10",width:"24",height:"10",rx:"1",fill:"none",stroke:"currentColor",strokeWidth:"2"}),e.jsx("rect",{x:"21",y:"20",width:"6",height:"24",rx:"1",fill:"none",stroke:"currentColor",strokeWidth:"2"}),e.jsx("line",{x1:"22",y1:"32",x2:"26",y2:"32",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"22",y1:"37",x2:"26",y2:"37",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})})}),ve=r=>{switch(r){case"artist":return e.jsx(he,{});case"creator":default:return e.jsx(ye,{});case"freelancer":return e.jsx(ge,{});case"business":return e.jsx(fe,{})}};function be({userProfile:t,cachedProfilePic:s,onBack:a,onUpdateProfile:l,isEditing:o=!1,setIsEditing:n,onEditProfile:c,appliedTheme:d="dark"}){const[u,m]=r.useState(!1),[x,p]=r.useState(!1),[h,y]=r.useState("overview");r.useState((null==t?void 0:t.bio)||"");const[g,v]=r.useState(null),[b,j]=r.useState(null),[k,w]=r.useState(!1),[C,N]=r.useState(!1),{t:_}=i(),L=r.useRef(null),S=r.useRef(null),E=null==t?void 0:t.profile_picture_url,W=s||(E&&!E.startsWith("blob:")?E:null),M=[{id:"overview",label:_("profile.overview")},{id:"reviews",label:_("profile.reviews")}];return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"var(--bg-primary)"},children:[e.jsx("div",{className:"sticky top-0 z-10 backdrop-blur-md border-b",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-subtle)"},children:e.jsxs("div",{className:"flex items-center gap-6 px-4 py-3",children:[a&&e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(U,{className:"w-5 h-5",style:{color:"var(--text-primary)"}})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-xl",style:{color:"var(--text-primary)"},children:(null==t?void 0:t.first_name)&&(null==t?void 0:t.last_name)?`${t.first_name} ${t.last_name}`:_("profile.yourProfile")}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:["0 ",_("profile.posts")]})]})]})}),e.jsxs("div",{className:"relative h-48 cursor-pointer group",style:{backgroundColor:"transparent"},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onClick:()=>{var e;null==(e=L.current)||e.click()},children:[(g||(null==t?void 0:t.banner_url))&&e.jsx("img",{src:g||(null==t?void 0:t.banner_url),alt:"Banner",className:"w-full h-full object-cover",loading:"eager",decoding:"async",fetchpriority:"high"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center transition-opacity "+(u||k?"opacity-100":"opacity-0"),children:k?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:_("common.uploading")})]}):e.jsx(B,{className:"w-8 h-8",style:{color:"var(--text-primary)"}})}),e.jsx("input",{type:"file",ref:L,className:"hidden",accept:"image/*",onChange:async e=>{var r;const t=null==(r=e.target.files)?void 0:r[0];if(t&&l){const e=URL.createObjectURL(t);v(e),w(!0);try{await l({banner:t}),v(null)}catch(s){v(null)}finally{w(!1)}}}})]}),e.jsxs("div",{className:"px-6 pb-6 relative",children:[e.jsxs("div",{className:"absolute -top-16 left-6 w-32 h-32 rounded-full border-4 border-[#111111] overflow-hidden cursor-pointer group",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onClick:()=>{var e;null==(e=S.current)||e.click()},children:[e.jsx("img",{src:b||W||f,alt:"Profile",className:"w-full h-full object-cover",loading:"eager",decoding:"async",fetchpriority:"high"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center transition-opacity "+(x||C?"opacity-100":"opacity-0"),children:C?e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-xs",style:{color:"var(--text-primary)"},children:_("common.uploading")})]}):e.jsx(B,{className:"w-6 h-6",style:{color:"var(--text-primary)"}})}),e.jsx("input",{type:"file",ref:S,className:"hidden",accept:"image/*",onChange:async e=>{var r;const t=null==(r=e.target.files)?void 0:r[0];if(t&&l){const e=URL.createObjectURL(t);j(e),N(!0);try{await l({profile_picture:t})}catch(s){j(null)}finally{N(!1)}}}})]}),e.jsx("div",{className:"flex justify-end pt-3",children:e.jsx("button",{onClick:c,className:"px-5 py-2 rounded-xl font-semibold text-sm hover:brightness-110 transition-all border",style:{backgroundColor:"transparent",borderColor:"#2f2f2f",color:"var(--text-primary)"},children:_("profile.editProfile")})}),e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"font-bold text-xl",style:{color:"var(--text-primary)"},children:(null==t?void 0:t.first_name)&&(null==t?void 0:t.last_name)?`${t.first_name} ${t.last_name}`:_("profile.yourName")}),ve(null==t?void 0:t.user_type)]}),e.jsxs("p",{style:{color:"var(--text-primary)"},children:["@",(null==t?void 0:t.username)||"username"]})]}),e.jsx("p",{className:"mt-3",style:{color:"var(--text-primary)"},children:(null==t?void 0:t.bio)||_("profile.noBio")}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",style:{color:"var(--text-primary)"},children:[(null==t?void 0:t.location)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:t.location})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:(e=>{if(!e)return _("profile.joinedRecently");const r=new Date(e);return`${_("profile.joined")} ${r.toLocaleDateString("en-US",{month:"long",year:"numeric"})}`})(null==t?void 0:t.created_at)})]})]})]}),e.jsx("div",{className:"border-b",style:{borderColor:"#1a1a1a"},children:e.jsx("div",{className:"flex",children:M.map(r=>e.jsxs("button",{onClick:()=>y(r.id),className:"flex-1 py-4 text-center hover:bg-white/5 transition-colors relative",children:[e.jsx("span",{style:{color:"var(--text-primary)",fontWeight:h===r.id?600:400,opacity:h===r.id?1:.6},children:r.label}),h===r.id&&e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-14 h-1 rounded-full",style:{backgroundColor:"#FFFFFF"}})]},r.id))})}),e.jsx("div",{className:"p-8",children:"overview"===h?e.jsx("div",{style:{color:"var(--text-primary)"},children:e.jsx("p",{className:"text-center py-8",style:{color:"var(--text-primary)"},children:_("profile.noContent")})}):e.jsxs("div",{style:{color:"var(--text-primary)"},children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:_("profile.reviews")}),e.jsx("div",{className:"text-center py-8",style:{color:"var(--text-primary)"},children:e.jsx("p",{children:_("profile.noReviews")})})]})})]})}function je({userType:r}){const{t:t}=i(),s=null==r?void 0:r.toLowerCase(),a=()=>e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",children:[e.jsx("path",{d:"M12 28C12 20.268 18.268 14 26 14H22C29.732 14 36 20.268 36 28",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"}),e.jsx("rect",{x:"8",y:"26",width:"8",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"32",y:"26",width:"8",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"10",y:"28",width:"4",height:"8",rx:"1",fill:"currentColor",opacity:"0.3"}),e.jsx("rect",{x:"34",y:"28",width:"4",height:"8",rx:"1",fill:"currentColor",opacity:"0.3"})]}),l=()=>e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",children:[e.jsx("rect",{x:"14",y:"6",width:"20",height:"36",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"20",y:"9",width:"8",height:"2",rx:"1",fill:"currentColor",opacity:"0.4"}),e.jsx("rect",{x:"21",y:"38",width:"6",height:"2",rx:"1",fill:"currentColor",opacity:"0.4"}),e.jsxs("g",{className:"app app-1",children:[e.jsx("rect",{x:"16",y:"14",width:"10",height:"8",rx:"2",fill:"currentColor",opacity:"0.2"}),e.jsx("path",{d:"M20 16L23 18L20 20V16Z",fill:"currentColor",opacity:"0.8"})]}),e.jsxs("g",{className:"app app-2",children:[e.jsx("rect",{x:"26",y:"14",width:"8",height:"8",rx:"2",stroke:"currentColor",strokeWidth:"1.5",fill:"none",opacity:"0.8"}),e.jsx("circle",{cx:"30",cy:"18",r:"2",stroke:"currentColor",strokeWidth:"1",fill:"none",opacity:"0.8"}),e.jsx("circle",{cx:"32.5",cy:"15.5",r:"0.8",fill:"currentColor",opacity:"0.6"})]})]}),o=()=>e.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",children:[e.jsx("rect",{x:"6",y:"18",width:"36",height:"22",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M18 18V14C18 12.8954 18.8954 12 20 12H28C29.1046 12 30 12.8954 30 14V18",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{className:"lid",x:"6",y:"18",width:"36",height:"8",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"currentColor"}),e.jsx("rect",{className:"clasp",x:"21",y:"24",width:"6",height:"4",rx:"1",fill:"currentColor"})]}),n=()=>e.jsx("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",children:e.jsxs("g",{className:"origin-center",children:[e.jsx("rect",{x:"12",y:"10",width:"24",height:"10",rx:"1",fill:"none",stroke:"currentColor",strokeWidth:"2"}),e.jsx("rect",{x:"21",y:"20",width:"6",height:"24",rx:"1",fill:"none",stroke:"currentColor",strokeWidth:"2"}),e.jsx("line",{x1:"22",y1:"32",x2:"26",y2:"32",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"22",y1:"37",x2:"26",y2:"37",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"},children:t("accountType.currentAccountType")}),e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:[e.jsxs("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},children:["artist"===s&&e.jsx(a,{}),"creator"===s&&e.jsx(l,{}),"freelancer"===s&&e.jsx(n,{}),("brand"===s||"business"===s)&&e.jsx(o,{})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-lg",style:{color:"var(--text-primary)"},children:t("artist"===s?"accountTypes.artist":"creator"===s?"accountTypes.creator":"freelancer"===s?"accountTypes.freelancer":"brand"===s||"business"===s?"accountTypes.brand":"accountType.unknown")}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:["artist"===s&&t("accountType.artistDesc"),"creator"===s&&t("accountType.creatorDesc"),"freelancer"===s&&t("accountType.freelancerDesc"),("brand"===s||"business"===s)&&t("accountType.brandDesc")]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#22C55E15"},children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",style:{color:"#22C55E"},children:[e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M9 12l2 2 4-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-0.5",style:{color:"var(--text-primary)"},children:"Account Status"}),e.jsx("p",{className:"text-base font-semibold",style:{color:"var(--text-primary)"},children:"Healthy"}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--text-primary)"},children:"No policy violations"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"rgba(255,255,255,0.05)"},children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",style:{color:"var(--text-primary)"},children:[e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M12 9V13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"17",r:"1",fill:"currentColor"})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-0.5",style:{color:"var(--text-primary)"},children:"Policy Warnings"}),e.jsx("p",{className:"text-base font-semibold",style:{color:"var(--text-primary)"},children:"0 warnings"}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--text-primary)"},children:"Compliant with Terms of Service"})]})]})]})]})}function ke({isActive:r,onToggle:t,backgroundTheme:s="dark",disabled:a=!1,size:l="md"}){const o={sm:r?"translate-x-4":"translate-x-0.5",md:r?"translate-x-6":"translate-x-1",lg:r?"translate-x-7":"translate-x-1"};return e.jsx("button",{onClick:t,disabled:a,className:`relative inline-flex ${{sm:"h-5 w-9",md:"h-6 w-11",lg:"h-7 w-13"}[l]} items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-white/20 ${r?(()=>{switch(s){case"light":case"white":return"bg-slate-700";case"grey":return"bg-zinc-800";case"rose":return"bg-rose-950";default:return"bg-zinc-900"}})():"white"===s?"bg-gray-300":"bg-gray-600"} ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:e.jsx("span",{className:`inline-block ${{sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"}[l]} transform rounded-full bg-white transition-transform duration-200 ${o[l]}`})})}export{pe as A,P as B,oe as D,me as F,z as I,ce as M,Y as O,be as P,le as R,se as S,ke as T,je as a,D as b,q as c,de as u};
