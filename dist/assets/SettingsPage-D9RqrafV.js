import{j as e}from"./spline-OfIZ-5GP.js";import{u as a,r as t}from"./react-vendor-ClpDbY_3.js";import{s}from"./index-B-5CwU3e.js";import{c as r}from"./createLucideIcon-DkpiXdJH.js";import{C as l}from"./camera-DMLgm8uh.js";import{M as i}from"./map-pin-COWkFqBM.js";import{G as o}from"./globe-Cr7MOU3o.js";import"./supabase-Dq2D-Wrk.js";
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=r("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function d(){return e.jsx("span",{className:"inline-flex items-center justify-center px-0.5 py-0.5 text-[6px] sm:px-1.5 sm:text-[8px] font-medium uppercase tracking-wider text-white bg-[#1e1e1e] rounded border border-border/50 cursor-default transition-all duration-300 ease-out hover:bg-[#2a2a2a] hover:text-white hover:border-foreground/30 hover:shadow-[0_0_12px_rgba(255,255,255,0.15)] hover:scale-105 select-none -ml-1",children:"Beta"})}const c=["United States of America","United Kingdom","Canada","Australia","Germany","France","Spain","Italy","Japan","South Korea","Brazil","Mexico","India","China","Netherlands","Sweden","Norway","Denmark","Finland","Switzerland","Austria","Belgium","Portugal","Poland","Greece","Ireland","New Zealand","Singapore","South Africa","Argentina","Chile","Colombia","Peru","Thailand","Vietnam","Malaysia","Indonesia","Philippines","Turkey","United Arab Emirates","Saudi Arabia","Israel","Egypt","Nigeria","Kenya","Other"],m=["English","Spanish","French","German","Italian","Portuguese","Dutch","Russian","Chinese (Mandarin)","Japanese","Korean","Arabic","Hindi","Bengali","Turkish","Vietnamese","Thai","Indonesian","Malay","Tagalog","Swedish","Norwegian","Danish","Finnish","Polish","Greek","Hebrew","Swahili","Other"];function u(){const r=a(),[u,x]=t.useState("personal"),[h,p]=t.useState(!1),[v,f]=t.useState(null),[g,b]=t.useState(null),[y,j]=t.useState(null),[N,w]=t.useState({firstName:"",lastName:"",username:"",location:"United States of America",language:"English",email:""});t.useEffect(()=>{k()},[]),t.useEffect(()=>{const e=()=>{document.hidden||k()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]);const k=async()=>{I(!0);try{const{data:{user:a},error:t}=await s.auth.getUser(),r=localStorage.getItem("verifiedUserId"),l=localStorage.getItem("verifiedEmail");let i=(null==a?void 0:a.id)||r;if(!i&&l){const{data:e}=await s.from("users").select("id").eq("email",l).maybeSingle();(null==e?void 0:e.id)&&(i=e.id,localStorage.setItem("verifiedUserId",i))}if(!i)return;let o=null,n=null;try{const e=`undefined/functions/v1/get-profile?userId=${i}`,a=await fetch(e,{method:"GET",headers:{Authorization:"Bearer undefined","Content-Type":"application/json"}});if(a.ok){const e=await a.json();e.success&&(o=e.profile,n=e.user)}else{await a.text()}}catch(e){}if(!o){const e=await s.from("users").select("*").eq("id",i).maybeSingle();e.error||e.data&&(o=e.data,n=e.data)}const d=n||o;if(d){f(d);const e={firstName:(null==d?void 0:d.first_name)||"",lastName:(null==d?void 0:d.last_name)||"",username:(null==d?void 0:d.username)||"",location:(null==d?void 0:d.location)||"United States of America",language:(null==d?void 0:d.primary_language)||"English",email:(null==d?void 0:d.email)||(null==a?void 0:a.email)||l||""};w(e),(null==d?void 0:d.profile_picture_url)?j(d.profile_picture_url):j(null)}else l&&w(e=>({...e,email:l}))}catch(a){}finally{I(!1)}},[C,L]=t.useState(!1),[S,E]=t.useState(null),[_,I]=t.useState(!1),U=async()=>{L(!0),E(null);try{const{data:{user:a}}=await s.auth.getUser(),t=localStorage.getItem("verifiedUserId"),r=(null==a?void 0:a.id)||t;if(!r)return E("You must be logged in to save changes"),void L(!1);let l=null,i=null;if(g)try{const e=new FileReader;l=await new Promise((a,t)=>{e.onload=()=>{const t=e.result.split(",")[1];a(t)},e.onerror=t,e.readAsDataURL(g)}),i=g.name}catch(e){return E(`Failed to process profile picture: ${e.message}`),void L(!1)}const o="undefined/functions/v1/save-profile",n=await fetch(o,{method:"POST",headers:{Authorization:"Bearer undefined","Content-Type":"application/json"},body:JSON.stringify({userId:r,firstName:N.firstName,lastName:N.lastName,location:N.location,primaryLanguage:N.language,profilePictureBase64:l,profilePictureFileName:i})}),d=await n.json();if(!d.success)throw new Error(d.message||"Failed to save changes");y&&y.startsWith("blob:")&&URL.revokeObjectURL(y),await k(),b(null),j(null),p(!1)}catch(a){E(a.message||"Failed to save changes")}finally{L(!1)}},P=(a,t)=>e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"var(--text-primary)"},children:a}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:t})]})});return e.jsxs("div",{className:"h-screen text-theme-primary overflow-hidden flex flex-col",style:{backgroundColor:"var(--bg-primary)"},children:[e.jsx("header",{className:"flex-shrink-0 h-16 z-50",style:{backgroundColor:"var(--bg-primary)",borderBottom:"1px solid var(--border-subtle)"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 h-full flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>{const e=localStorage.getItem("currentDashboard");r(e||"/dashboard/creator")},className:"flex items-center gap-2 text-sm transition-colors hover:brightness-110",style:{color:"var(--text-primary)"},children:[e.jsx(n,{className:"w-4 h-4"}),"Back"]}),e.jsx("div",{className:"h-6 w-px",style:{backgroundColor:"#1a1a1a"}}),e.jsx("img",{src:"/elevate_transparent_white_.png",alt:"ELEVATE",className:"h-28 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>r("/")}),e.jsx(d,{})]})})}),e.jsx("div",{className:"flex-1 overflow-hidden pt-8 pb-8",children:e.jsxs("div",{className:"h-full max-w-5xl mx-auto px-8 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-10 flex-shrink-0",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center overflow-hidden border-2 border-white/10 shadow-lg",children:(null==v?void 0:v.profile_picture_url)?e.jsx("img",{src:v.profile_picture_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-1",style:{color:"var(--text-primary)"},children:N.firstName||N.lastName?`${N.firstName} ${N.lastName}`.trim():"Your Name"}),e.jsxs("p",{className:"text-base",style:{color:"var(--text-primary)"},children:[N.username?`@${N.username}`:""," ",N.email]})]})]}),e.jsxs("div",{className:"flex gap-6 flex-1 overflow-hidden min-h-0",children:[e.jsx("aside",{className:"w-72 flex-shrink-0",children:e.jsx("div",{className:"rounded-2xl p-1 shadow-xl h-full",style:{backgroundColor:"var(--bg-card)"},children:e.jsxs("nav",{className:"space-y-1 p-2",children:[e.jsx("button",{onClick:()=>x("personal"),className:"w-full text-left px-5 py-3.5 rounded-xl text-sm font-semibold transition-all duration-200 "+("personal"===u?"shadow-md":"hover:brightness-105"),style:{backgroundColor:"personal"===u?"var(--bg-elevated)":"transparent",color:"var(--text-primary)"},children:"Personal info"}),e.jsx("button",{onClick:()=>x("accounts"),className:"w-full text-left px-5 py-3.5 rounded-xl text-sm font-semibold transition-all duration-200 "+("accounts"===u?"shadow-md":"hover:brightness-105"),style:{backgroundColor:"accounts"===u?"var(--bg-elevated)":"transparent",color:"var(--text-primary)"},children:"Connected accounts"}),e.jsx("button",{onClick:()=>x("payout"),className:"w-full text-left px-5 py-3.5 rounded-xl text-sm font-semibold transition-all duration-200 "+("payout"===u?"shadow-md":"hover:brightness-105"),style:{backgroundColor:"payout"===u?"var(--bg-elevated)":"transparent",color:"var(--text-primary)"},children:"Payment Method"}),e.jsx("button",{onClick:()=>x("notifications"),className:"w-full text-left px-5 py-3.5 rounded-xl text-sm font-semibold transition-all duration-200 "+("notifications"===u?"shadow-md":"hover:brightness-105"),style:{backgroundColor:"notifications"===u?"var(--bg-elevated)":"transparent",color:"var(--text-primary)"},children:"Notifications"}),e.jsx("button",{onClick:()=>x("close"),className:"w-full text-left px-5 py-3.5 rounded-xl text-sm font-semibold transition-all duration-200 "+("close"===u?"shadow-md":"hover:brightness-105"),style:{backgroundColor:"close"===u?"var(--bg-elevated)":"transparent",color:"var(--text-primary)"},children:"Close account"})]})})}),e.jsxs("main",{className:"flex-1 rounded-2xl p-8 shadow-xl overflow-y-auto",style:{backgroundColor:"var(--bg-card)"},children:["personal"===u&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Personal info"}),e.jsx("button",{onClick:()=>{k()},disabled:_,className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--bg-elevated)",color:"var(--text-primary)"},children:_?"Loading...":"Refresh Data"})]}),e.jsxs("div",{className:"mb-6 p-4 rounded-lg text-xs space-y-1",style:{backgroundColor:"var(--bg-elevated)",color:"var(--text-primary)"},children:[e.jsx("div",{className:"font-bold mb-2 text-white",children:"ðŸ” Debug Info:"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"userId:"})," ",localStorage.getItem("verifiedUserId")||"âŒ Not found"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",localStorage.getItem("verifiedEmail")||"âŒ Not found"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Has Profile Data:"})," ",v?"âœ… Yes":"âŒ No"]}),v&&e.jsxs("div",{className:"pl-4 text-green-400",children:[e.jsxs("div",{children:["âœ“ Profile ID: ",null==(A=v.id)?void 0:A.substring(0,8),"..."]}),e.jsxs("div",{children:["âœ“ User Type: ",v.user_type]})]}),e.jsx("div",{className:"font-semibold mt-2",children:"Form Data:"}),e.jsxs("div",{className:"pl-4",children:[e.jsxs("div",{children:["â€¢ First Name: ",N.firstName||"(empty)"]}),e.jsxs("div",{children:["â€¢ Last Name: ",N.lastName||"(empty)"]}),e.jsxs("div",{children:["â€¢ Username: ",N.username||"(empty)"]}),e.jsxs("div",{children:["â€¢ Email: ",N.email||"(empty)"]}),e.jsxs("div",{children:["â€¢ Location: ",N.location]}),e.jsxs("div",{children:["â€¢ Language: ",N.language]})]}),!v&&e.jsx("div",{className:"mt-2 p-2 rounded",style:{backgroundColor:"#7f1d1d",color:"#fecaca"},children:"âš ï¸ NO PROFILE DATA FOUND! This user hasn't completed onboarding yet."}),e.jsx("div",{className:"mt-2 text-yellow-400",children:'ðŸ‘‰ Open browser console (F12) and click "Refresh Data" to see detailed logs'})]}),_?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):e.jsxs("div",{className:"space-y-7",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",style:{color:"var(--text-primary)"},children:"Profile picture"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center overflow-hidden border-2 border-white/10 shadow-md",children:y?e.jsx("img",{src:y,alt:"Profile",className:"w-full h-full object-cover"}):(null==v?void 0:v.profile_picture_url)?e.jsx("img",{src:v.profile_picture_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("label",{className:"flex items-center gap-2 px-5 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 hover:brightness-110 shadow-sm cursor-pointer",style:{backgroundColor:"var(--bg-elevated)",color:"var(--text-primary)"},children:[e.jsx(l,{className:"w-4 h-4"}),"Replace picture",e.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var a;const t=null==(a=e.target.files)?void 0:a[0];if(t){b(t);const e=URL.createObjectURL(t);j(e)}},className:"hidden"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2.5",style:{color:"var(--text-primary)"},children:"First name"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:N.firstName,onChange:e=>w({...N,firstName:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&h&&!C&&U()},disabled:!h,className:"flex-1 h-12 px-4 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-white/10 transition-all",style:{color:"var(--text-primary)",background:"var(--bg-elevated)",border:"1px solid rgba(75, 85, 99, 0.2)"}}),!h&&e.jsx("button",{onClick:()=>p(!0),className:"p-2.5 hover:brightness-110 transition-all rounded-lg",style:{color:"var(--text-primary)"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2.5",style:{color:"var(--text-primary)"},children:"Last name"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:N.lastName,onChange:e=>w({...N,lastName:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&h&&!C&&U()},disabled:!h,className:"flex-1 h-12 px-4 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-white/10 transition-all",style:{color:"var(--text-primary)",background:"var(--bg-elevated)",border:"1px solid rgba(75, 85, 99, 0.2)"}}),e.jsx("div",{className:"w-10 h-10"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2.5",style:{color:"var(--text-primary)"},children:"Username"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 flex items-center h-12 px-4 rounded-xl transition-all opacity-70",style:{background:"var(--bg-elevated)",border:"1px solid rgba(75, 85, 99, 0.2)"},children:[e.jsx("span",{style:{color:"var(--text-primary)"},children:"@"}),e.jsx("input",{type:"text",value:N.username,disabled:!0,readOnly:!0,className:"flex-1 bg-transparent text-sm focus:outline-none ml-1 cursor-not-allowed",style:{color:"var(--text-primary)"},title:"Username cannot be changed after onboarding"})]}),e.jsx("div",{className:"w-10 h-10"})]}),e.jsx("p",{className:"text-xs mt-1.5",style:{color:"var(--text-primary)"},children:"Username cannot be changed after onboarding"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2.5",style:{color:"var(--text-primary)"},children:"Location"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 flex items-center h-12 px-4 rounded-xl focus-within:ring-2 focus-within:ring-white/10 transition-all",style:{background:"var(--bg-elevated)",border:"1px solid rgba(75, 85, 99, 0.2)"},children:[e.jsx(i,{className:"w-4 h-4 mr-2 flex-shrink-0",style:{color:"var(--text-primary)"}}),e.jsx("select",{value:N.location,onChange:e=>w({...N,location:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&h&&!C&&U()},disabled:!h,className:"flex-1 bg-transparent text-sm focus:outline-none",style:{color:"var(--text-primary)"},children:c.map(a=>e.jsx("option",{value:a,style:{background:"var(--bg-elevated)"},children:a},a))})]}),!h&&e.jsx("button",{onClick:()=>p(!0),className:"p-2.5 hover:brightness-110 transition-all rounded-lg",style:{color:"var(--text-primary)"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2.5",style:{color:"var(--text-primary)"},children:"Languages you post in"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 flex items-center h-12 px-4 rounded-xl focus-within:ring-2 focus-within:ring-white/10 transition-all",style:{background:"var(--bg-elevated)",border:"1px solid rgba(75, 85, 99, 0.2)"},children:[e.jsx(o,{className:"w-4 h-4 mr-2 flex-shrink-0",style:{color:"var(--text-primary)"}}),e.jsx("select",{value:N.language,onChange:e=>w({...N,language:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&h&&!C&&U()},disabled:!h,className:"flex-1 bg-transparent text-sm focus:outline-none",style:{color:"var(--text-primary)"},children:m.map(a=>e.jsx("option",{value:a,style:{background:"var(--bg-elevated)"},children:a},a))})]}),!h&&e.jsx("button",{onClick:()=>p(!0),className:"p-2.5 hover:brightness-110 transition-all rounded-lg",style:{color:"var(--text-primary)"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2.5",style:{color:"var(--text-primary)"},children:"Email"}),e.jsx("input",{type:"email",value:N.email,disabled:!0,className:"w-full h-12 px-4 rounded-xl text-sm focus:outline-none opacity-50",style:{color:"var(--text-primary)",background:"var(--bg-elevated)",border:"1px solid rgba(75, 85, 99, 0.2)"}}),e.jsx("p",{className:"text-xs mt-1.5",style:{color:"var(--text-primary)"},children:"Email cannot be changed"})]}),S&&e.jsx("div",{className:"text-red-500 text-sm mt-4",children:S}),h&&e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>{y&&y.startsWith("blob:")&&URL.revokeObjectURL(y),p(!1),b(null),j((null==v?void 0:v.profile_picture_url)||null),v&&w({firstName:(null==v?void 0:v.first_name)||"",lastName:(null==v?void 0:v.last_name)||"",username:(null==v?void 0:v.username)||"",location:(null==v?void 0:v.location)||"United States of America",language:(null==v?void 0:v.primary_language)||"English",email:(null==v?void 0:v.email)||N.email})},className:"px-7 py-3 rounded-xl text-sm font-semibold transition-all duration-200 hover:brightness-110 shadow-sm",style:{backgroundColor:"var(--bg-elevated)",color:"var(--text-primary)"},children:"Cancel"}),e.jsx("button",{onClick:U,disabled:C,className:"px-7 py-3 rounded-xl text-sm font-semibold transition-all duration-200 hover:brightness-110 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#E8E8E8",color:"#000000"},children:C?"Saving...":"Save changes"})]})]})]}),"accounts"===u&&P("Connected accounts","Manage your social media connections"),"payout"===u&&P("Payment Method","Payments are typically processed automatically through Tipalti. If a payout needs to be issued outside of Tipalti, you can add an alternative payment method."),"notifications"===u&&P("Notifications","Manage your notification preferences"),"close"===u&&P("Close account","Delete your account and data")]})]})]})})]});var A}export{u as SettingsPage};
