const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-De7uKN1W.js","assets/spline-DN92G9fQ.js","assets/react-vendor-C5CBPnGl.js","assets/createLucideIcon-DApH4y_Q.js","assets/plus-huPEdIgT.js","assets/SignupPage-BVYcxa_X.js","assets/LoginPage-C5hd5d6M.js","assets/UserTypeSelectionPage-c1QQajZR.js","assets/supabase-CAOwvaCC.js","assets/MakeProfilePage-SnZSlHuW.js","assets/TellUsAboutYourselfPage-BZ08bCXE.js","assets/ContactForm-JakhahwW.js","assets/ArtistDashboard-B8s2qDeR.js","assets/BetaBadge-CcWCYo5H.js","assets/BellIcon-CRr5MJaj.js","assets/x-CKfmtFfh.js","assets/DoorTransition-qwGU0lrz.js","assets/CreatorDashboard-Cddufm8k.js","assets/debounce-T6KWSX3s.js","assets/arrow-left-D6ZoFILw.js","assets/BusinessDashboard-DQ-6Jn2e.js","assets/MobileMenuPage-CdE6aYkF.js","assets/SettingsPage-Bz_ITHvC.js","assets/VerifySetupPage-BvjSl7Yf.js","assets/AdminLoginPage-CdKizXFG.js","assets/AdminDashboard-DmUEmgZr.js"])))=>i.map(i=>d[i]);
import{j as e,_ as s}from"./spline-DN92G9fQ.js";import{a as t,r as n,N as i,B as a,R as r,b as o}from"./react-vendor-C5CBPnGl.js";import{c as l}from"./supabase-CAOwvaCC.js";var c;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var d=t;c=d.createRoot,d.hydrateRoot;const u=l("https://hlcpoqxzqgbghsadouef.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsY3BvcXh6cWdiZ2hzYWRvdWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzI2MTUsImV4cCI6MjA4MTcwODYxNX0.Qhbzj0g5FbpW0wgtGsJBF2AV0HqL-9X2S2nGL64KCYA");function h({text:s="Loading...",barCount:t=5,className:n=""}){return e.jsxs("div",{className:`flex flex-col items-center justify-center ${n}`,children:[e.jsx("div",{className:"flex items-end gap-1.5 mb-4",children:Array.from({length:t}).map((s,t)=>e.jsx("div",{className:"w-1.5 rounded-full animate-bar",style:{backgroundColor:"#F8FAFC",height:"32px",animationDelay:.05*t+"s"}},t))}),s&&e.jsx("p",{className:"text-sm",style:{color:"#64748B"},children:s})]})}function m({children:s}){const[t,a]=n.useState(null),[r,o]=n.useState(!0);return n.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("verifiedUserId"),s=localStorage.getItem("verifiedEmail");if(e)return a(!0),void o(!1);if(s){const{data:{user:e}}=await u.auth.getUser();if(e)a(!0);else{const{data:e}=await u.from("users").select("id").eq("email",s).maybeSingle();(null==e?void 0:e.id)?(localStorage.setItem("verifiedUserId",e.id),a(!0)):a(!1)}}else{const{data:{session:e}}=await u.auth.getSession();a(!!e)}}catch(e){a(!1)}finally{o(!1)}})()},[]),r?e.jsx("div",{style:{backgroundColor:"#000",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:e.jsx(h,{text:"Loading..."})}):t?s:e.jsx(i,{to:"/login",replace:!0})}const p=n.createContext(void 0);function f({children:s}){const[t,i]=n.useState(null),[a,r]=n.useState(null),[o,l]=n.useState(!0),c=n.useRef(null);n.useEffect(()=>{l(!1)},[]);const d=async()=>{try{const e=c.current||a;if(!e)return l(!1),!1;const s="https://hlcpoqxzqgbghsadouef.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsY3BvcXh6cWdiZ2hzYWRvdWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzI2MTUsImV4cCI6MjA4MTcwODYxNX0.Qhbzj0g5FbpW0wgtGsJBF2AV0HqL-9X2S2nGL64KCYA",n=await fetch(`${s}/functions/v1/admin-verify-session`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"X-Session-Token":e,"Content-Type":"application/json"}}),o=await n.json();return o.success&&o.admin?(i(o.admin),c.current=e,l(!1),!0):(i(null),r(null),c.current=null,l(!1),!1)}catch(e){return i(null),r(null),c.current=null,l(!1),!1}},u={admin:t,sessionToken:c.current||a,isLoading:o,isAuthenticated:!!t,login:async(e,s,t)=>{try{const n="https://hlcpoqxzqgbghsadouef.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsY3BvcXh6cWdiZ2hzYWRvdWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzI2MTUsImV4cCI6MjA4MTcwODYxNX0.Qhbzj0g5FbpW0wgtGsJBF2AV0HqL-9X2S2nGL64KCYA",o=await fetch(`${n}/functions/v1/admin-login`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({email:e,password:s,totpCode:t})}),l=await o.json();return l.success&&l.sessionToken&&l.admin?(c.current=l.sessionToken,r(l.sessionToken),i(l.admin),{success:!0}):{success:!1,message:l.message||"Login failed",requiresTotp:l.requiresTotp||!1}}catch(n){return{success:!1,message:n.message||"Login failed"}}},logout:async()=>{try{if(a){const e="https://hlcpoqxzqgbghsadouef.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsY3BvcXh6cWdiZ2hzYWRvdWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzI2MTUsImV4cCI6MjA4MTcwODYxNX0.Qhbzj0g5FbpW0wgtGsJBF2AV0HqL-9X2S2nGL64KCYA";await fetch(`${e}/functions/v1/admin-logout`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"X-Session-Token":a,"Content-Type":"application/json"}})}}catch(e){}finally{i(null),r(null),c.current=null}},verifySession:d,hasPermission:(e,s)=>{if(!t||!t.permissions)return!1;const n=t.permissions[e];return!(!n||!Array.isArray(n))&&n.includes(s)},refreshSession:async()=>{await d()}};return e.jsx(p.Provider,{value:u,children:s})}function j(){const e=n.useContext(p);if(void 0===e)throw new Error("useAdminAuth must be used within an AdminAuthProvider");return e}function g({children:s,requiredPermission:t}){const{isAuthenticated:n,isLoading:a,hasPermission:r}=j();return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#111111"},children:e.jsx(h,{text:"Loading dashboard..."})}):n?t&&!r(t.resource,t.action)?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#111111"},children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-400",children:"You don't have permission to access this page."})]})}):e.jsx(e.Fragment,{children:s}):e.jsx(i,{to:"/admin/login",replace:!0})}const x=n.lazy(()=>s(()=>import("./HomePage-De7uKN1W.js"),__vite__mapDeps([0,1,2,3,4])).then(e=>({default:e.HomePage}))),I=n.lazy(()=>s(()=>import("./SignupPage-BVYcxa_X.js"),__vite__mapDeps([5,1,2])).then(e=>({default:e.SignupPage}))),y=n.lazy(()=>s(()=>import("./LoginPage-C5hd5d6M.js"),__vite__mapDeps([6,1,2])).then(e=>({default:e.LoginPage}))),_=n.lazy(()=>s(()=>import("./UserTypeSelectionPage-c1QQajZR.js"),__vite__mapDeps([7,1,2,8])).then(e=>({default:e.UserTypeSelectionPage}))),b=n.lazy(()=>s(()=>import("./MakeProfilePage-SnZSlHuW.js"),__vite__mapDeps([9,1,2,8])).then(e=>({default:e.MakeProfilePage}))),A=n.lazy(()=>s(()=>import("./TellUsAboutYourselfPage-BZ08bCXE.js"),__vite__mapDeps([10,1,2,8])).then(e=>({default:e.TellUsAboutYourselfPage}))),P=n.lazy(()=>s(()=>import("./ContactForm-JakhahwW.js"),__vite__mapDeps([11,1,2,3])).then(e=>({default:e.ContactForm}))),z=n.lazy(()=>s(()=>import("./ArtistDashboard-B8s2qDeR.js"),__vite__mapDeps([12,1,2,13,3,14,15,4,16,8])).then(e=>({default:e.ArtistDashboard}))),v=n.lazy(()=>s(()=>import("./CreatorDashboard-Cddufm8k.js"),__vite__mapDeps([17,1,2,13,3,14,15,4,16,18,19,8])).then(e=>({default:e.CreatorDashboard}))),L=n.lazy(()=>s(()=>import("./BusinessDashboard-DQ-6Jn2e.js"),__vite__mapDeps([20,1,2,16])).then(e=>({default:e.BusinessDashboard}))),E=n.lazy(()=>s(()=>import("./MobileMenuPage-CdE6aYkF.js"),__vite__mapDeps([21,1,2])).then(e=>({default:e.MobileMenuPage}))),T=n.lazy(()=>s(()=>import("./SettingsPage-Bz_ITHvC.js"),__vite__mapDeps([22,1,2,13,3,19,8])).then(e=>({default:e.SettingsPage}))),S=n.lazy(()=>s(()=>import("./VerifySetupPage-BvjSl7Yf.js"),__vite__mapDeps([23,1,2,8])).then(e=>({default:e.VerifySetupPage}))),C=n.lazy(()=>s(()=>import("./AdminLoginPage-CdKizXFG.js"),__vite__mapDeps([24,1,2,8])).then(e=>({default:e.AdminLoginPage}))),O=n.lazy(()=>s(()=>import("./AdminDashboard-DmUEmgZr.js"),__vite__mapDeps([25,1,2,18,3,19,15,8])).then(e=>({default:e.AdminDashboard})));function J(){return e.jsx(f,{children:e.jsx(a,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(n.Suspense,{fallback:e.jsx("div",{style:{backgroundColor:"#000",minHeight:"100vh"}}),children:e.jsxs(r,{children:[e.jsx(o,{path:"/",element:e.jsx(x,{})}),e.jsx(o,{path:"/menu",element:e.jsx(E,{})}),e.jsx(o,{path:"/signup",element:e.jsx(I,{})}),e.jsx(o,{path:"/login",element:e.jsx(y,{})}),e.jsx(o,{path:"/user-type-selection",element:e.jsx(_,{})}),e.jsx(o,{path:"/make-profile",element:e.jsx(b,{})}),e.jsx(o,{path:"/tell-us-about-yourself",element:e.jsx(A,{})}),e.jsx(o,{path:"/contact",element:e.jsx(P,{})}),e.jsx(o,{path:"/dashboard/artist",element:e.jsx(m,{children:e.jsx(z,{})})}),e.jsx(o,{path:"/dashboard/creator",element:e.jsx(m,{children:e.jsx(v,{})})}),e.jsx(o,{path:"/dashboard/business",element:e.jsx(m,{children:e.jsx(L,{})})}),e.jsx(o,{path:"/settings",element:e.jsx(m,{children:e.jsx(T,{})})}),e.jsx(o,{path:"/verify-setup",element:e.jsx(S,{})}),e.jsx(o,{path:"/admin/login",element:e.jsx(C,{})}),e.jsx(o,{path:"/admin/dashboard",element:e.jsx(g,{children:e.jsx(O,{})})})]})})})})}document.body.classList.add("preload"),window.addEventListener("load",()=>{setTimeout(()=>{document.body.classList.remove("preload")},100)});const V=document.getElementById("root");if(!V)throw new Error("Root element not found");c(V).render(e.jsx(n.StrictMode,{children:e.jsx(J,{})}));export{h as A,u as s,j as u};
