import{j as e}from"./spline-DN92G9fQ.js";import{r as t,u as s}from"./react-vendor-C5CBPnGl.js";function r(){const[r,a]=t.useState(""),[n,i]=t.useState(!0),[l,o]=t.useState("email"),[c,d]=t.useState(["","","","","",""]),[u,m]=t.useState(""),[h,x]=t.useState(!1),[p,b]=t.useState(""),[g,f]=t.useState(null),[v,w]=t.useState(!1),[j,y]=t.useState(window.innerWidth<640),I=s(),N=t.useRef([]);t.useEffect(()=>{const e=setTimeout(()=>{w(!0)},100);return()=>clearTimeout(e)},[]),t.useEffect(()=>{const e=()=>{y(window.innerWidth<640)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const C=async()=>{if(r&&n){x(!0),m("");try{const e="https://hlcpoqxzqgbghsadouef.supabase.co/functions/v1/send-otp",t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsY3BvcXh6cWdiZ2hzYWRvdWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzI2MTUsImV4cCI6MjA4MTcwODYxNX0.Qhbzj0g5FbpW0wgtGsJBF2AV0HqL-9X2S2nGL64KCYA"},body:JSON.stringify({email:r,isLogin:!0})}),s=await t.json();if(!s.success)throw new Error(s.message||"Failed to send OTP");s.emailSent?(b(""),f(null)):(s.emailError?b(`Email service error: ${s.emailError}. Please check your email configuration.`):b("Email service is not configured. OTP code will be shown below for testing."),s.devCode),o("code")}catch(e){m(e.message||"Failed to send verification code")}finally{x(!1)}}},F=async e=>{var t;x(!0),m("");try{const t="https://hlcpoqxzqgbghsadouef.supabase.co/functions/v1/verify-otp",s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsY3BvcXh6cWdiZ2hzYWRvdWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzI2MTUsImV4cCI6MjA4MTcwODYxNX0.Qhbzj0g5FbpW0wgtGsJBF2AV0HqL-9X2S2nGL64KCYA"},body:JSON.stringify({email:r,code:e,isSignup:!1})}),a=await s.json();if(!a.success)throw new Error(a.message||"Invalid code");if(a.userId&&(localStorage.setItem("verifiedEmail",r),localStorage.setItem("verifiedUserId",a.userId)),a.hasProfile&&a.userType)switch(a.userType){case"artist":default:I("/dashboard/artist");break;case"creator":I("/dashboard/creator");break;case"business":I("/dashboard/business")}else I("/make-profile")}catch(s){m(s.message||"Invalid verification code"),d(["","","","","",""]),null==(t=N.current[0])||t.focus()}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center relative overflow-hidden py-8 sm:py-12 px-6",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E\")"},children:[e.jsxs("button",{onClick:()=>I("/"),className:"fixed top-6 left-6 z-50 flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors group",children:[e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),e.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),!j&&e.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none transition-opacity duration-700 ease-out overflow-hidden",style:{opacity:v?1:0,transform:"translateX(30%) scale(1.035)"},children:e.jsx("spline-viewer",{url:"https://prod.spline.design/hxB6DGH8u6Rcpq21/scene.splinecode","mouse-controls":"false",className:"spline-viewer-no-watermark"})}),e.jsx("div",{className:"relative z-10 w-full max-w-sm flex flex-col items-center",children:"email"===l?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-semibold text-white mb-1",children:"Log in to Elevate"}),e.jsxs("p",{className:"text-neutral-400 text-sm mb-6",children:["Don't have an account? ",e.jsx("button",{onClick:()=>I("/signup"),className:"text-white font-medium hover:underline",children:"Sign up"}),"."]}),e.jsxs("button",{onClick:()=>{},className:"w-full h-11 bg-transparent border border-neutral-700 text-white hover:bg-neutral-800 rounded-lg mb-6 flex items-center justify-center gap-2 transition-colors",children:[e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Login with Google"]}),e.jsxs("div",{className:"w-full flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"flex-1 h-px bg-neutral-700"}),e.jsx("span",{className:"text-neutral-500 text-xs",children:"or"}),e.jsx("div",{className:"flex-1 h-px bg-neutral-700"})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{className:"block text-neutral-400 text-xs mb-1.5",children:"Email"}),e.jsx("input",{type:"email",placeholder:"alan.turing@example.com",value:r,onChange:e=>{const t=e.target.value;a(t),m(""),i(!t||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))},onKeyDown:e=>{"Enter"===e.key&&r&&n&&!h&&C()},className:"h-11 w-full px-4 bg-transparent border border-neutral-700 text-white placeholder:text-neutral-500 rounded-lg focus:border-neutral-500 focus:outline-none"}),!n&&e.jsx("p",{className:"text-red-500 text-xs mt-1.5",children:"Please enter a valid email address"}),u&&e.jsx("p",{className:"text-red-500 text-xs mt-1.5",children:u})]}),e.jsx("button",{onClick:C,disabled:!r||!n||h,className:"w-full h-11 rounded-lg mb-6 transition-all duration-300 "+(r&&n?"text-black hover:opacity-95":"bg-neutral-800 text-neutral-500 border border-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-neutral-800"),style:r&&n?{background:"#E8E8E8"}:{},children:h?"Logging in...":"Log In"}),e.jsxs("p",{className:"text-neutral-400 text-xs text-center",children:["By signing in, you agree to our"," ",e.jsx("button",{className:"text-white underline hover:no-underline",children:"Terms"})," ","and"," ",e.jsx("button",{className:"text-white underline hover:no-underline",children:"Privacy Policy"}),"."]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"We emailed you a code"}),e.jsx("p",{className:"text-neutral-400 text-sm",children:"Enter the verification code sent to"}),e.jsxs("p",{className:"text-neutral-400 text-sm",children:[e.jsx("span",{className:"text-white break-all",children:r})," ",e.jsx("button",{onClick:()=>{o("email"),d(["","","","","",""]),m(""),b(""),f(null)},className:"text-white font-medium hover:text-neutral-300 transition-colors",children:"Ã—"})]})]}),e.jsx("div",{className:"w-full p-6 relative overflow-hidden",style:{background:"rgba(10, 10, 15, 0.65)",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",border:"1px solid rgba(255, 255, 255, 0.06)",borderRadius:"16px",boxShadow:"0 24px 48px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.03)"},children:e.jsxs("div",{className:"space-y-4 relative z-10",children:[e.jsx("div",{className:"flex justify-center gap-2",children:c.map((t,s)=>e.jsx("input",{ref:e=>N.current[s]=e,type:"text",inputMode:"numeric",maxLength:1,value:t,onChange:e=>((e,t)=>{var s;if(!/^\d*$/.test(t))return;const r=[...c];r[e]=t.slice(-1),d(r),m(""),t&&e<5&&(null==(s=N.current[e+1])||s.focus()),r.every(e=>""!==e)&&5===e&&F(r.join(""))})(s,e.target.value),onKeyDown:e=>((e,t)=>{var s;"Backspace"===t.key&&!c[e]&&e>0&&(null==(s=N.current[e-1])||s.focus()),"Enter"===t.key&&c.every(e=>""!==e)&&!h&&F(c.join(""))})(s,e),className:"w-11 h-11 text-center text-lg font-semibold focus:outline-none transition-all",style:{color:"#F2F4F7",background:"rgba(255, 255, 255, 0.04)",border:"none",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.08)"},disabled:h},s))}),u&&e.jsx("p",{className:"text-red-500 text-xs text-center mt-3",children:u}),p&&e.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-yellow-900/20 border border-yellow-700/50",children:[e.jsx("p",{className:"text-yellow-400 text-xs text-center mb-2",children:p}),g&&e.jsxs("div",{className:"mt-2 p-2 rounded bg-black/50 border border-yellow-700/30",children:[e.jsx("p",{className:"text-yellow-300 text-xs text-center mb-1",children:"Development Code:"}),e.jsx("p",{className:"text-white text-lg font-mono text-center font-bold tracking-widest",children:g})]})]}),e.jsxs("div",{className:"text-center text-sm leading-snug pt-2",children:[e.jsx("p",{className:"mb-2",style:{color:"rgba(156, 163, 175, 0.7)"},children:"Didn't get anything?"}),e.jsxs("p",{style:{color:"rgba(156, 163, 175, 0.7)"},children:["Check your spam or"," ",e.jsx("button",{onClick:async()=>{x(!0),m("");try{const e="https://hlcpoqxzqgbghsadouef.supabase.co/functions/v1/send-otp",t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsY3BvcXh6cWdiZ2hzYWRvdWVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzI2MTUsImV4cCI6MjA4MTcwODYxNX0.Qhbzj0g5FbpW0wgtGsJBF2AV0HqL-9X2S2nGL64KCYA"},body:JSON.stringify({email:r,isLogin:!0})}),s=await t.json();if(!s.success)throw new Error(s.message||"Failed to resend OTP");s.emailSent?(b(""),f(null)):(s.emailError?b(`Email service error: ${s.emailError}. Please check your email configuration.`):b("Email service is not configured. OTP code will be shown below for testing."),s.devCode)}catch(e){m(e.message||"Failed to resend code")}finally{x(!1)}},disabled:h,className:"font-medium transition-colors disabled:opacity-50",style:{color:"#FFFFFF"},onMouseEnter:e=>!h&&(e.currentTarget.style.color="#C9CBD1"),onMouseLeave:e=>!h&&(e.currentTarget.style.color="#FFFFFF"),children:"send a new one"}),"."]})]})]})})]})})]})}export{r as LoginPage};
