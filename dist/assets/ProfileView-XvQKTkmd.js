import{c as e}from"./createLucideIcon-DApH4y_Q.js";import{j as s}from"./spline-DN92G9fQ.js";import{r as t,e as r}from"./react-vendor-C5CBPnGl.js";import{s as l,S as a,a as o,u as n}from"./index-Dq4tZRuG.js";import{L as i,X as c,b as d,D as x,u,c as m,g as h,d as p,e as g,f,a as y,U as b,A as v,h as j}from"./SettingsView-SnYBjP9Q.js";import{P as w}from"./plus-huPEdIgT.js";import{C as k}from"./chevron-down-BtUUkoj_.js";import{A as N}from"./arrow-left-D6ZoFILw.js";import{C,M as F}from"./map-pin-D8GFr4Pd.js";
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),_=e("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),L=e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),B=e("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),S=e("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]),E=e("Twitch",[["path",{d:"M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7",key:"c0yzno"}]]),M=e("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),T=e("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function W({isHovered:e=!1}){return s.jsx("div",{className:"flex items-center justify-center overflow-visible",children:s.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 overflow-visible",children:[s.jsx("circle",{cx:"24",cy:"20",r:"14",fill:"white",style:{opacity:e?.15:0,transform:e?"scale(1.3)":"scale(1)",transformOrigin:"24px 20px",filter:"blur(8px)",transition:"all 0.4s ease"}}),s.jsx("path",{d:"M24 6C17.4 6 12 11.4 12 18C12 22.4 14.4 26.2 18 28.4V34H30V28.4C33.6 26.2 36 22.4 36 18C36 11.4 30.6 6 24 6Z",stroke:"white",strokeWidth:"2.5",strokeLinejoin:"round",fill:"none",style:{filter:e?"drop-shadow(0 0 6px rgba(255,255,255,0.6))":"none",transition:"filter 0.3s ease"}}),s.jsx("line",{x1:"18",y1:"38",x2:"30",y2:"38",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round"}),s.jsx("line",{x1:"20",y1:"42",x2:"28",y2:"42",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round"}),s.jsx("path",{d:"M24 12L25.5 17H30.5L26.5 20L28 25L24 22L20 25L21.5 20L17.5 17H22.5L24 12Z",stroke:"white",strokeWidth:"2",strokeLinejoin:"round",fill:"none",style:{opacity:e?1:.5,transform:e?"scale(1.1)":"scale(1)",transformOrigin:"24px 18px",transition:"all 0.3s ease"}})]})})}function O({isHovered:e=!1}){return s.jsx("div",{className:"flex items-center justify-center overflow-visible",children:s.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 overflow-visible",style:{transform:e?"rotate(5deg)":"rotate(0deg)",transition:"transform 0.15s ease-in-out"},children:[s.jsx("ellipse",{cx:"24",cy:"28",rx:"10",ry:"12",stroke:"white",strokeWidth:"2.5",fill:"none",style:{transform:e?"scale(1.05)":"scale(1)",transformOrigin:"24px 28px",transition:"transform 0.3s ease"}}),s.jsx("circle",{cx:"24",cy:"14",r:"5",stroke:"white",strokeWidth:"2.5",fill:"none"}),s.jsx("path",{d:"M20 10L16 4",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:e?"rotate(-15deg)":"rotate(0deg)",transformOrigin:"20px 10px",transition:"transform 0.2s ease"}}),s.jsx("path",{d:"M28 10L32 4",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:e?"rotate(15deg)":"rotate(0deg)",transformOrigin:"28px 10px",transition:"transform 0.2s ease"}}),s.jsx("line",{x1:"14",y1:"24",x2:"34",y2:"24",stroke:"white",strokeWidth:"2.5"}),s.jsx("line",{x1:"14",y1:"32",x2:"34",y2:"32",stroke:"white",strokeWidth:"2.5"}),s.jsx("path",{d:"M14 24L8 20",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:e?"rotate(-10deg)":"rotate(0deg)",transformOrigin:"14px 24px",transition:"transform 0.2s ease 0.05s"}}),s.jsx("path",{d:"M14 28L6 28",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:e?"translateX(-2px)":"translateX(0)",transition:"transform 0.2s ease 0.1s"}}),s.jsx("path",{d:"M14 32L8 36",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:e?"rotate(10deg)":"rotate(0deg)",transformOrigin:"14px 32px",transition:"transform 0.2s ease 0.15s"}}),s.jsx("path",{d:"M34 24L40 20",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:e?"rotate(10deg)":"rotate(0deg)",transformOrigin:"34px 24px",transition:"transform 0.2s ease 0.05s"}}),s.jsx("path",{d:"M34 28L42 28",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:e?"translateX(2px)":"translateX(0)",transition:"transform 0.2s ease 0.1s"}}),s.jsx("path",{d:"M34 32L40 36",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:e?"rotate(-10deg)":"rotate(0deg)",transformOrigin:"34px 32px",transition:"transform 0.2s ease 0.15s"}})]})})}function U({isHovered:e=!1}){return s.jsx("div",{className:"flex items-center justify-center overflow-visible",children:s.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 overflow-visible",style:{transform:e?"translateY(-2px)":"translateY(0)",transition:"transform 0.3s ease"},children:[s.jsx("path",{d:"M8 40L28 20",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",style:{transform:e?"rotate(-5deg)":"rotate(0deg)",transformOrigin:"8px 40px",transition:"transform 0.3s ease"}}),s.jsx("path",{d:"M28 20L32 16L36 20L32 24L28 20Z",stroke:"white",strokeWidth:"2.5",strokeLinejoin:"round",fill:"none",style:{transform:e?"rotate(-5deg)":"rotate(0deg)",transformOrigin:"8px 40px",transition:"transform 0.3s ease"}}),s.jsx("circle",{cx:"38",cy:"10",r:"2",fill:"white",style:{opacity:e?1:.5,transform:e?"scale(1.3)":"scale(1)",transformOrigin:"38px 10px",transition:"all 0.3s ease"}}),s.jsx("circle",{cx:"42",cy:"18",r:"1.5",fill:"white",style:{opacity:e?1:.3,transform:e?"scale(1.5)":"scale(1)",transformOrigin:"42px 18px",transition:"all 0.3s ease 0.1s"}}),s.jsx("circle",{cx:"34",cy:"6",r:"1.5",fill:"white",style:{opacity:e?1:.3,transform:e?"scale(1.5)":"scale(1)",transformOrigin:"34px 6px",transition:"all 0.3s ease 0.15s"}}),s.jsx("path",{d:"M18 8L19 11L22 12L19 13L18 16L17 13L14 12L17 11L18 8Z",fill:"white",style:{opacity:e?1:0,transform:e?"scale(1.2) rotate(15deg)":"scale(0.8) rotate(0deg)",transformOrigin:"18px 12px",transition:"all 0.3s ease 0.05s"}})]})})}function I({isHovered:e=!1}){return s.jsx("div",{className:"flex items-center justify-center overflow-visible",children:s.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 overflow-visible",style:{transform:e?"rotate(-8deg) translateY(-2px)":"rotate(0deg) translateY(0)",transition:"transform 0.3s ease"},children:[s.jsx("path",{d:"M12 36L8 40L12 44L36 20L32 16L12 36Z",stroke:"white",strokeWidth:"2.5",strokeLinejoin:"round",fill:"none"}),s.jsx("path",{d:"M36 20L40 16L44 12L40 8L36 12L32 16L36 20Z",stroke:"white",strokeWidth:"2.5",strokeLinejoin:"round",fill:"none"}),s.jsx("line",{x1:"14",y1:"34",x2:"18",y2:"38",stroke:"white",strokeWidth:"2.5"}),s.jsx("line",{x1:"6",y1:"28",x2:"14",y2:"28",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",style:{opacity:e?1:0,transform:e?"translateX(0)":"translateX(-4px)",transition:"all 0.3s ease"}}),s.jsx("line",{x1:"6",y1:"22",x2:"18",y2:"22",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",style:{opacity:e?1:0,transform:e?"translateX(0)":"translateX(-4px)",transition:"all 0.3s ease 0.1s"}}),s.jsx("line",{x1:"6",y1:"16",x2:"12",y2:"16",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",style:{opacity:e?1:0,transform:e?"translateX(0)":"translateX(-4px)",transition:"all 0.3s ease 0.15s"}})]})})}function P(){return s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"home-icon-wrapper",style:{width:"48px",height:"48px",overflow:"visible"},children:s.jsxs("div",{className:"relative",style:{width:"48px",height:"48px",overflow:"visible"},children:[s.jsx("div",{className:"absolute",style:{left:0,top:0,width:"48px",height:"48px",overflow:"visible"},children:s.jsx(i,{className:"animate-link-left",size:48,strokeWidth:2.5,style:{clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)",color:"#F8FAFC"}})}),s.jsx("div",{className:"absolute",style:{left:0,top:0,width:"48px",height:"48px",overflow:"visible"},children:s.jsx(i,{className:"animate-link-right",size:48,strokeWidth:2.5,style:{clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)",color:"#F8FAFC"}})})]})})})}const z={YouTube:e("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),Instagram:B,TikTok:S,Twitter:M,Twitch:E,Other:i},R=["YouTube","Instagram","TikTok","Twitter","Twitch","Other"];function q({value:e,options:r,onChange:l,platformIcons:a}){const[o,n]=t.useState(!1),c=t.useRef(null);t.useEffect(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&n(!1)};return o&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);const d=a[e]||i;return s.jsxs("div",{className:"relative",ref:c,children:[s.jsxs("button",{type:"button",onClick:()=>n(!o),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/20 flex items-center justify-between group border",style:{backgroundColor:"transparent",borderColor:"var(--border-subtle)",color:"var(--text-primary)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--bg-elevated)",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.transform="translateY(0)"},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(d,{className:"w-4 h-4 transition-all duration-200 group-hover:scale-110",style:{color:"#F8FAFC"}}),s.jsx("span",{className:"transition-all duration-200",children:e})]}),s.jsx(k,{className:"w-4 h-4 transition-all duration-200 group-hover:scale-110 "+(o?"rotate-180":""),style:{color:"#94A3B8"}})]}),o&&s.jsx("div",{className:"absolute z-50 w-full mt-1 rounded-lg shadow-xl overflow-hidden animate-fade-in-down",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-default)"},children:s.jsx("div",{className:"max-h-60 overflow-y-auto",children:r.map(t=>{const r=a[t]||i,o=t===e;return s.jsxs("button",{type:"button",onClick:()=>{l(t),n(!1)},className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 text-left text-sm transition-all duration-200 flex items-center gap-2 group/option relative",style:{backgroundColor:o?"var(--bg-elevated)":"transparent",color:"var(--text-primary)"},onMouseEnter:e=>{o||(e.currentTarget.style.backgroundColor="var(--bg-elevated)"),e.currentTarget.style.transform="translateX(4px)"},onMouseLeave:e=>{o||(e.currentTarget.style.backgroundColor="transparent"),e.currentTarget.style.transform="translateX(0)"},children:[s.jsxs("div",{className:"relative group/icon",children:[s.jsx(r,{className:"w-4 h-4 transition-all duration-300 group-hover/option:scale-125 group-hover/option:rotate-12 group-hover/icon:scale-150 group-hover/icon:rotate-180",style:{color:"#F8FAFC"}}),s.jsx("div",{className:"absolute inset-0 w-4 h-4 rounded-full opacity-0 group-hover/icon:opacity-20 group-hover/icon:scale-150 transition-all duration-300",style:{backgroundColor:"#F8FAFC"}})]}),s.jsx("span",{className:"transition-all duration-200",children:t}),o&&s.jsx("span",{className:"ml-auto text-xs transition-all duration-200",style:{color:"#94A3B8"},children:"âœ“"})]},t)})})})]})}function Y({appliedTheme:e,userType:r}){const[a,o]=t.useState([]),[n,d]=t.useState(!1),[x,u]=t.useState({platform:"YouTube",url:"",display_name:"",channel_description:""}),[m,h]=t.useState(!0);t.useEffect(()=>{p()},[]);const p=async()=>{try{const{data:{user:e}}=await l.auth.getUser();if(!e)return;const{data:s,error:t}=await l.from("social_links").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(t)throw t;o(s||[])}catch(e){}finally{h(!1)}};return m?s.jsx("div",{className:"rounded-xl sm:rounded-2xl p-6 sm:p-8 border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:s.jsx("div",{className:"text-center",style:{color:"#94A3B8"},children:"Loading..."})}):s.jsxs("div",{className:"rounded-xl sm:rounded-2xl p-5 sm:p-7 border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-5 sm:mb-6",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-bold",style:{color:"#F8FAFC"},children:"My Social Links"}),!n&&"artist"!==r&&s.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-3 sm:px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-110 border",style:{backgroundColor:"transparent",borderColor:"var(--border-subtle)",color:"var(--text-primary)"},children:[s.jsx(w,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Add Link"})]})]}),n&&s.jsx("div",{className:"mb-5 p-4 sm:p-5 rounded-xl",style:{backgroundColor:"transparent"},children:s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",style:{color:"#94A3B8"},children:"Platform"}),s.jsx(q,{value:x.platform,options:R,onChange:e=>u({...x,platform:e}),platformIcons:z})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",style:{color:"#94A3B8"},children:"URL"}),s.jsx("input",{type:"text",value:x.url,onChange:e=>u({...x,url:e.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/20 border",style:{backgroundColor:"transparent",borderColor:"var(--border-subtle)",color:"var(--text-primary)"}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",style:{color:"#94A3B8"},children:"Display Name (optional)"}),s.jsx("input",{type:"text",value:x.display_name,onChange:e=>u({...x,display_name:e.target.value}),placeholder:"My Channel",className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/20 border",style:{backgroundColor:"transparent",borderColor:"var(--border-subtle)",color:"var(--text-primary)"}})]}),"creator"===r&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",style:{color:"#94A3B8"},children:"Channel Description (optional)"}),s.jsx("textarea",{value:x.channel_description,onChange:e=>u({...x,channel_description:e.target.value}),placeholder:"Describe your channel content, style, or what makes it unique...",rows:3,className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/20 border resize-none",style:{backgroundColor:"transparent",borderColor:"var(--border-subtle)",color:"var(--text-primary)"}})]}),s.jsxs("div",{className:"flex gap-2 sm:gap-3 pt-2",children:[s.jsx("button",{onClick:async()=>{if(x.url.trim())try{const{data:{user:e}}=await l.auth.getUser();if(!e)return;const s=(e=>{let s=e.trim();return s=s.replace(/\/+$/,""),s.match(/^https?:\/\//i)||(s="https://"+s),s})(x.url),{data:t,error:a}=await l.from("social_links").select("id").eq("url",s).limit(1);if(t&&t.length>0)return void alert("This link has already been registered by another user. Please use a different link.");const o={user_id:e.id,platform:x.platform,url:s,display_name:x.display_name.trim()||x.platform};"creator"===r&&(o.channel_description=x.channel_description.trim());const{error:n}=await l.from("social_links").insert(o);if(n){if("23505"!==n.code)throw n;return void alert("This link has already been registered by another user. Please use a different link.")}await p(),u({platform:"YouTube",url:"",display_name:"",channel_description:""}),d(!1)}catch(e){e&&"object"==typeof e&&"code"in e&&"23505"!==e.code&&alert("Error adding link. Please try again.")}},className:"flex-1 px-4 py-2 sm:py-2.5 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-110",style:{backgroundColor:"var(--text-primary)",color:"var(--bg-primary)"},children:"Save"}),s.jsx("button",{onClick:()=>{d(!1),u({platform:"YouTube",url:"",display_name:"",channel_description:""})},className:"px-4 py-2 sm:py-2.5 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-90 border",style:{backgroundColor:"transparent",borderColor:"var(--border-subtle)",color:"var(--text-primary)"},children:"Cancel"})]})]})}),s.jsx("div",{className:"space-y-3",children:0===a.length?s.jsxs("div",{className:"text-center py-8 sm:py-12",children:[s.jsx(P,{}),s.jsx("p",{className:"text-sm sm:text-base font-medium mb-1",style:{color:"#F8FAFC"},children:"No links added yet"}),"artist"===r?s.jsx("p",{className:"text-xs sm:text-sm",style:{color:"#64748B"},children:"Accounts from distribution will up here"}):"creator"===r||"business"===r?null:s.jsx("p",{className:"text-xs sm:text-sm",style:{color:"#64748B"},children:"Distribute to get started"})]}):a.map(e=>{const t=z[e.platform]||i;return s.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 rounded-lg transition-all duration-200 hover:brightness-105",style:{backgroundColor:"transparent"},children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:"transparent"},children:s.jsx(t,{className:"w-4 h-4 sm:w-5 sm:h-5",style:{color:"#F8FAFC"}})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm sm:text-base font-medium truncate",style:{color:"#F8FAFC"},children:e.display_name||e.platform}),s.jsx("div",{className:"text-xs sm:text-sm truncate",style:{color:"#64748B"},children:e.url.replace(/^https?:\/\//i,"")})]})]}),s.jsx("button",{onClick:()=>(async e=>{try{const{error:s}=await l.from("social_links").delete().eq("id",e);if(s)throw s;await p()}catch(s){}})(e.id),className:"ml-2 p-2 rounded-lg transition-all duration-200 hover:brightness-110 flex-shrink-0",style:{backgroundColor:"transparent",color:"#64748B"},children:s.jsx(c,{className:"w-4 h-4"})})]},e.id)})})]})}function V(){var e;const[r,n]=t.useState(null),[i,c]=t.useState(""),[x,u]=t.useState(!1),[m,h]=t.useState(!0),[p,g]=t.useState(!1),[f,y]=t.useState(null),[b,v]=t.useState(!1);t.useEffect(()=>{j()},[]);const j=async()=>{try{const{data:{user:s}}=await l.auth.getUser(),t=localStorage.getItem("verifiedUserId"),r=(null==s?void 0:s.id)||t;if(!r)return void h(!1);let i=null;try{const e=`${a}/functions/v1/get-profile?userId=${r}`,s=await fetch(e,{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json();e.success&&e.profile&&(i=e.profile.username)}}catch(e){}if(!i){const{data:e}=await l.from("users").select("username").eq("id",r).maybeSingle();if(i=null==e?void 0:e.username,!i){const{data:e}=await l.from("profiles").select("name").eq("id",r).maybeSingle();(null==e?void 0:e.name)&&(i=e.name.replace(/\s+/g,""))}}if(i){const{data:e}=await l.from("referral_codes").select("total_uses, total_earnings").eq("user_id",r).maybeSingle();n({code:i.toUpperCase(),total_uses:(null==e?void 0:e.total_uses)||0,total_earnings:(null==e?void 0:e.total_earnings)||0})}const{data:c}=await l.from("referral_applications").select("id").eq("user_id",r).maybeSingle();v(!!c)}catch(s){}finally{h(!1)}};return m?s.jsx("div",{className:"rounded-xl sm:rounded-2xl p-6 sm:p-8 border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:s.jsx("div",{className:"text-center",style:{color:"#94A3B8"},children:"Loading..."})}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-5",children:[s.jsxs("div",{className:"rounded-xl sm:rounded-2xl p-5 sm:p-7 border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[s.jsx(_,{className:"w-5 h-5",style:{color:"#64748B"}}),s.jsx("h3",{className:"text-lg sm:text-xl font-bold",style:{color:"#F8FAFC"},children:"Your Code"})]}),s.jsx("div",{className:"rounded-lg p-4 mb-5",style:{backgroundColor:"transparent"},children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"#64748B"},children:"YOUR REFERRAL CODE"}),s.jsx("div",{className:"h-[60px] flex items-center justify-center mb-3",children:s.jsx("div",{className:"text-2xl sm:text-3xl font-bold tracking-wider",style:{color:"#F8FAFC"},children:(null==r?void 0:r.code)||"N/A"})}),s.jsx("button",{onClick:async()=>{if(r)try{await navigator.clipboard.writeText(r.code),u(!0),setTimeout(()=>u(!1),2e3)}catch(e){}},disabled:!r,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--text-primary)",color:"var(--bg-primary)"},children:x?s.jsxs(s.Fragment,{children:[s.jsx(A,{className:"w-4 h-4"}),s.jsx("span",{children:"Copied!"})]}):s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"w-4 h-4"}),s.jsx("span",{children:"Copy Code"})]})})]})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold mb-3",style:{color:"#F8FAFC"},children:"Your Stats"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between py-3 px-3 rounded-lg",style:{backgroundColor:"transparent"},children:[s.jsx("span",{className:"text-sm",style:{color:"#94A3B8"},children:"Total uses"}),s.jsx("span",{className:"text-sm font-bold",style:{color:"#F8FAFC"},children:(null==r?void 0:r.total_uses)||0})]}),s.jsxs("div",{className:"flex items-center justify-between py-3 px-3 rounded-lg",style:{backgroundColor:"transparent"},children:[s.jsx("span",{className:"text-sm",style:{color:"#94A3B8"},children:"Total earned"}),s.jsxs("span",{className:"text-sm font-bold",style:{color:"#F8FAFC"},children:["$",(null==(e=null==r?void 0:r.total_earnings)?void 0:e.toFixed(2))||"0.00"]})]})]})]})]}),s.jsxs("div",{className:"rounded-xl sm:rounded-2xl p-5 sm:p-7 border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-subtle)"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[s.jsx(_,{className:"w-5 h-5",style:{color:"#64748B"}}),s.jsx("h3",{className:"text-lg sm:text-xl font-bold",style:{color:"#F8FAFC"},children:"Enter a Code"})]}),b?s.jsxs("div",{className:"rounded-lg p-6 text-center",style:{backgroundColor:"transparent"},children:[s.jsx(A,{className:"w-12 h-12 mx-auto mb-3",style:{color:"#10B981"}}),s.jsx("p",{className:"text-base font-medium mb-1",style:{color:"#F8FAFC"},children:"Code Applied!"}),s.jsx("p",{className:"text-sm",style:{color:"#64748B"},children:"You've already applied a referral code"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-lg p-4 mb-5",style:{backgroundColor:"transparent"},children:s.jsxs("div",{className:"text-center",children:[s.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"#64748B"},children:"REFERRAL CODE"}),s.jsx("div",{className:"h-[60px] flex items-center justify-center mb-3",children:s.jsx("input",{type:"text",value:i,onChange:e=>c(e.target.value.toUpperCase()),placeholder:"Enter code...",maxLength:8,className:"w-full px-4 py-2.5 rounded-lg text-2xl sm:text-3xl font-bold tracking-wider text-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/20",style:{backgroundColor:"transparent",color:"#F8FAFC"}})}),s.jsx("button",{onClick:async()=>{if(i.trim()&&!p){g(!0),y(null);try{const{data:e,error:s}=await l.rpc("apply_referral_code",{p_code:i.trim().toUpperCase()});if(s)throw s;e.success?(y({type:"success",text:e.message}),c(""),v(!0)):y({type:"error",text:e.error})}catch(e){y({type:"error",text:e.message||"Failed to apply code"})}finally{g(!1)}}},disabled:!i.trim()||p,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--text-primary)",color:"var(--bg-primary)"},children:p?"Applying...":"Apply Code"})]})}),f&&s.jsx("div",{className:"rounded-lg p-3 text-sm text-center mb-5",style:{backgroundColor:"success"===f.type?"#10B98120":"#EF444420",color:"success"===f.type?"#10B981":"#EF4444"},children:f.text}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold mb-3",style:{color:"#F8FAFC"},children:"Benefits"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between py-3 px-3 rounded-lg",style:{backgroundColor:"transparent"},children:[s.jsx("span",{className:"text-sm",style:{color:"#94A3B8"},children:"10% first campaign bonus"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full flex-shrink-0",style:{backgroundColor:"#10B981"}})]}),s.jsxs("div",{className:"flex items-center justify-between py-3 px-3 rounded-lg",style:{backgroundColor:"transparent"},children:[s.jsx("span",{className:"text-sm",style:{color:"#94A3B8"},children:"Support the community"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full flex-shrink-0",style:{backgroundColor:"#10B981"}})]})]})]})]})]})]})}function $({showTransition:e=!1}){const[r,l]=t.useState(!1);return t.useEffect(()=>{if(e){const e=setTimeout(()=>{l(!0)},500);return()=>clearTimeout(e)}},[e]),e?s.jsxs("div",{className:"fixed inset-0 pointer-events-none",style:{perspective:"1500px",zIndex:9999},children:[s.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-full bg-zinc-900 border-r border-white/10 transition-transform duration-[1.5s] "+(r?"shadow-none":"shadow-[inset_-20px_0_40px_rgba(0,0,0,0.3)]"),style:{transformOrigin:"left center",transform:r?"rotateY(-105deg)":"rotateY(0deg)",transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)",backfaceVisibility:"hidden"},children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-end pr-16",children:s.jsx("div",{className:"transition-opacity duration-300 "+(r?"opacity-0":"opacity-100"),children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"w-3 h-32 bg-zinc-600 rounded-full shadow-lg"}),s.jsx("div",{className:"w-12 h-3 bg-zinc-700 rounded-sm"})]})})})}),s.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-zinc-900 border-l border-white/10 transition-transform duration-[1.5s] "+(r?"shadow-none":"shadow-[inset_20px_0_40px_rgba(0,0,0,0.3)]"),style:{transformOrigin:"right center",transform:r?"rotateY(105deg)":"rotateY(0deg)",transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)",backfaceVisibility:"hidden"},children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-start pl-16",children:s.jsx("div",{className:"transition-opacity duration-300 "+(r?"opacity-0":"opacity-100"),children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"w-3 h-32 bg-zinc-600 rounded-full shadow-lg"}),s.jsx("div",{className:"w-12 h-3 bg-zinc-700 rounded-sm"})]})})})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none transition-opacity duration-300 "+(r?"opacity-0":"opacity-100"),style:{zIndex:10},children:s.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-white/10"})})]}):null}function H({onClick:e,className:r}){const[l,a]=t.useState(!1);return s.jsx("button",{onClick:e,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),className:`p-2.5 rounded-lg transition-colors ${r||""}`,"aria-label":"Edit",children:s.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 overflow-visible",children:[s.jsx("rect",{x:"8",y:"10",width:"28",height:"28",rx:"3",stroke:"white",strokeWidth:"3.5",fill:"none"}),s.jsx("path",{d:"M36 10 L36 16 L30 16",stroke:"white",strokeWidth:"3.5",fill:"none"}),s.jsxs("g",{style:{transform:l?"translate(-2px, -2px) rotate(-5deg)":"translate(0, 0) rotate(0deg)",transformOrigin:"32px 14px",transition:"transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:[s.jsx("path",{d:"M40 8 L28 20 L22 14 L34 2 C34.8 1.2 36.2 1.2 37 2 L40 5 C40.8 5.8 40.8 7.2 40 8 Z",stroke:"white",strokeWidth:"3.5",fill:"rgba(0,0,0,0.9)",strokeLinejoin:"round"}),s.jsx("path",{d:"M28 20 L22 14 L20 16 L26 22 Z",fill:"white",opacity:"0.7"})]}),s.jsx("line",{x1:"12",y1:"20",x2:"28",y2:"20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",style:{opacity:l?.5:0,strokeDasharray:"16",strokeDashoffset:l?"0":"16",transition:"all 0.4s ease 0.2s"}}),s.jsx("circle",{cx:"36",cy:"10",r:"2",fill:"white",style:{opacity:l?.8:0,transform:l?"scale(1)":"scale(0)",transformOrigin:"36px 10px",transition:"all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s"}}),s.jsx("rect",{x:"8",y:"10",width:"28",height:"28",rx:"3",fill:"white",style:{opacity:l?.1:0,transition:"opacity 0.3s ease"}})]})})}function D(){return s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 animate-pulse",children:[s.jsx("div",{className:"w-12 h-12 rounded-full flex-shrink-0",style:{backgroundColor:"rgba(75, 85, 99, 0.2)"}}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"h-4 rounded mb-2",style:{backgroundColor:"rgba(75, 85, 99, 0.2)",width:"60%"}}),s.jsx("div",{className:"h-3 rounded",style:{backgroundColor:"rgba(75, 85, 99, 0.15)",width:"85%"}})]}),s.jsx("div",{className:"h-3 rounded flex-shrink-0",style:{backgroundColor:"rgba(75, 85, 99, 0.15)",width:"40px"}})]})}function X({count:e=3}){return s.jsx("div",{className:"space-y-1",children:Array.from({length:e}).map((e,t)=>s.jsx(D,{},t))})}function Z(){return s.jsxs("div",{className:"flex flex-col h-full animate-pulse",style:{backgroundColor:"#111111"},children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 border-b",style:{borderColor:"rgba(75, 85, 99, 0.2)"},children:[s.jsx("div",{className:"w-10 h-10 rounded-full flex-shrink-0",style:{backgroundColor:"rgba(75, 85, 99, 0.2)"}}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-4 rounded mb-1.5",style:{backgroundColor:"rgba(75, 85, 99, 0.2)",width:"120px"}}),s.jsx("div",{className:"h-3 rounded",style:{backgroundColor:"rgba(75, 85, 99, 0.15)",width:"80px"}})]})]}),s.jsx("div",{className:"flex-1 py-2 lg:py-4 flex flex-col justify-end",children:s.jsxs("div",{className:"space-y-0.5 lg:space-y-1 px-2 lg:px-4",children:[s.jsx("div",{className:"flex justify-start px-2 lg:px-4 py-0.5",children:s.jsx("div",{className:"flex items-center gap-1.5 lg:gap-2 max-w-[85%] lg:max-w-[70%]",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"rounded-2xl px-4 py-3",style:{backgroundColor:"rgba(75, 85, 99, 0.15)",minHeight:"2.5rem",width:"180px"}}),s.jsx("div",{className:"h-3 rounded px-1",style:{backgroundColor:"rgba(75, 85, 99, 0.1)",width:"40px"}})]})})}),s.jsx("div",{className:"flex justify-end px-2 lg:px-4 py-0.5",children:s.jsx("div",{className:"flex items-center gap-1.5 lg:gap-2 max-w-[85%] lg:max-w-[70%] flex-row-reverse",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"rounded-2xl px-4 py-3",style:{backgroundColor:"rgba(248, 250, 252, 0.1)",minHeight:"2.5rem",width:"140px"}}),s.jsx("div",{className:"h-3 rounded px-1 ml-auto",style:{backgroundColor:"rgba(75, 85, 99, 0.1)",width:"40px"}})]})})}),s.jsx("div",{className:"flex justify-start px-2 lg:px-4 py-0.5",children:s.jsx("div",{className:"flex items-center gap-1.5 lg:gap-2 max-w-[85%] lg:max-w-[70%]",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"rounded-2xl px-4 py-3",style:{backgroundColor:"rgba(75, 85, 99, 0.15)",minHeight:"3.5rem",width:"220px"}}),s.jsx("div",{className:"h-3 rounded px-1",style:{backgroundColor:"rgba(75, 85, 99, 0.1)",width:"40px"}})]})})})]})}),s.jsx("div",{className:"p-4 border-t",style:{borderColor:"rgba(75, 85, 99, 0.2)"},children:s.jsx("div",{className:"h-12 rounded-xl",style:{backgroundColor:"rgba(75, 85, 99, 0.15)"}})})]})}function G({isOpen:e,onClose:r,onSelectUser:a,currentUserId:o,userType:n}){const[i,d]=t.useState(""),[u,m]=t.useState([]),[h,p]=t.useState([]),[g,f]=t.useState(!1),y=t.useRef(null);t.useEffect(()=>{e&&y.current&&setTimeout(()=>{var e;return null==(e=y.current)?void 0:e.focus()},100)},[e]),t.useEffect(()=>{const s=e=>{"Escape"===e.key&&r()};return e&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow=""}},[e,r]),t.useEffect(()=>{const e=setTimeout(async()=>{const e=i.trim().replace(/^@/,"").toLowerCase();if(!e)return m([]),void f(!1);f(!0);try{let s=l.from("unified_users").select("id, display_name, username, avatar_url").neq("id",o).eq("username",e);s="artist"===n?s.eq("is_admin",!0):s.not("user_type","eq","artist");const{data:t,error:r}=await s.limit(1);!r&&t&&t.length>0?m(t.map(e=>({id:e.id,name:e.display_name||"Unknown",username:e.username||"",avatar_url:e.avatar_url}))):m([]),f(!1)}catch(s){m([]),f(!1)}},300);return()=>clearTimeout(e)},[i,o,n]),t.useEffect(()=>{p([])},[i]);return e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:()=>{r(),d("")},children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsxs("div",{className:"relative w-full max-w-md mx-4 rounded-2xl overflow-hidden flex flex-col",style:{backgroundColor:"var(--bg-primary)",maxHeight:"80vh",border:"1px solid var(--border-default)"},onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-4",style:{borderBottom:"1px solid var(--border-default)"},children:[s.jsx("div",{className:"w-8"}),s.jsx("h2",{className:"text-base font-semibold",style:{color:"var(--text-primary)"},children:"New message"}),s.jsx("button",{onClick:()=>{r(),d("")},className:"p-1 rounded-lg hover:bg-white/5 transition-colors","aria-label":"Close",children:s.jsx(c,{className:"w-5 h-5",style:{color:"var(--text-secondary)"}})})]}),s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",style:{borderBottom:"1px solid var(--border-default)"},children:[s.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"To:"}),s.jsx("div",{className:"flex-1 relative",children:s.jsx("input",{ref:y,type:"text",value:i,onChange:e=>{d(e.target.value),p([])},placeholder:"Search...",className:"w-full bg-transparent text-sm focus:outline-none",style:{color:"var(--text-primary)"}})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",style:{maxHeight:"400px"},children:g?s.jsx("div",{className:"p-4 text-center",children:s.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Searching..."})}):i.trim()?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"px-4 py-2 text-xs font-medium",style:{color:"var(--text-muted)"},children:"Results"}),0===u.length?s.jsx("div",{className:"p-4 text-center",children:s.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"No users found"})}):u.map(e=>{const t=h.some(s=>s.id===e.id);return s.jsxs("button",{onClick:()=>(e=>{p(s=>s.some(s=>s.id===e.id)?s.filter(s=>s.id!==e.id):[...s,e])})(e),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 transition-colors",children:[s.jsx("img",{src:e.avatar_url||x,alt:e.name,className:"w-11 h-11 rounded-full object-cover",style:{backgroundColor:"var(--bg-elevated)"}}),s.jsxs("div",{className:"flex-1 text-left min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",style:{color:"var(--text-primary)"},children:e.name}),s.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:e.username})]}),s.jsx("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-colors",style:{borderColor:t?"var(--text-primary)":"var(--border-default)",backgroundColor:t?"var(--text-primary)":"transparent"},children:t&&s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"white",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]},e.id)})]}):s.jsx("div",{className:"p-8 text-center",children:s.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Enter a username to start a conversation"})})}),s.jsx("div",{className:"p-4",style:{borderTop:"1px solid var(--border-default)"},children:s.jsx("button",{onClick:()=>{if(h.length>0){const e=h[0];a({id:e.id,username:e.username,display_name:e.name,avatar_url:e.avatar_url}),r(),d("")}},disabled:0===h.length,className:"w-full py-3 rounded-xl text-sm font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:h.length>0?"var(--text-primary)":"var(--bg-elevated)",color:h.length>0?"var(--bg-primary)":"var(--text-primary)"},children:"Chat"})})]})]}):null}function J({currentUserId:e,backgroundTheme:r="dark",userType:a}){const{profile:o,isLoading:i}=n(),{conversations:c,loading:d,updateConversationUnreadCount:x,selectConversation:v,pendingConversation:j,startConversationWith:w,sendMessageToConversation:k,clearPendingConversation:N}=u(e),[C,F]=t.useState(""),[A,_]=t.useState(""),[L,B]=t.useState(null),[S,E]=t.useState(!1),[M,T]=t.useState("all"),[W,O]=t.useState(!0),[U,I]=t.useState(!1);m(e);const P=t.useMemo(()=>(null==o?void 0:o.username)?o.username:(null==o?void 0:o.first_name)?o.first_name:(null==o?void 0:o.email)?o.email.split("@")[0]:i?"":"Messages",[o,i]);t.useEffect(()=>{const e=e=>{"Escape"===e.key&&j&&N()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[j,N]),t.useEffect(()=>{(async()=>{if(!d&&e){const s=window.innerWidth<1024;if(c.length>0){const t=localStorage.getItem(`lastConversation_${e}`);if(t){const e=c.find(e=>e.id===t);if(e)return B(e),v(t),void O(!1)}s||(B(c[0]),v(c[0].id))}else{await h(e)}O(!1)}})()},[e,d,c.length,v,h]);const z=t.useMemo(()=>p(e=>_(e),300),[]);t.useEffect(()=>{z(C)},[C,z]),t.useEffect(()=>{(async()=>{const e=window.innerWidth<1024;if(!W&&c.length>0&&!L&&!e){const e=c[0];if(B(e),e.unread_count_customer>0)try{await l.from("conversations").update({unread_count_customer:0}).eq("id",e.id)}catch(s){}}else if(!W&&c.length>0&&L){const s=c.find(e=>e.id===L.id);s?B(s):e||B(c[0])}})()},[c,W,L]);const R=t.useMemo(()=>{let e=[...c];L&&!e.find(e=>e.id===L.id)&&(e=[L,...e]);return e.filter(e=>{var s;if(!e.admin)return!1;if(A.trim()){if(!((null==(s=e.admin.name)?void 0:s.toLowerCase())||"").includes(A.toLowerCase()))return!1}return"unread"===M?e.unread_count_customer>0:"pinned"!==M||!0===e.is_pinned})},[c,L,A,M]),q=t.useCallback(s=>{var t;if(s===e){return(null==o?void 0:o.first_name)?`${o.first_name}${o.last_name?` ${o.last_name}`:""}`:(null==o?void 0:o.username)||"You"}return(null==(t=null==L?void 0:L.admin)?void 0:t.name)||"Support"},[o,L,e]),Y=async s=>{N(),v(s.id,!0),B(s);window.innerWidth<1024&&E(!0);const t=s.customer_id===e;if((t?s.unread_count_customer:s.unread_count_admin)>0){x(s.id,0);try{await l.from("conversations").update(t?{unread_count_customer:0}:{unread_count_admin:0}).eq("id",s.id)}catch(r){}}},V=()=>{E(!1)},$=async(e,s)=>{try{const{error:t}=await l.from("conversations").update({is_pinned:s}).eq("id",e);if(t)throw t}catch(t){}},D="undefined"!=typeof window&&window.innerWidth<1024,J=d&&0===c.length,K=W&&!L;return D&&S&&L?s.jsx("div",{className:"flex flex-col w-full",style:{backgroundColor:"var(--bg-primary)",height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},children:s.jsx("div",{className:"flex-1 min-h-0",children:L.admin&&s.jsx(g,{conversation:L,otherUser:L.admin,currentUserId:e,getSenderName:q,backgroundTheme:r,onBack:V,showBackButton:!0},L.id)})}):s.jsxs("div",{className:"flex flex-col lg:flex-row rounded-2xl w-full shadow-2xl",style:{backgroundColor:"var(--bg-primary)",height:"100%",maxHeight:"100%",border:"1px solid var(--border-default)",overflow:"hidden",display:"flex"},children:[D&&!1,D&&s.jsxs("div",{className:"lg:hidden flex flex-col flex-1 min-h-0 overflow-hidden",style:{overflow:"hidden"},children:[s.jsxs("div",{className:"p-3 pb-3",style:{borderBottom:"1px solid rgba(75, 85, 99, 0.2)",backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000"},children:[s.jsxs("div",{className:"relative mb-3 lg:mb-4",children:[s.jsx(f,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 lg:w-4 lg:h-4",style:{color:"light"===r?"#64748B":"#94A3B8"}}),s.jsx("input",{type:"text",value:C,onChange:e=>F(e.target.value),placeholder:"Search conversations...","aria-label":"Search conversations",className:"w-full pl-9 lg:pl-10 pr-3 lg:pr-4 py-2 lg:py-3 rounded-lg lg:rounded-xl text-xs lg:text-sm focus:outline-none focus:ring-2 focus:ring-opacity-50 transition-all",style:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",border:"1px solid rgba(75, 85, 99, 0.25)",color:"light"===r?"#FFFFFF":"#F8FAFC"}})]}),"artist"!==a&&s.jsxs("div",{className:"flex gap-1.5 lg:gap-2",children:[s.jsx("button",{onClick:()=>T("all"),className:"flex-1 px-3 lg:px-4 py-1.5 lg:py-2.5 rounded-lg text-xs lg:text-sm font-medium transition-all duration-200 "+("all"===M?"":"hover:brightness-110 active:scale-[0.98]"),style:"all"===M?{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",border:"1.5px solid rgba(148, 163, 184, 0.3)",color:"light"===r?"#FFFFFF":"#F8FAFC",boxShadow:"0 1px 2px rgba(148, 163, 184, 0.2)"}:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",color:"light"===r?"#64748B":"#94A3B8",border:"1px solid transparent"},children:"Primary"}),s.jsx("button",{onClick:()=>T("unread"),className:"flex-1 px-3 lg:px-4 py-1.5 lg:py-2.5 rounded-lg text-xs lg:text-sm font-medium transition-all duration-200 "+("unread"===M?"":"hover:brightness-110 active:scale-[0.98]"),style:"unread"===M?{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",border:"1.5px solid rgba(148, 163, 184, 0.3)",color:"light"===r?"#FFFFFF":"#F8FAFC",boxShadow:"0 1px 2px rgba(148, 163, 184, 0.2)"}:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",color:"light"===r?"#64748B":"#94A3B8",border:"1px solid transparent"},children:"General"}),s.jsx("button",{onClick:()=>T("pinned"),className:"flex-1 px-3 lg:px-4 py-1.5 lg:py-2.5 rounded-lg text-xs lg:text-sm font-medium transition-all duration-200 "+("pinned"===M?"":"hover:brightness-110 active:scale-[0.98]"),style:"pinned"===M?{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",border:"1.5px solid rgba(148, 163, 184, 0.3)",color:"light"===r?"#FFFFFF":"#F8FAFC",boxShadow:"0 1px 2px rgba(148, 163, 184, 0.2)"}:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",color:"light"===r?"#64748B":"#94A3B8",border:"1px solid transparent"},children:"Requests"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",style:{scrollbarWidth:"thin",scrollbarColor:"rgba(75, 85, 99, 0.3) transparent",WebkitOverflowScrolling:"touch"},children:J?s.jsx(X,{count:4}):0===R.length?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000"},children:s.jsx(y,{className:"w-8 h-8",style:{color:"light"===r?"#64748B":"#94A3B8"}})}),"artist"===a?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm font-medium",style:{color:"#94A3B8"},children:"No messages yet"}),s.jsx("p",{className:"text-xs mt-1",style:{color:"light"===r?"#64748B":"#94A3B8"},children:"Our support team will reach out to you here when needed."})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm font-medium",style:{color:"#94A3B8"},children:"No conversations found"}),s.jsx("p",{className:"text-xs mt-1",style:{color:"light"===r?"#64748B":"#94A3B8"},children:"Start a conversation to get help"})]})]}):R.map(t=>t.admin&&s.jsx(b,{user:t.admin,conversation:t,isActive:(null==L?void 0:L.id)===t.id,onClick:()=>Y(t),onPin:$,unreadCount:t.customer_id===e?t.unread_count_customer:t.unread_count_admin,currentUserId:e},t.id))})]}),s.jsxs("div",{className:"hidden lg:flex flex-col w-80 xl:w-96 min-h-0 flex-shrink-0 overflow-hidden border-r",style:{borderRight:"1px solid rgba(75, 85, 99, 0.2)",backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",height:"100%"},children:[s.jsxs("div",{className:"flex items-center justify-between px-5 pt-5 pb-3",style:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000"},children:[s.jsx("span",{className:"text-xl font-bold",style:{color:"light"===r?"#FFFFFF":"#F8FAFC"},children:P}),"artist"!==a&&s.jsx(H,{onClick:()=>{"artist"!==a&&I(!0)},className:"p-2 rounded-lg transition-colors"})]}),s.jsxs("div",{className:"px-5 pb-4",style:{borderBottom:"1px solid rgba(75, 85, 99, 0.2)",backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000"},children:[s.jsxs("div",{className:"relative mb-4",children:[s.jsx(f,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:"light"===r?"#64748B":"#94A3B8"}}),s.jsx("input",{type:"text",value:C,onChange:e=>F(e.target.value),placeholder:"Search conversations...","aria-label":"Search conversations",className:"w-full pl-10 pr-4 py-3 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-opacity-50 transition-all",style:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",border:"1px solid rgba(75, 85, 99, 0.25)",color:"light"===r?"#FFFFFF":"#F8FAFC"}})]}),"artist"!==a&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>T("all"),className:"flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 "+("all"===M?"":"hover:brightness-110 active:scale-[0.98]"),style:"all"===M?{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",border:"1.5px solid rgba(148, 163, 184, 0.3)",color:"light"===r?"#FFFFFF":"#F8FAFC",boxShadow:"0 1px 2px rgba(148, 163, 184, 0.2)"}:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",color:"light"===r?"#64748B":"#94A3B8",border:"1px solid transparent"},children:"Primary"}),s.jsx("button",{onClick:()=>T("unread"),className:"flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 "+("unread"===M?"":"hover:brightness-110 active:scale-[0.98]"),style:"unread"===M?{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",border:"1.5px solid rgba(148, 163, 184, 0.3)",color:"light"===r?"#FFFFFF":"#F8FAFC",boxShadow:"0 1px 2px rgba(148, 163, 184, 0.2)"}:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",color:"light"===r?"#64748B":"#94A3B8",border:"1px solid transparent"},children:"General"}),s.jsx("button",{onClick:()=>T("pinned"),className:"flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 "+("pinned"===M?"":"hover:brightness-110 active:scale-[0.98]"),style:"pinned"===M?{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",border:"1.5px solid rgba(148, 163, 184, 0.3)",color:"light"===r?"#FFFFFF":"#F8FAFC",boxShadow:"0 1px 2px rgba(148, 163, 184, 0.2)"}:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",color:"light"===r?"#64748B":"#94A3B8",border:"1px solid transparent"},children:"Requests"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",style:{scrollbarWidth:"thin",scrollbarColor:"rgba(75, 85, 99, 0.3) transparent",WebkitOverflowScrolling:"touch"},children:J?s.jsx(X,{count:5}):0===R.length?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000"},children:s.jsx(y,{className:"w-8 h-8",style:{color:"light"===r?"#64748B":"#94A3B8"}})}),"artist"===a?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm font-medium",style:{color:"#94A3B8"},children:"No messages yet"}),s.jsx("p",{className:"text-xs mt-1",style:{color:"light"===r?"#64748B":"#94A3B8"},children:"Our support team will reach out to you here when needed."})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm font-medium",style:{color:"#94A3B8"},children:"No conversations found"}),s.jsx("p",{className:"text-xs mt-1",style:{color:"light"===r?"#64748B":"#94A3B8"},children:"Start a conversation to get help"})]})]}):R.map(t=>t.admin&&s.jsx(b,{user:t.admin,conversation:t,isActive:(null==L?void 0:L.id)===t.id,onClick:()=>Y(t),onPin:$,unreadCount:t.customer_id===e?t.unread_count_customer:t.unread_count_admin,currentUserId:e},t.id))})]}),s.jsx("div",{className:"hidden lg:flex flex-col flex-1 min-h-0 min-w-0 overflow-hidden",style:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#1A1A1E":"#000000",height:"100%",overflow:"hidden"},children:j?s.jsx(g,{isPending:!0,pendingRecipient:j.recipientUser,currentUserId:e,getSenderName:q,backgroundTheme:r,onSendPendingMessage:async e=>{const s=await k(null,e);s.newConversation&&(B(s.newConversation),v(s.newConversation.id,!0))},onCancelPending:N},`pending-${j.recipientId}`):L&&L.admin?s.jsx(g,{conversation:L,otherUser:L.admin,currentUserId:e,getSenderName:q,onMarkAsRead:e=>x(e,0),backgroundTheme:r},L.id):K?s.jsx(Z,{}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center px-6",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-5 rounded-2xl flex items-center justify-center",style:{backgroundColor:"light"===r?"#0F172A":"grey"===r?"#2A2A2E":"#1a1a1e",border:"1px solid rgba(75, 85, 99, 0.1)"},children:s.jsx(y,{className:"w-10 h-10",style:{color:"light"===r?"#64748B":"#94A3B8"}})}),s.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"light"===r?"#FFFFFF":"#F8FAFC"},children:"Select a conversation"}),s.jsx("p",{className:"text-sm",style:{color:"#94A3B8"},children:"Choose a support agent from the list to start chatting"})]})})}),s.jsx(G,{isOpen:U,onClose:()=>I(!1),onSelectUser:async e=>{I(!1);const s=await w(e);"existing"===s.type&&s.conversation?(B(s.conversation),E(!0)):"pending"===s.type&&(B(null),E(!0))},currentUserId:e,userType:a})]})}function K({isActive:e,onClick:l,icon:a,label:o}){const[n,i]=t.useState(!1);return s.jsxs("button",{type:"button",onClick:l,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:"w-full text-left px-3 sm:px-5 py-3 sm:py-3.5 rounded-xl text-xs sm:text-sm font-semibold transition-all duration-200 flex items-center gap-2 sm:gap-3 "+(e?"shadow-md":"hover:brightness-105"),style:{backgroundColor:e?"#0f0f13":"transparent",color:"#F8FAFC",border:e?"1px solid rgba(148, 163, 184, 0.3)":"1px solid rgba(75, 85, 99, 0.25)"},children:[r.cloneElement(a,{isHovered:n}),s.jsx("span",{children:o})]})}function Q({isOpen:e,onClose:r,userId:a}){const[o,n]=t.useState(""),[i,d]=t.useState("suggestion"),[x,u]=t.useState(!1),[m,h]=t.useState("idle");t.useEffect(()=>{const s=e=>{"Escape"===e.key&&r()};return e&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow=""}},[e,r]),t.useEffect(()=>{e||(n(""),d("suggestion"),h("idle"))},[e]);return e?s.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center backdrop-blur-sm animate-fade-in overflow-y-auto p-0 sm:p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.85)"},onClick:r,children:s.jsxs("div",{className:"relative w-full h-full sm:h-auto sm:max-w-2xl sm:mx-4 sm:my-8 sm:rounded-2xl shadow-2xl animate-fade-in flex flex-col",style:{backgroundColor:"#111111",border:"none"},onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 border-b flex-shrink-0",style:{borderColor:"rgba(75, 85, 99, 0.25)",backgroundColor:"#111111"},children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold tracking-tight",style:{color:"#F8FAFC"},children:"Give Feedback"}),s.jsx("button",{onClick:r,className:"p-2 sm:p-1.5 rounded-lg transition-colors hover:brightness-110",style:{backgroundColor:"transparent",color:"#64748B"},children:s.jsx(c,{className:"w-6 h-6 sm:w-5 sm:h-5"})})]}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),o.trim()&&a){u(!0),h("idle");try{const{error:e}=await l.from("feedback").insert({user_id:a,category:i,content:o.trim(),status:"pending"});if(e)throw e;h("success"),setTimeout(()=>{r()},1500)}catch(s){h("error")}finally{u(!1)}}},className:"p-4 sm:p-6 space-y-4 sm:space-y-5 flex-1 overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-2 sm:mb-3",style:{color:"#F8FAFC"},children:"Category"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[s.jsx(K,{isActive:"suggestion"===i,onClick:()=>d("suggestion"),icon:s.jsx(W,{}),label:"Suggestion"}),s.jsx(K,{isActive:"bug"===i,onClick:()=>d("bug"),icon:s.jsx(O,{}),label:"Bug Report"}),s.jsx(K,{isActive:"feature"===i,onClick:()=>d("feature"),icon:s.jsx(U,{}),label:"Feature Request"}),s.jsx(K,{isActive:"other"===i,onClick:()=>d("other"),icon:s.jsx(I,{}),label:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"#F8FAFC"},children:"Your Feedback"}),s.jsx("textarea",{value:o,onChange:e=>n(e.target.value),placeholder:"Share your thoughts, suggestions, or report any issues...",rows:5,required:!0,className:"w-full px-3 sm:px-4 py-3 rounded-xl text-sm resize-none transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/10 placeholder:text-slate-400 hover:border-slate-500/40",style:{backgroundColor:"#0f0f13",border:"1px solid rgba(75, 85, 99, 0.25)",color:"#F8FAFC"}})]}),"success"===m&&s.jsx("div",{className:"p-3 rounded-xl text-sm font-medium",style:{backgroundColor:"rgba(34, 197, 94, 0.1)",color:"#4ADE80",border:"1px solid rgba(34, 197, 94, 0.2)"},children:"âœ“ Feedback submitted successfully! Thank you."}),"error"===m&&s.jsx("div",{className:"p-3 rounded-xl text-sm font-medium",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",color:"#F87171",border:"1px solid rgba(239, 68, 68, 0.2)"},children:"âœ— Failed to submit feedback. Please try again."}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 pt-2",children:[s.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:brightness-110",style:{backgroundColor:"transparent",border:"1px solid rgba(75, 85, 99, 0.25)",color:"#94A3B8"},children:"Cancel"}),s.jsx("button",{type:"submit",disabled:!o.trim()||x||"success"===m,className:"flex-1 px-4 py-3 rounded-xl text-sm font-bold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed hover:brightness-105",style:{backgroundColor:"success"===m?"#22C55E":"#F8FAFC",color:"success"===m?"#FFFFFF":"#111111"},children:x?"Submitting...":"success"===m?"Submitted!":"Submit Feedback"})]})]})]})}):null}const ee=e=>{try{const s=`dismissed_announcements_${e}`,t=localStorage.getItem(s);return t?new Set(JSON.parse(t)):new Set}catch{return new Set}};function se({userId:e,userType:r="creator"}){const[a,o]=t.useState([]),[n,i]=t.useState(!0);t.useEffect(()=>{if(!e)return void i(!1);const s=async()=>{try{const s=ee(e),{data:t,error:a}=await l.from("announcements").select("id, title, content, created_at, is_read, announcement_type, target_audience").or(`user_id.eq.${e},user_id.is.null`).eq("is_read",!1).order("created_at",{ascending:!1}).limit(10);if(a)throw a;const n=(t||[]).filter(e=>{if(s.has(e.id))return!1;const t=e.target_audience||"all";return"all"===t||("creators"===t&&("creator"===r||"business"===r)||"artists"===t&&"artist"===r)}).slice(0,5);o(n)}catch(s){o([])}finally{i(!1)}};s();const t=l.channel(`announcements-${e}-${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"announcements"},t=>{const l=t.new,a=l.target_audience||"all",o="all"===a||"creators"===a&&("creator"===r||"business"===r)||"artists"===a&&"artist"===r;null!==l.user_id&&l.user_id!==e||!o||s()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"announcements"},t=>{const r=t.new;null!==r.user_id&&r.user_id!==e||s()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"announcements"},()=>{s()}).subscribe(e=>{});return()=>{l.removeChannel(t)}},[e,r]);const d=async s=>{o(e=>e.filter(e=>e.id!==s)),e&&((e,s)=>{try{const t=`dismissed_announcements_${e}`,r=ee(e);r.add(s),localStorage.setItem(t,JSON.stringify([...r]))}catch(t){}})(e,s);try{await l.from("announcements").update({is_read:!0}).eq("id",s)}catch(t){}};if(n||0===a.length)return null;const x=a.find(e=>!e.is_read)||a[0];if(!x)return null;const u="serious"===x.announcement_type;return s.jsx("div",{className:"mb-4 animate-fade-in",children:s.jsx("div",{className:"rounded-xl px-4 py-3 border relative",style:{backgroundColor:u?"rgba(239, 68, 68, 0.1)":"#111111",borderColor:u?"rgba(239, 68, 68, 0.4)":"#2f2f2f"},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:"text-sm font-semibold mb-1 flex items-center gap-1.5",style:{color:u?"#ef4444":"#F8FAFC"},children:[u&&s.jsx(v,{className:"w-3.5 h-3.5 flex-shrink-0",style:{color:"#ef4444"}}),x.title]}),s.jsx("p",{className:"text-xs leading-relaxed whitespace-pre-wrap",style:{color:u?"#F8FAFC":"#94A3B8"},children:x.content})]}),s.jsx("button",{onClick:()=>d(x.id),className:"flex-shrink-0 w-6 h-6 rounded-md flex items-center justify-center transition-all duration-200 hover:brightness-110",style:{backgroundColor:u?"rgba(239, 68, 68, 0.2)":"#0f0f13",color:u?"#ef4444":"#94A3B8"},"aria-label":"Dismiss announcement",children:s.jsx(c,{className:"w-3 h-3"})})]})})})}const te=()=>s.jsxs("div",{className:"music-icon group w-5 h-5 flex-shrink-0",children:[s.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[s.jsx("path",{d:"M12 28C12 20.268 18.268 14 26 14H22C29.732 14 36 20.268 36 28",stroke:"white",strokeWidth:"2",strokeLinecap:"round",fill:"none"}),s.jsx("rect",{x:"8",y:"26",width:"8",height:"12",rx:"2",stroke:"white",strokeWidth:"2",fill:"none"}),s.jsx("rect",{x:"32",y:"26",width:"8",height:"12",rx:"2",stroke:"white",strokeWidth:"2",fill:"none"}),s.jsx("rect",{x:"10",y:"28",width:"4",height:"8",rx:"1",fill:"white",opacity:"0.3"}),s.jsx("rect",{x:"34",y:"28",width:"4",height:"8",rx:"1",fill:"white",opacity:"0.3"})]}),s.jsx("div",{className:"note note-1",children:s.jsxs("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",children:[s.jsx("path",{d:"M2 12V3L9 1V10",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("circle",{cx:"2",cy:"12",r:"2",fill:"white"})]})}),s.jsx("div",{className:"note note-2",children:s.jsxs("svg",{width:"8",height:"12",viewBox:"0 0 10 14",fill:"none",children:[s.jsx("path",{d:"M2 12V3L9 1V10",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("circle",{cx:"2",cy:"12",r:"2",fill:"white"})]})}),s.jsx("div",{className:"note note-3",children:s.jsxs("svg",{width:"6",height:"10",viewBox:"0 0 10 14",fill:"none",children:[s.jsx("path",{d:"M2 12V3L9 1V10",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("circle",{cx:"2",cy:"12",r:"2",fill:"white"})]})})]}),re=()=>s.jsx("div",{className:"creators-icon group w-5 h-5 flex-shrink-0",children:s.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[s.jsx("rect",{x:"14",y:"6",width:"20",height:"36",rx:"3",stroke:"white",strokeWidth:"2",fill:"none"}),s.jsx("rect",{x:"20",y:"9",width:"8",height:"2",rx:"1",fill:"white",opacity:"0.4"}),s.jsx("rect",{x:"21",y:"38",width:"6",height:"2",rx:"1",fill:"white",opacity:"0.4"}),s.jsxs("g",{className:"app app-1",children:[s.jsx("rect",{x:"16",y:"14",width:"10",height:"8",rx:"2",fill:"white",opacity:"0.2"}),s.jsx("path",{d:"M20 16L23 18L20 20V16Z",fill:"white",opacity:"0.8"})]}),s.jsxs("g",{className:"app app-2",children:[s.jsx("rect",{x:"26",y:"14",width:"8",height:"8",rx:"2",stroke:"white",strokeWidth:"1.5",fill:"none",opacity:"0.8"}),s.jsx("circle",{cx:"30",cy:"18",r:"2",stroke:"white",strokeWidth:"1",fill:"none",opacity:"0.8"}),s.jsx("circle",{cx:"32.5",cy:"15.5",r:"0.8",fill:"white",opacity:"0.6"})]})]})}),le=()=>s.jsx("div",{className:"businesses-icon group w-5 h-5 flex-shrink-0",children:s.jsxs("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[s.jsx("rect",{x:"6",y:"18",width:"36",height:"22",rx:"3",stroke:"white",strokeWidth:"2",fill:"none"}),s.jsx("path",{d:"M18 18V14C18 12.8954 18.8954 12 20 12H28C29.1046 12 30 12.8954 30 14V18",stroke:"white",strokeWidth:"2",fill:"none"}),s.jsx("rect",{className:"lid",x:"6",y:"18",width:"36",height:"8",rx:"3",stroke:"white",strokeWidth:"2",fill:"black"}),s.jsx("rect",{className:"clasp",x:"21",y:"24",width:"6",height:"4",rx:"1",fill:"white"}),s.jsxs("g",{className:"documents",children:[s.jsx("rect",{x:"12",y:"22",width:"10",height:"14",rx:"1",fill:"white",opacity:"0.2"}),s.jsx("line",{x1:"14",y1:"25",x2:"20",y2:"25",stroke:"white",strokeWidth:"1",opacity:"0.6"}),s.jsx("line",{x1:"14",y1:"28",x2:"18",y2:"28",stroke:"white",strokeWidth:"1",opacity:"0.6"}),s.jsx("line",{x1:"14",y1:"31",x2:"20",y2:"31",stroke:"white",strokeWidth:"1",opacity:"0.6"}),s.jsx("rect",{x:"26",y:"22",width:"10",height:"14",rx:"1",fill:"white",opacity:"0.2"}),s.jsx("path",{d:"M28 33L31 28L33 30L36 25",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.8"})]})]})}),ae=e=>{switch(e){case"artist":return s.jsx(te,{});case"creator":default:return s.jsx(re,{});case"business":return s.jsx(le,{})}};function oe({userProfile:e,cachedProfilePic:r,onBack:l,onUpdateProfile:a,isEditing:o=!1,setIsEditing:n,onEditProfile:i,appliedTheme:c="dark"}){const[d,u]=t.useState(!1),[m,h]=t.useState(!1),[p,g]=t.useState("posts");t.useState((null==e?void 0:e.bio)||"");const[f,y]=t.useState(null),[b,v]=t.useState(null),[w,k]=t.useState(!1),[A,_]=t.useState(!1),L=t.useRef(null),B=t.useRef(null),S=null==e?void 0:e.profile_picture_url,E=r||(S&&!S.startsWith("blob:")?S:null);return s.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"light"===c?"#0F172A":"grey"===c?"#1A1A1E":"#000000"},children:[s.jsx("div",{className:"sticky top-0 z-10 backdrop-blur-md border-b",style:{backgroundColor:"light"===c?"rgba(15, 23, 42, 0.8)":"grey"===c?"rgba(26, 26, 30, 0.8)":"rgba(0, 0, 0, 0.8)",borderColor:"light"===c?"rgba(148, 163, 184, 0.3)":"grey"===c?"#2A2A2E":"#1a1a1a"},children:s.jsxs("div",{className:"flex items-center gap-6 px-4 py-3",children:[l&&s.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:s.jsx(N,{className:"w-5 h-5",style:{color:"#F8FAFC"}})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-bold text-xl",style:{color:"#F8FAFC"},children:(null==e?void 0:e.first_name)&&(null==e?void 0:e.last_name)?`${e.first_name} ${e.last_name}`:"Your Profile"}),s.jsx("p",{className:"text-sm",style:{color:"#94A3B8"},children:"0 posts"})]})]})}),s.jsxs("div",{className:"relative h-48 cursor-pointer group border",style:{backgroundColor:"transparent",borderColor:"#2f2f2f"},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onClick:()=>{var e;null==(e=L.current)||e.click()},children:[(f||(null==e?void 0:e.banner_url))&&s.jsx("img",{src:f||(null==e?void 0:e.banner_url),alt:"Banner",className:"w-full h-full object-cover",loading:"eager",decoding:"async",fetchpriority:"high"}),s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center transition-opacity "+(d||w?"opacity-100":"opacity-0"),children:w?s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-sm",style:{color:"#F8FAFC"},children:"Uploading..."})]}):s.jsx(C,{className:"w-8 h-8",style:{color:"#F8FAFC"}})}),s.jsx("input",{type:"file",ref:L,className:"hidden",accept:"image/*",onChange:async e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];if(t&&a){const e=URL.createObjectURL(t);y(e),k(!0);try{await a({banner:t}),y(null)}catch(r){y(null)}finally{k(!1)}}}})]}),s.jsxs("div",{className:"px-6 pb-6 relative",children:[s.jsxs("div",{className:"absolute -top-16 left-6 w-32 h-32 rounded-full border-4 border-[#111111] overflow-hidden cursor-pointer group",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),onClick:()=>{var e;null==(e=B.current)||e.click()},children:[s.jsx("img",{src:b||E||x,alt:"Profile",className:"w-full h-full object-cover",loading:"eager",decoding:"async",fetchpriority:"high"}),s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center transition-opacity "+(m||A?"opacity-100":"opacity-0"),children:A?s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-xs",style:{color:"#F8FAFC"},children:"Uploading..."})]}):s.jsx(C,{className:"w-6 h-6",style:{color:"#F8FAFC"}})}),s.jsx("input",{type:"file",ref:B,className:"hidden",accept:"image/*",onChange:async e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];if(t&&a){const e=URL.createObjectURL(t);v(e),_(!0);try{await a({profile_picture:t})}catch(r){v(null)}finally{_(!1)}}}})]}),s.jsx("div",{className:"flex justify-end pt-3",children:s.jsx("button",{onClick:i,className:"px-5 py-2 rounded-xl font-semibold text-sm hover:brightness-110 transition-all border",style:{backgroundColor:"transparent",borderColor:"#2f2f2f",color:"#F8FAFC"},children:"Edit profile"})}),s.jsxs("div",{className:"mt-12",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"font-bold text-xl",style:{color:"#F8FAFC"},children:(null==e?void 0:e.first_name)&&(null==e?void 0:e.last_name)?`${e.first_name} ${e.last_name}`:"Your Name"}),ae(null==e?void 0:e.user_type)]}),s.jsxs("p",{style:{color:"#64748B"},children:["@",(null==e?void 0:e.username)||"username"]})]}),s.jsx("p",{className:"mt-3",style:{color:"#F8FAFC"},children:(null==e?void 0:e.bio)||"No bio yet."}),s.jsxs("div",{className:"flex items-center gap-4 mt-3",style:{color:"#94A3B8"},children:[(null==e?void 0:e.location)&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(F,{className:"w-4 h-4"}),s.jsx("span",{children:e.location})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(j,{className:"w-4 h-4"}),s.jsx("span",{children:(e=>{if(!e)return"Joined recently";return`Joined ${new Date(e).toLocaleDateString("en-US",{month:"long",year:"numeric"})}`})(null==e?void 0:e.created_at)})]})]})]}),s.jsx("div",{className:"border-b",style:{borderColor:"#1a1a1a"},children:s.jsx("div",{className:"flex",children:[{id:"posts",label:"Posts"},{id:"replies",label:"Replies"},{id:"highlights",label:"Highlights"},{id:"articles",label:"Articles"},{id:"media",label:"Media"},{id:"likes",label:"Likes"}].map(e=>s.jsxs("button",{onClick:()=>g(e.id),className:"flex-1 py-4 text-center hover:bg-white/5 transition-colors relative",children:[s.jsx("span",{style:{color:p===e.id?"#F8FAFC":"#94A3B8",fontWeight:p===e.id?600:400},children:e.label}),p===e.id&&s.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-14 h-1 rounded-full",style:{backgroundColor:"#3B82F6"}})]},e.id))})}),s.jsx("div",{className:"p-8 text-center",style:{color:"#94A3B8"},children:s.jsx("p",{children:"Interactions coming soon"})})]})}export{se as A,O as B,$ as D,Q as F,L as I,J as M,I as O,oe as P,V as R,Y as S,T as V,W as a,U as b};
